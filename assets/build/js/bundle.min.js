require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),AppsRouter=require("./apps/apps_router");Application={started:null,initialize:function(){var e=this;_.isUndefined(backendUser)||(window.cache.currentUser=backendUser),_.isUndefined(systemName)||(window.cache.system.name=systemName),_.extend(window.cache.userEvents,Backbone.Events),_.extend(entities.request,Backbone.Events),_.extend(rendering,Backbone.Events),this.started?(e.started=!1,this.application.initialize()):(this.application=AppsRouter.initialize(),e.started=!0)}},module.exports=Application;


},{"./apps/apps_router":20,"backbone":133,"underscore":159}],2:[function(require,module,exports){
require("blueimp-file-upload/js/vendor/jquery.ui.widget"),i18n=require("i18next-client/i18next.commonjs.withJQuery"),moment=require("moment"),window.Application=window.Application||{},window.cache={userEvents:{},currentUser:null,system:{}},window.entities={request:{}},rendering={},_=require("underscore"),Backbone=require("backbone"),Backbone.$=jQuery;var appr=require("./app-run");appr.initialize();
},{"./app-run":1,"backbone":133,"blueimp-file-upload/js/vendor/jquery.ui.widget":136,"i18next-client/i18next.commonjs.withJQuery":152,"moment":156,"underscore":159}],3:[function(require,module,exports){
var _=require("underscore"),async=require("async"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),BaseController=require("../../../base/base_controller"),AdminMainView=require("../views/admin_main_view");Admin={},Admin.ShowController=BaseController.extend({events:{},initialize:function(e){this.options=e,this.adminMainView=new AdminMainView({action:e.action,el:this.el}).render()},cleanup:function(){this.adminMainView.cleanup(),removeView(this)}}),module.exports=Admin.ShowController;


},{"../../../base/base_controller":101,"../../../mixins/utilities":128,"../views/admin_main_view":15,"async":131,"backbone":133,"underscore":159}],4:[function(require,module,exports){
module.exports='<div class="row">\n  <div class="col-md-12">\n    <h2><i class="fa fa-newspaper-o"></i><span class="box-icon-text">Recent Activity</span></h2>\n    <ul class="activity-feed list-unstyled"></ul>\n  </div>\n</div>\n\n<script type="text/template" id="newComment">\n  <li class="box-pad-t box-pad-b">\n    &ldquo;{{comment.value}}&rdquo; said <a href="/profile/{{user.id}}">{{user.name || user.username}}</a> on <a href="/{{itemType}}s/{{item.id}}">{{item.title}}</a>\n    <div class="comment-metadata"><time title="{{createdAt}}">{{createdAtFormatted}}</time></div>\n  </li>\n</script>\n\n<script type="text/template" id="newVolunteer">\n  <li class="box-pad-t box-pad-b">\n    <a href="/profile/{{user.id}}">{{user.name || user.username}}</a> signed up for <a href="/tasks/{{task.id}}">{{task.title}}</a>\n    <div class="comment-metadata"><time title="{{createdAt}}">{{createdAtFormatted}}</time></div>\n  </li>\n</script>\n\n<script type="text/template" id="newUser">\n  <li class="box-pad-t box-pad-b">\n    <a href="/profile/{{user.id}}">{{user.name || user.username}}</a> joined!\n    <div class="comment-metadata"><time title="{{createdAt}}">{{createdAtFormatted}}</time></div>\n  </li>\n</script>\n\n<script type="text/template" id="updatedUser">\n  <li class="box-pad-t box-pad-b">\n    <a href="/profile/{{user.id}}">{{user.name || user.username}}</a> updated their profile\n    <div class="comment-metadata"><time title="{{createdAt}}">{{createdAtFormatted}}</time></div>\n  </li>\n</script>\n\n<script type="text/template" id="newTask">\n  <li class="box-pad-t box-pad-b">\n    <a href="/profile/{{user.id}}">{{user.name || user.username}}</a> posted a new opportunity: <a href="/tasks/{{task.id}}">{{task.title}}</a>\n    <div class="comment-metadata"><time title="{{createdAt}}">{{createdAtFormatted}}</time></div>\n  </li>\n</script>\n';


},{}],5:[function(require,module,exports){
module.exports='<div class="row">\n  <div class="col-sm-6 box-pad-t box-pad-b">\n    <h2><i class="fa fa-line-chart"></i><span class="box-icon-text" data-i18n="InteractionPlural">Interactions</span></h2>\n    <ul class="metrics">\n      <li>Total Interactions: <%- interactions.count %></li>\n      <ul>\n        <li><span data-i18n="Task">Task</span> Signups: <%- interactions.signups %></li>\n        <li>Assignments: <%- interactions.assignments %></li>\n        <li>Discussion Posts: <%- interactions.posts %></li>\n        <li>Completed Tasks: <%- interactions.completions %></li>\n        <li>Draft Tasks: <%- interactions.drafts %></li>\n        <li>Published Tasks: <%- interactions.publishes %></li>\n      </ul>\n    </ul>\n  </div>\n  <div class="col-sm-6 box-pad-t box-pad-b">\n    <h2><i class="fa fa-tags"></i><span class="box-icon-text" data-i18n="TaskPlural">Tasks</span></h2>\n    <ul class="metrics">\n      <li>Total Created: <%- tasks.count %></li>\n      <ul>\n        <li>Draft: <%- tasks.draft %></li>\n        <li>Open: <%- tasks.open %></li>\n        <li>Assigned: <%- tasks.assigned %></li>\n        <li>Completed: <%- tasks.completed %></li>\n        <li>Archived: <%- tasks.archived %></li>\n      </ul>\n    </ul>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-6 box-pad-t box-pad-b">\n    <h2><i class="fa fa-user"></i><span class="box-icon-text">Users</span></h2>\n    <ul class="metrics">\n      <li>Quantity: <%- users.count %></li>\n      <ul><li>Who have created tasks: <%- users.withTasks %></li></ul>\n    </ul>\n  </div>\n  <div class="col-sm-6 box-pad-t box-pad-b">\n    <h2><i class="fa fa-rocket"></i><span class="box-icon-text" data-i18n="ProjectPlural">Projects</span></h2>\n    <ul class="metrics">\n      <li>Total Created: <%- projects.count %></li>\n    </ul>\n  </div>\n</div>\n';


},{}],6:[function(require,module,exports){
module.exports='<div class="alert alert-danger" style="display:none;">\n</div>\n<div class="col-md-12 box box-pad-lr">\n  <div class="row">\n    <div class="col-md-12 sm-nopadding md-nopadding">\n      <div class="fullwidth text-center spinner">\n        Loading... <i class="fa fa-spinner fa-spin"></i>\n      </div>\n    </div>\n  </div>\n  <div class="metric-block"></div>\n  <div class="activity-block"></div>\n</div>\n';


},{}],7:[function(require,module,exports){
module.exports='<div class="row">\n  <div class="col-sm-3 col-md-3">\n\n    <nav class="navbar admin navbar-default" role="navigation">\n      <!-- Brand and toggle get grouped for better mobile display -->\n      <div class="navbar-header">\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n        <h2 class="box-pad-lr box-pad-t">Administration</h2>\n      </div>\n\n      <!-- Collect the nav links, forms, and other content for toggling -->\n      <div class="collapse navbar-collapse navbar-ex1-collapse">\n        <ul class="nav navbar-nav">\n          <li><a href="/admin/dashboard" class="link-admin" data-target="dashboard">Dashboard</a></li>\n          <li><a href="/admin/users" class="link-admin" data-target="user">User Management</a></li>\n          <li><a href="/admin/tags" class="link-admin" data-target="tag">Tag Configuration</a></li>\n          <li><a href="/admin/tasks" class="link-admin" data-target="tasks">Tasks</a></li>\n        </ul>\n      </div><!-- /.navbar-collapse -->\n    </nav>\n\n  </div>\n  <div class="col-sm-9 col-md-9 sm-nopadding">\n    <div class="admin-container" id="admin-user">\n    </div>\n    <div class="admin-container" id="admin-tag">\n    </div>\n    <div class="admin-container" id="admin-task">\n    </div>\n    <div class="admin-container" id="admin-dashboard">\n    </div>\n  </div>\n</div>\n';


},{}],8:[function(require,module,exports){
module.exports='<ul class="pagination" data-filter="<% q %>">\n  <% if (page > 3) { %>\n  <li><a href="#">&laquo;</a></li>\n  <% } %>\n  <%\n  var start = Math.max(1, page-2);\n  var ceil = Math.ceil(count/trueLimit);\n  if (ceil < page + 2) {\n    start = Math.max(1, ceil - 4);\n  }\n  var max = Math.min(page + 2, ceil);\n  if ((ceil > 5) && ((page + 2) < 5)) {\n    max = 5;\n  }\n  %>\n  <% for (var i = start; i <= max; i++) { %>\n  <li <% if (i == page) { %>class="active"<% } %>><a class="page" data-page="<%- i %>" href="<%- urlbase %>?p=<%- i %>&q=<%- q %>"><%- i %> <% if (i == page) { %><span class="sr-only">(current)</span><% } %></a></li>\n  <% } %>\n  <% if (ceil > (page + 2)) { %>\n  <li><a href="#">&raquo;</a></li>\n  <% } %>\n</ul>\n';


},{}],9:[function(require,module,exports){
module.exports='<div class="alert alert-danger" style="display:none;">\n</div>\n<div class="row">\n  <div class="col-md-12 box box-pad-lr">\n    <div class="row">\n      <div class="col-md-12 box-pad-b">\n        <h2>Find and add tags</h2>\n        <p>Search in the fields below to see existing tags. Type a new tag value to create it.</p>\n        <% _(types).forEach(function(tag) { %>\n          <div class="row box-pad-b box-pad-t">\n            <label for="<%= tag %>" class="col-md-2 control-label"><%= tag %>:</label>\n            <div class="col-md-10">\n              <input type="hidden" id="<%= tag %>" name="<%= tag %>" style="width: 100%"/>\n              <div class="form-status text-success"></div>\n            </div>\n          </div>\n        <% }); %>\n      </div>\n    </div>\n  </div>\n</div>\n';


},{}],10:[function(require,module,exports){
module.exports='<div class="alert alert-danger" style="display:none;">\n</div>\n<div class="row">\n  <div class="col-md-12 box box-pad-lr">\n    <div class="row">\n      <div class="col-md-12">\n\n        <div role="tabpanel">\n\n          <!-- Nav tabs -->\n          <ul class="nav nav-tabs box-pad-t" role="tablist">\n            <li role="presentation">\n              <a href="#drafts" aria-controls="open" role="tab" data-toggle="tab">\n                Drafts: <%- drafts.length %>\n              </a>\n            </li>\n            <li role="presentation" class="active">\n              <a href="#open" aria-controls="open" role="tab" data-toggle="tab">\n                Open: <%- open.length %>\n              </a>\n            </li>\n            <li role="presentation">\n              <a href="#signups" aria-controls="signups" role="tab" data-toggle="tab">\n                Sign-ups: <%- withSignups.length %>\n              </a>\n            </li>\n            <li role="presentation">\n              <a href="#assigned" aria-controls="assigned" role="tab" data-toggle="tab">\n                Assigned: <%- assigned.length %>\n              </a>\n            </li>\n            <li role="presentation">\n              <a href="#completed" aria-controls="completed" role="tab" data-toggle="tab">\n                Completed: <%- completed.length %>\n              </a>\n            </li>\n          </ul>\n\n          <!-- Tab panes -->\n          <div class="tab-content box-pad-t">\n            <div role="tabpanel" class="tab-pane" id="drafts">\n              <ul class="metrics">\n                <% _(drafts).forEach(function(task) { %>\n                  <li>\n                    <a href="/tasks/<%- task.id %>"><%- task.title %></a>,\n                    <a href="/profile/<%- task.user.id %>"><%- task.user.name || task.user.username %></a>\n                    <% if (task.volunteers.length) { %>\n                    <p>Sign-ups:\n                      <% _(task.volunteers).forEach(function(vol) { %>\n                        <a href="/profile/<%- task.user.id %>"><%- vol.user.name || vol.user.username %></a>\n                      <% }); %>\n                    </p>\n                    <% } %>\n                  </li>\n                <% }); %>\n              </ul>\n            </div>\n            <div role="tabpanel" class="tab-pane active" id="open">\n              <ul class="metrics">\n                <% _(open).forEach(function(task) { %>\n                  <li>\n                    <a href="/tasks/<%- task.id %>"><%- task.title %></a>,\n                    <a href="/profile/<%- task.user.id %>"><%- task.user.name || task.user.username %></a>\n                    <% if (task.volunteers.length) { %>\n                    <p>Sign-ups:\n                      <% _(task.volunteers).forEach(function(vol) { %>\n                        <a href="/profile/<%- task.user.id %>"><%- vol.user.name || vol.user.username %></a>\n                      <% }); %>\n                    </p>\n                    <% } %>\n                  </li>\n                <% }); %>\n              </ul>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="signups">\n              <ul class="metrics">\n                <% _(withSignups).forEach(function(task) { %>\n                  <li>\n                    <a href="/tasks/<%- task.id %>"><%- task.title %></a>,\n                    <a href="/profile/<%- task.user.id %>"><%- task.user.name || task.user.username %></a>\n                    <% if (task.volunteers.length) { %>\n                      <p>Sign-ups:\n                        <% _(task.volunteers).forEach(function(vol) { %>\n                          <a href="/profile/<%- task.user.id %>"><%- vol.user.name || vol.user.username %></a>\n                        <% }); %>\n                      </p>\n                    <% } %>\n                  </li>\n                <% }); %>\n              </ul>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="assigned">\n              <ul class="metrics">\n                <% _(assigned).forEach(function(task) { %>\n                  <li>\n                    <a href="/tasks/<%- task.id %>"><%- task.title %></a>,\n                    <a href="/profile/<%- task.user.id %>"><%- task.user.name || task.user.username %></a>\n                    <% if (task.volunteers.length) { %>\n                      <p>Sign-ups:\n                        <% _(task.volunteers).forEach(function(vol) { %>\n                          <a href="/profile/<%- task.user.id %>"><%- vol.user.name || vol.user.username %></a>\n                        <% }); %>\n                      </p>\n                    <% } %>\n                  </li>\n                <% }); %>\n              </ul>\n            </div>\n            <div role="tabpanel" class="tab-pane" id="completed">\n              <ul class="metrics">\n                <% _(completed).forEach(function(task) { %>\n                  <li>\n                    <a href="/tasks/<%- task.id %>"><%- task.title %></a>,\n                    <a href="/profile/<%- task.user.id %>"><%- task.user.name || task.user.username %></a>\n                    <% if (task.volunteers.length) { %>\n                      <p>Sign-ups:\n                        <% _(task.volunteers).forEach(function(vol) { %>\n                          <a href="/profile/<%- task.user.id %>"><%- vol.user.name || vol.user.username %></a>\n                        <% }); %>\n                      </p>\n                    <% } %>\n                  </li>\n                <% }); %>\n              </ul>\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n';


},{}],11:[function(require,module,exports){
module.exports='<form action="" id="reset-password">\n  <div class="modal-body">\n    <div class="alert alert-danger" style="display:none;">\n    </div>\n    <fieldset>\n      <div class="form-group">\n        <label for="newPassword">New Password for <%- u.name %></label>\n        <input type="password" class="form-control" id="newPassword" name="password" placeholder="New Password" data-validate="empty">\n        <span class="help-block error-empty" style="display:none;">You must enter a password.</span>\n      </div>\n    </fieldset>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0" data-dismiss="modal">Cancel</button>\n    <input type="submit" class="btn btn-c2" id="submit" value="Change Password"/>\n  </div>\n</form>\n';


},{}],12:[function(require,module,exports){
module.exports='<table class="table table-hover table-condensed">\n  <thead>\n    <tr>\n      <th class="admin-user-id">#</th>\n      <th>Name</th>\n      <th>Email</th>\n      <th>Created At</th>\n      <th><span data-i18n="ProjectPlural">Projects</span> (open / closed)</th>\n      <th><span data-i18n="TaskPlural">Tasks</span> (open / assigned / completed / archived)</th>\n      <th>Volunteer (open / assigned / completed / archived)</th>\n      <th class="admin-user-checkbox">Enabled</th>\n      <% if (login.local.enabled === true) { %>\n      <th class="admin-user-checkbox">Password</th>\n      <% } %>\n      <th class="admin-user-checkbox">Admin</th>\n    </tr>\n  </thead>\n  <tbody>\n    <% if (users.length === 0) { %>\n    <tr class="empty-row">\n      <td colspan="5">\n        No users found.\n      </td>\n    </tr>\n    <% } %>\n    <% _.each(users, function (u) { %>\n    <tr data-id="<%- u.id %>">\n      <td>\n        <%- u.id %>\n      </td>\n      <td class="admin-table-name">\n        <%- u.name %>\n      </td>\n      <td class="admin-table-username">\n        <a class="link-backbone" href="/profile/<%- u.id %>"><%- u.username %></a>\n      </td>\n      <td class="admin-table-createdat">\n        <!-- day -->\n        <% var created = new Date(u.createdAt); %>\n        <%= created.toLocaleDateString() %>\n        <!-- time -->\n        <%= created.toLocaleTimeString() %>\n      </td>\n      <td class="admin-table-projects">\n      <% if (u.projectsCreatedOpen !== 0 || u.projectsCreatedClosed !== 0) { %>\n        <a class="link-backbone" href="/profile/<%- u.id %>"><%- u.projectsCreatedOpen %> / <%- u.projectsCreatedClosed %></a>\n      <% } %>\n      </td>\n      <td class="admin-table-tasks">\n      <% if (u.tasksCreatedOpen !== 0 || u.tasksCreatedAssigned !== 0 || u.tasksCreatedCompleted !== 0 || u.tasksCreatedArchived !== 0) { %>\n        <a class="link-backbone" href="/profile/<%- u.id %>"><%- u.tasksCreatedOpen %> / <%- u.tasksCreatedAssigned %> / <%- u.tasksCreatedCompleted %> / <%- u.tasksCreatedArchived %></a>\n      <% } %>\n      </td>\n      <td class="admin-table-volunteer">\n      <% if (u.volCountOpen !== 0 || u.volCountAssigned !== 0 || u.volCountCompleted !== 0 || u.volCountArchived !== 0) { %>\n        <a class="link-backbone" href="/profile/<%- u.id %>"><%- u.volCountOpen %> / <%- u.volCountAssigned %> / <%- u.volCountCompleted %> / <%- u.volCountArchived %></a>\n      <% } %>\n      </td>\n      <td>\n        <button type="button" class="btn btn-default btn-xs admin-user-enable" data-toggle="tooltip" data-placement="top" title="Enable" <% if (u.disabled !== true) { %>style="display:none;"<% } %>><i class="fa fa-remove-sign icon-red icon-center"></i></button>\n        <button type="button" class="btn btn-default btn-xs admin-user-disable" data-toggle="tooltip" data-placement="top" title="Disable" <% if (u.disabled === true) { %>style="display:none;"<% } %>><i class="fa fa-check icon-green icon-center"></i></button>\n        <button type="button" class="btn btn-default btn-xs btn-spin" style="display:none;"><i class="fa-spin fa fa-spinner icon-center"></i></button>\n      </td>\n      <% if (login.local.enabled === true) { %>\n      <td>\n        <button type="button" class="btn btn-default btn-xs admin-user-resetpw" data-toggle="tooltip" data-placement="top" title="Reset Password"><i class="fa fa-check fa-cog"></i></button>\n        <button type="button" class="btn btn-default btn-xs admin-user-unlock" data-toggle="tooltip" data-placement="top" title="Unlock User (clear password attempts)" <% if (u.locked !== true) { %>style="display:none;"<% } %>><i class="fa fa-check icon-red fa-lock"></i></button>\n        <button type="button" class="btn btn-default btn-xs btn-spin" style="display:none;"><i class="fa fa-spin fa-spinner icon-center"></i></button>\n      </td>\n      <% } %>\n      <td>\n        <button type="button" class="btn btn-default btn-xs admin-user-rmadmin" data-toggle="tooltip" data-placement="top" title="Remove Admin Priviledges" <% if (u.isAdmin !== true) { %>style="display:none;"<% } %>><i class="fa fa-check icon-green icon-center"></i></button>\n        <button type="button" class="btn btn-default btn-xs admin-user-mkadmin" data-toggle="tooltip" data-placement="top" title="Make Admin" <% if (u.isAdmin === true) { %>style="display:none;"<% } %>><i class="fa fa-times-circle icon-red icon-center"></i></button>\n        <button type="button" class="btn btn-default btn-xs btn-spin" style="display:none;"><i class="fa fa-spin fa-spinner icon-center"></i></button>\n      </td>\n    </tr>\n    <% }); %>\n  </tbody>\n</table>\n';


},{}],13:[function(require,module,exports){
module.exports='<div class="alert alert-danger" style="display:none;">\n</div>\n<div id="reset-password-container"></div>\n<div class="row">\n  <div class="col-md-12 box box-pad-lr">\n    <div class="row">\n      <div class="col-lg-8 col-md-7 col-sm-5 sm-nopadding md-nopadding">\n\n      <form class="form-inline fullwidth" role="form">\n        <div class="form-group fullwidth">\n          <label class="sr-only" for="user-filter">Filter</label>\n          <input type="text" class="form-control fullwidth" id="user-filter" placeholder="Filter">\n        </div>\n      </form>\n\n      </div>\n      <div class="col-lg-4 col-md-5 col-sm-7 sm-nopadding md-nopadding-right">\n        <div class="pull-right" id="user-page">\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <div class="fullwidth text-center spinner">\n          Loading... <i class="fa fa-spinner fa-spin"></i>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <div class="table-responsive">\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>';


},{}],14:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),ModalComponent=require("../../../components/modal"),AdminDashboardTemplate=require("../templates/admin_dashboard_template.html"),AdminDashboardTable=require("../templates/admin_dashboard_table.html"),AdminDashboardActivities=require("../templates/admin_dashboard_activities.html"),LoginConfig=require("../../../config/login.json"),AdminDashboardView=Backbone.View.extend({events:{},initialize:function(e){this.options=e,this.data={page:1}},render:function(){var e=this;if(Backbone.history.navigate("/admin/dashboard"),this.$el.show(),this.rendered===!0)return this;var t={user:window.cache.currentUser,login:LoginConfig},i=_.template(AdminDashboardTemplate)(t);return this.$el.html(i),this.rendered=!0,this.fetchData(e,this.data),this},renderMetrics:function(e,t){var i=_.template(AdminDashboardTable)(t);e.$(".metric-block").html(i),this.$el.i18n(),e.$(".spinner").hide(),e.$(".metric-block").show()},renderActivities:function(e,t){var i=_.template(AdminDashboardActivities);e.$(".activity-block").html(i),_(t).forEach(function(t){if(t){if(t.comment){var i=t.comment.value.replace(/<(?:.|\n)*?>/gm,"");t.comment.value=i}t.createdAtFormatted=$.timeago(t.createdAt);var a=e.$("#"+t.type).text(),r=_.template(a,{escape:/\{\{(.+?)\}\}/g})(t);e.$(".activity-block .activity-feed").append(r)}}),this.$el.i18n(),e.$(".spinner").hide(),e.$(".activity-block").show()},fetchData:function(e,t){$.ajax({url:"/api/admin/metrics",dataType:"json",data:t,success:function(t){e.data=t,$.ajax({url:"/api/admin/interactions",dataType:"json",data:t,success:function(i){t.interactions=i,i.count=_(i).reduce(function(e,t){return e+t},0),e.renderMetrics(e,t)},error:function(t,i,a){e.handleError(e,t,i,a)}})},error:function(t,i,a){e.handleError(e,t,i,a)}}),$.ajax({url:"/api/admin/activities",dataType:"json",data:t,success:function(t){e.data=t,e.renderActivities(e,t)},error:function(t,i,a){e.handleError(e,t,i,a)}})},handleError:function(e,t,i,a){e.$(".alert").html(a.message||a),e.$(".alert").show(),e.$(".spinner").hide()}});module.exports=AdminDashboardView;


},{"../../../components/modal":106,"../../../config/login.json":114,"../../../mixins/utilities":128,"../templates/admin_dashboard_activities.html":4,"../templates/admin_dashboard_table.html":5,"../templates/admin_dashboard_template.html":6,"backbone":133,"underscore":159}],15:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),AdminUserView=require("./admin_user_view"),AdminTagView=require("./admin_tag_view"),AdminTaskView=require("./admin_task_view"),AdminDashboardView=require("./admin_dashboard_view"),AdminMainTemplate=require("../templates/admin_main_template.html"),AdminMainView=Backbone.View.extend({events:{"click .link-admin":"link"},initialize:function(i){this.options=i},render:function(){var i={},e=_.template(AdminMainTemplate)(i);return this.$el.html(e),this.routeTarget(this.options.action||""),this},routeTarget:function(i){i||(i="dashboard");var e=$(this.$("[data-target="+i+"]")[0]);$($(e.parents("ul")[0]).find("li")).removeClass("active"),$(e.parent("li")[0]).addClass("active"),"user"==i?(this.adminUserView||this.initializeAdminUserView(),this.hideOthers(),this.adminUserView.render()):"tag"==i?(this.adminTagView||this.initializeAdminTagView(),this.hideOthers(),this.adminTagView.render()):"tasks"==i?(this.adminTaskView||this.initializeAdminTaskView(),this.hideOthers(),this.adminTaskView.render()):"dashboard"==i&&(this.adminDashboardView||this.initializeAdminDashboardView(),this.hideOthers(),this.adminDashboardView.render())},link:function(i){i.preventDefault&&i.preventDefault();var e=$(i.currentTarget);this.routeTarget(e.data("target"))},hideOthers:function(){this.$(".admin-container").hide()},initializeAdminUserView:function(){this.adminUserView&&this.adminUserView.cleanup(),this.adminUserView=new AdminUserView({el:"#admin-user"})},initializeAdminTagView:function(){this.adminTagView&&this.adminTagView.cleanup(),this.adminTagView=new AdminTagView({el:"#admin-tag"})},initializeAdminTaskView:function(){this.adminTaskView&&this.adminTaskView.cleanup(),this.adminTaskView=new AdminTaskView({el:"#admin-task"})},initializeAdminDashboardView:function(){this.adminDashboardView&&this.adminDashboardView.cleanup(),this.adminDashboardView=new AdminDashboardView({el:"#admin-dashboard"})},cleanup:function(){this.adminUserView&&this.adminUserView.cleanup(),this.adminTagView&&this.adminTagView.cleanup(),this.adminTaskView&&this.adminTaskView.cleanup(),this.adminDashboardView&&this.adminDashboardView.cleanup(),removeView(this)}});module.exports=AdminMainView;


},{"../../../mixins/utilities":128,"../templates/admin_main_template.html":7,"./admin_dashboard_view":14,"./admin_tag_view":16,"./admin_task_view":17,"./admin_user_view":19,"backbone":133,"underscore":159}],16:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),AdminTagTemplate=require("../templates/admin_tag_template.html"),TagFactory=require("../../../components/tag_factory"),AdminTagView=Backbone.View.extend({events:{},initialize:function(e){this.options=e,this.tagFactory=new TagFactory},render:function(){var e=["agency","skill","topic"],t={types:e},a=_.template(AdminTagTemplate)(t);return this.$el.html(a),this.$el.show(),_(e).forEach(this.tagSelector,this),Backbone.history.navigate("/admin/tag"),this},tagSelector:function(e){var t=this;$("#"+e).select2({placeholder:"Search for a tag",minimumInputLength:2,formatResult:function(e){return e.name},formatSelection:function(e){return e.name},createSearchChoice:function(t,a){var n=a.map(function(e){return e.value.toLowerCase()});return n.indexOf(t.toLowerCase())>=0?!1:{unmatched:!0,tagType:e,id:t,value:t,name:"<b>"+t+"</b> <i>click to create a new tag with this value</i>"}},ajax:{url:"/api/ac/tag",dataType:"json",data:function(t){return{type:e,q:t}},results:function(e){return{results:e}}}}).on("change",function(a){var n=t.$(a.currentTarget);t.tagFactory.addTagEntities(a.added,t,function(){$("#"+e).select2("data",null),n.next(".form-status").text(a.added&&a.added.value===a.added.id?"Added tag: "+a.added.value:"")})})},cleanup:function(){removeView(this)}});module.exports=AdminTagView;


},{"../../../components/tag_factory":112,"../../../mixins/utilities":128,"../templates/admin_tag_template.html":9,"backbone":133,"underscore":159}],17:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),AdminTaskTemplate=require("../templates/admin_task_template.html"),AdminTaskView=Backbone.View.extend({events:{},initialize:function(e){this.options=e,this.data={page:1}},render:function(){var e=this;return $.ajax({url:"/api/admin/tasks",data:this.data,dataType:"json",success:function(a){var i=_.template(AdminTaskTemplate)(a);e.$el.html(i),e.$el.show()},error:function(a,i,t){e.handleError(e,a,i,t)}}),Backbone.history.navigate("/admin/tasks"),this},cleanup:function(){removeView(this)},handleError:function(e,a,i,t){e.$(".alert").html(t.message||t),e.$(".alert").show(),e.$(".spinner").hide()}});module.exports=AdminTaskView;


},{"../../../mixins/utilities":128,"../templates/admin_task_template.html":10,"backbone":133,"underscore":159}],18:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),AdminUserPassword=require("../templates/admin_user_password.html"),AdminUserPasswordView=Backbone.View.extend({events:{"blur #newPassword":"v","submit #reset-password":"post"},initialize:function(e){this.options=e},render:function(){var e={admin:this.options.admin,u:this.options.user},r=_.template(AdminUserPassword)(e);return this.$el.html(r),this},v:function(e){return validate(e)},post:function(e){var r=this;e.preventDefault&&e.preventDefault();var s=["#newPassword"],t=!1;for(i in s){var o=validate({currentTarget:s[i]});t=t||o}if(t!==!0){var n;n={id:this.options.user.id,password:this.$("#newPassword").val()},$.ajax({url:"/api/user/resetPassword",type:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json",success:function(e){return e===!0?void $("#reset-password-modal").modal("hide"):void r.processError({message:"An error occurred while trying to save the password: the server provided an unexpected response."})},error:function(e){r.processError(e.responseJSON)}})}},processError:function(e){this.$(".alert").html(e.message||e),this.$(".alert").show()},cleanup:function(){removeView(this)}});module.exports=AdminUserPasswordView;


},{"../../../mixins/utilities":128,"../templates/admin_user_password.html":11,"backbone":133,"bootstrap":138,"underscore":159}],19:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),ModalComponent=require("../../../components/modal"),AdminUserPasswordView=require("./admin_user_password_view"),AdminUserTemplate=require("../templates/admin_user_template.html"),AdminUserTable=require("../templates/admin_user_table.html"),Paginate=require("../templates/admin_paginate.html"),LoginConfig=require("../../../config/login.json"),AdminUserView=Backbone.View.extend({events:{"click a.page":"clickPage","click .link-backbone":linkBackbone,"click .admin-user-mkadmin":"adminCreate","click .admin-user-rmadmin":"adminRemove","click .admin-user-enable":"adminEnable","click .admin-user-disable":"adminDisable","click .admin-user-unlock":"adminUnlock","click .admin-user-resetpw":"resetPassword","keyup #user-filter":"filter"},initialize:function(e){this.options=e,this.data={page:1}},render:function(){var e=this;if(Backbone.history.navigate("/admin/user"),this.$el.show(),this.rendered===!0)return this;var i={user:window.cache.currentUser,login:LoginConfig},t=_.template(AdminUserTemplate)(i);return this.$el.html(t),this.rendered=!0,this.fetchData(e,this.data),this},renderUsers:function(e,i){i.urlbase="/admin/users",i.q=i.q||"",e.limit||(e.limit=i.limit),i.trueLimit=e.limit,i.login=LoginConfig,i.user=window.cache.currentUser;var t=_.template(AdminUserTable)(i),a=_.template(Paginate)(i);e.$("#user-page").html(a),e.$(".table-responsive").html(t),e.$(".btn").tooltip(),e.$(".spinner").hide(),e.$(".table-responsive").show(),e.$el.i18n()},clickPage:function(e){var i=this;e.metaKey!==!0&&e.ctrlKey!==!0&&2!=e.which&&(e.preventDefault&&e.preventDefault(),this.fetchData(i,{page:$(e.currentTarget).data("page"),q:$($(e.currentTarget).parent("ul")[0]).data("filter"),limit:this.limit}))},filter:function(e){var i=$(e.currentTarget).val().trim();i!=this.q&&(this.q=i,this.$(".table-responsive").hide(),this.$(".spinner").show(),this.fetchData(this,{q:i}))},fetchData:function(e,i){$.ajax({url:"/api/admin/users",dataType:"json",data:i,success:function(i){e.data=i,e.renderUsers(e,i)},error:function(i,t,a){e.handleError(e,i,t,a)}})},handleError:function(e,i,t,a){e.$(".alert").html(a.message||a),e.$(".alert").show(),e.$(".spinner").hide()},adminCreate:function(e){e.preventDefault&&e.preventDefault();var i=$(e.currentTarget),t=$(i.parents("tr")[0]).data("id");this.updateUser(i,{id:t,isAdmin:!0,url:"/api/admin/admin/"+t+"?action=true"})},adminRemove:function(e){e.preventDefault&&e.preventDefault();var i=$(e.currentTarget),t=$(i.parents("tr")[0]).data("id");this.updateUser(i,{id:t,isAdmin:!1,url:"/api/admin/admin/"+t+"?action=false"})},adminEnable:function(e){e.preventDefault&&e.preventDefault();var i=$(e.currentTarget),t=$(i.parents("tr")[0]).data("id");this.updateUser(i,{id:t,disabled:!1,url:"/api/user/enable/"+t})},adminDisable:function(e){e.preventDefault&&e.preventDefault();var i=$(e.currentTarget),t=$(i.parents("tr")[0]).data("id");this.updateUser(i,{id:t,disabled:!0,url:"/api/user/disable/"+t})},adminUnlock:function(e){e.preventDefault&&e.preventDefault();var i=$(e.currentTarget),t=$(i.parents("tr")[0]).data("id");this.updateUser(i,{id:t,passwordAttempts:0,url:"/api/admin/unlock/"+t})},updateUser:function(e,i){var t=this,a=$($(e.parent()[0]).children(".btn-spin")[0]);a.show(),e.hide(),i.url&&$.ajax({url:i.url,dataType:"json",success:function(){a.hide(),i.disabled===!0&&$(e.siblings(".admin-user-enable")[0]).show(),i.disabled===!1&&$(e.siblings(".admin-user-disable")[0]).show(),i.isAdmin===!0&&$(e.siblings(".admin-user-rmadmin")[0]).show(),i.isAdmin===!1&&$(e.siblings(".admin-user-mkadmin")[0]).show()},error:function(e,i,a){t.handleError(t,e,i,a)}})},resetPassword:function(e){e.preventDefault&&e.preventDefault(),this.passwordView&&this.passwordView.cleanup(),this.modalComponent&&this.modalComponent.cleanup();var i=$($(e.currentTarget).parents("tr")[0]),t={id:i.data("id"),name:$(i.find("td.admin-table-name")[0]).text().trim()};this.modalComponent=new ModalComponent({el:"#reset-password-container",id:"reset-password-modal",modalTitle:"Reset Password"}).render(),this.passwordView=new AdminUserPasswordView({el:".modal-template",user:t}).render(),this.$("#reset-password-modal").modal("show")},cleanup:function(){removeView(this)}});module.exports=AdminUserView;


},{"../../../components/modal":106,"../../../config/login.json":114,"../../../mixins/utilities":128,"../templates/admin_paginate.html":8,"../templates/admin_user_table.html":12,"../templates/admin_user_template.html":13,"./admin_user_password_view":18,"backbone":133,"underscore":159}],20:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),i18nOption=require("../config/i18n.json"),BrowseApp=require("./browse/browse_app"),initialize=function(){var i;$.i18n.init(i18nOption,function(){return i=BrowseApp.initialize(),Backbone.history.start({pushState:!0})})};module.exports={initialize:initialize};


},{"../config/i18n.json":113,"./browse/browse_app":24,"backbone":133,"underscore":159}],21:[function(require,module,exports){
module.exports='<tr>\n  <td>\n    <span class="file-tag c3-bg white">file</span>\n  </td>\n  <td class="attachment-name">\n    <a href="/api/file/get/<%= a.file.id %>" class="file-link" data-id="<%= a.file.id %>">\n      <%= a.file.name %>\n      <% if (user && ((a.userId == a.userId) || owner)) { %>\n      <a href="#" class="file-delete" data-id="<%= a.id %>"><i class="fa fa-remove"></i></a>\n      <% } %>\n      <br/>\n      <time class="timeago" datetime="<%- a.createdAt %>"><%- a.createdAt %></time>\n    </a>\n  </td>\n  <td class="file-person">\n    <div class="project-people-div" data-userid="<%- a.userId %>">\n      <img src="/api/user/photo/<%= a.userId %>" class="project-people" />\n    </div>\n  </td>\n</tr>\n';


},{}],22:[function(require,module,exports){
module.exports='<div class="box-pad-lr border-bottom">\n  <h2>\n    Attachments\n    <div class="btn btn-c0 btn-sm file-add attachment-filebtn fileinput-button" style="<% if (!user) { %>display:none;<% } %>">\n      Add File\n      <input id="attachment-fileupload" type="file" name="files[]" title="Attach Files">\n    </div>\n  </h2>\n</div>\n<div class="attachment-fileupload box-pad-lr box-pad-t">\n  <div style="display: none;" class="progress progress-striped active">\n    <div class="progress-bar" style="width: 0"></div>\n  </div>\n</div>\n<div class="box-pad-lr">\n  <div class="file-upload-alert alert alert-warning" style="display:none;">\n    <span></span>\n    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  </div>\n</div>\n<div class="box-pad-lr box-pad-t file-list">\n  <table class="table table-hover table-condensed">\n    <tbody class="attachment-tbody">\n      <tr class="attachment-none"><td>No Attachments</td></tr>\n    </tbody>\n  </table>\n</div>\n';


},{}],23:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),jqIframe=require("blueimp-file-upload/js/jquery.iframe-transport"),jqFU=require("blueimp-file-upload/js/jquery.fileupload.js"),TimeAgo=require("../../../../vendor/jquery.timeago"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),async=require("async"),Popovers=require("../../../mixins/popovers"),AITemplate=require("../templates/attachment_item_template.html"),ASTemplate=require("../templates/attachment_show_template.html"),popovers=new Popovers,AttachmentShowView=Backbone.View.extend({events:{"click .file-delete":"deleteAttachment","mouseenter .project-people-div":popovers.popoverPeopleOn,"click .project-people-div":popovers.popoverClick},initialize:function(e){this.options=e,this.data=e.data,this.action=e.action,this.edit=!1,this.options.action&&"edit"==this.options.action&&(this.edit=!0)},initializeFiles:function(){var e=this;$.ajax({url:"/api/attachment/findAllBy"+this.options.target+"Id/"+this.options.id}).done(function(t){t&&t.length>0&&$(".attachment-none").hide(),_.each(t,function(t){var i=e.renderAttachment(t);$(".attachment-tbody").append(i)}),$("time.timeago").timeago(),popovers.popoverPeopleInit(".project-people-div")})},initializeFileUpload:function(){var e=this;$("#attachment-fileupload").fileupload({url:"/api/file/create",dataType:"text",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,add:function(t,i){e.$(".attachment-fileupload > .progress").show(),i.submit()},progressall:function(t,i){var a=parseInt(i.loaded/i.total*100,10);e.$(".attachment-fileupload .progress-bar").css("width",a+"%")},done:function(t,i){if("iframe text"==i.dataType)var a=JSON.parse(i.result);else var a=JSON.parse($(i.result).text());var r={fileId:a[0].id};r[e.options.target+"Id"]=e.options.id,$.ajax({url:"/api/attachment",type:"POST",data:JSON.stringify(r),dataType:"json",contentType:"application/json"}).done(function(t){e.$(".attachment-fileupload > .progress").hide(),e.renderNewAttachment(a[0],t)})},fail:function(t,i){var a=i.errorThrown;e.$(".attachment-fileupload > .progress").hide(),413==i.jqXHR.status&&(a="The uploaded file exceeds the maximum file size."),e.$(".file-upload-alert > span").html(a),e.$(".file-upload-alert").show()}})},render:function(){data={user:window.cache.currentUser};var e=_.template(ASTemplate)(data);return this.$el.html(e),this.initializeFileUpload(),this.initializeFiles(),this},renderAttachment:function(e){var t={a:e,user:window.cache.currentUser,owner:this.options.owner},i=_.template(AITemplate)(t);return i},renderNewAttachment:function(e,t){t.file=e;var i=this.renderAttachment(t);$(".attachment-none").hide(),$(".attachment-tbody").prepend(i),$("time.timeago").timeago(),popovers.popoverPeopleInit(".project-people-div")},deleteAttachment:function(e){e.preventDefault&&e.preventDefault(),$.ajax({url:"/api/attachment/"+$(e.currentTarget).data("id"),type:"DELETE",success:function(){var t=$($(e.currentTarget).parents("tbody")[0]).children().length;$(e.currentTarget).parents("tr")[0].remove(),2==t&&$(".attachment-none").show()}})},cleanup:function(){removeView(this)}});module.exports=AttachmentShowView;


},{"../../../../vendor/jquery.timeago":130,"../../../mixins/popovers":126,"../../../mixins/utilities":128,"../templates/attachment_item_template.html":21,"../templates/attachment_show_template.html":22,"async":131,"backbone":133,"blueimp-file-upload/js/jquery.fileupload.js":134,"blueimp-file-upload/js/jquery.iframe-transport":135,"bootstrap":138,"underscore":159}],24:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../mixins/utilities"),NavView=require("../nav/views/nav_view"),FooterView=require("../footer/views/footer_view"),BrowseListController=require("./controllers/browse_list_controller"),ProjectModel=require("../../entities/projects/project_model"),ProjectShowController=require("../project/show/controllers/project_show_controller"),ProfileShowController=require("../profiles/show/controllers/profile_show_controller"),TaskModel=require("../../entities/tasks/task_model"),TaskShowController=require("../tasks/show/controllers/task_show_controller"),TaskEditFormView=require("../tasks/edit/views/task_edit_form_view"),AdminMainController=require("../admin/controllers/admin_main_controller"),HomeController=require("../home/controllers/home_controller"),BrowseRouter=Backbone.Router.extend({routes:{"":"showHome","projects(/)":"listProjects","projects/:id(/)":"showProject","projects/:id/:action(/)":"showProject","tasks(/)":"listTasks","tasks/:id(/)":"showTask","tasks/:id/:action(/)":"showTask","profile(/)":"showProfile","profile/:id(/)":"showProfile","profile/:id(/)/:action":"showProfile","admin(/)":"showAdmin","admin(/):action(/)":"showAdmin"},data:{saved:!1},initialize:function(){this.navView=new NavView({el:".navigation"}).render(),this.footerView=new FooterView({el:"#footer"}).render()},cleanupChildren:function(){this.browseListController&&this.browseListController.cleanup(),this.projectShowController&&this.projectShowController.cleanup(),this.profileShowController&&this.profileShowController.cleanup(),this.taskShowController&&this.taskShowController.cleanup(),this.homeController&&this.homeController.cleanup(),this.data={saved:!1}},showHome:function(){this.cleanupChildren(),this.homeController=new HomeController({target:"home",el:"#container",router:this,data:this.data})},listProjects:function(){this.cleanupChildren(),this.browseListController=new BrowseListController({target:"projects",el:"#container",data:this.data})},listTasks:function(){this.cleanupChildren(),this.browseListController=new BrowseListController({target:"tasks",el:"#container",data:this.data})},showProject:function(e,o){this.cleanupChildren();var r=new ProjectModel;r.set({id:e}),this.projectShowController=new ProjectShowController({model:r,router:this,id:e,action:o,data:this.data})},showTask:function(e,o){this.cleanupChildren();var r=new TaskModel;r.set({id:e}),this.taskShowController=new TaskShowController({model:r,router:this,id:e,action:o,data:this.data})},showProfile:function(e,o){this.cleanupChildren(),e&&(e=e.toLowerCase()),o&&(o=o.toLowerCase()),!o&&e&&("edit"==e?(o=e,e=window.cache.currentUser.id):"settings"==e&&(o=e,e=window.cache.currentUser.id)),this.profileShowController=new ProfileShowController({id:e,action:o,data:this.data})},showAdmin:function(e){this.cleanupChildren(),this.adminMainController=new AdminMainController({el:"#container",action:e})}}),initialize=function(){var e=new BrowseRouter;return e};module.exports={initialize:initialize};


},{"../../entities/projects/project_model":122,"../../entities/tasks/task_model":124,"../../mixins/utilities":128,"../admin/controllers/admin_main_controller":3,"../footer/views/footer_view":47,"../home/controllers/home_controller":48,"../nav/views/nav_view":57,"../profiles/show/controllers/profile_show_controller":60,"../project/show/controllers/project_show_controller":72,"../tasks/edit/views/task_edit_form_view":87,"../tasks/show/controllers/task_show_controller":93,"./controllers/browse_list_controller":25,"backbone":133,"underscore":159}],25:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),BaseController=require("../../../base/base_controller"),BrowseMainView=require("../views/browse_main_view"),ProjectsCollection=require("../../../entities/projects/projects_collection"),TasksCollection=require("../../../entities/tasks/tasks_collection"),TaskModel=require("../../../entities/tasks/task_model"),ProjectFormView=require("../../project/new/views/project_new_form_view"),TaskFormView=require("../../tasks/new/views/task_form_view"),ModalWizardComponent=require("../../../components/modal_wizard"),ModalComponent=require("../../../components/modal");Browse={},Browse.ListController=BaseController.extend({events:{"click .link-backbone":linkBackbone,"click .project-background-image":"showProject","click .task-box":"showTask","click .add-project":"addProject","click .add-opportunity":"addTask"},initialize:function(e){this.target=e.target,this.fireUpCollection(),this.initializeView(),this.collection.trigger("browse:"+this.target+":fetch"),this.listenTo(this.projectsCollection,"project:save:success",function(e){$("#addProject").bind("hidden.bs.modal",function(){Backbone.history.navigate("projects/"+e.attributes.id,{trigger:!0})}).modal("hide")}),this.listenTo(this.tasksCollection,"task:save:success",function(e){$("#addTask").bind("hidden.bs.modal",function(){Backbone.history.navigate("tasks/"+e,{trigger:!0})}).modal("hide")})},initializeView:function(){this.browseMainView&&this.browseMainView.cleanup(),this.browseMainView=new BrowseMainView({el:"#container",target:this.target,collection:this.collection}).render()},fireUpCollection:function(){var e=this;this.projectsCollection=new ProjectsCollection,this.tasksCollection=new TasksCollection,this.collection="projects"==this.target?this.projectsCollection:"tasks"==this.target?this.tasksCollection:new ProfilesCollection,this.listenToOnce(this.collection,"browse:"+this.target+":fetch",function(){e.collection.fetch({success:function(t){e.collection=t,e.browseMainView.renderList(e.collection.toJSON())}})})},showProject:function(e){e.preventDefault&&e.preventDefault();var t=$($(e.currentTarget).parents("li.project-box")[0]).data("id");Backbone.history.navigate("projects/"+t,{trigger:!0})},showTask:function(e){e.preventDefault&&e.preventDefault();var t=$(e.currentTarget).data("id")||$($(e.currentTarget).parents("li.task-box")[0]).data("id");Backbone.history.navigate("tasks/"+t,{trigger:!0})},addProject:function(e){e.preventDefault&&e.preventDefault(),this.projectFormView&&this.projectFormView.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),this.modalComponent=new ModalComponent({el:".wrapper-addProject",id:"addProject",modalTitle:"Add "+i18n.t("Project")}).render(),this.projectFormView=new ProjectFormView({el:".modal-template",collection:this.projectsCollection}).render()},addTask:function(e){e.preventDefault&&e.preventDefault(),this.taskFormView&&this.taskFormView.cleanup(),this.modalWizardComponent&&this.modalWizardComponent.cleanup(),this.taskModel=new TaskModel,this.modalWizardComponent=new ModalWizardComponent({el:".wrapper-addTask",id:"addTask",draft:!0,modalTitle:"New "+i18n.t("Opportunity"),model:this.taskModel,collection:this.tasksCollection,modelName:"task",data:function(e){return{title:e.$("#task-title").val(),description:e.$("#task-description").val(),projectId:null}}}).render(),this.taskFormView=new TaskFormView({el:"#addTask .modal-body",projectId:null,model:this.taskModel,tasks:this.tasksCollection}).render(),this.modalWizardComponent.setChildView(this.taskFormView),this.modalWizardComponent.setNext(this.taskFormView.childNext),this.modalWizardComponent.setSubmit(this.taskFormView.childNext)},cleanup:function(){this.taskFormView&&this.taskFormView.cleanup(),this.modalWizardComponent&&this.modalWizardComponent.cleanup(),this.projectFormView&&this.projectFormView.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),this.browseMainView&&this.browseMainView.cleanup(),removeView(this)}}),module.exports=Browse.ListController;


},{"../../../base/base_controller":101,"../../../components/modal":106,"../../../components/modal_wizard":110,"../../../entities/projects/projects_collection":123,"../../../entities/tasks/task_model":124,"../../../entities/tasks/tasks_collection":125,"../../../mixins/utilities":128,"../../project/new/views/project_new_form_view":71,"../../tasks/new/views/task_form_view":92,"../views/browse_main_view":32,"backbone":133,"bootstrap":138,"underscore":159}],26:[function(require,module,exports){
module.exports='<div class="wrapper-addProject"></div>\n<div class="wrapper-addTask"></div>\n\n<div class="row search-row">\n  <div class="col-md-3 col-md-push-9 browse-buttons">\n    <% if (ui.project.show) { %>\n    <a href="#addProject" class="btn btn-c2 add-project" data-toggle="modal" data-backdrop="static" style="<% if (!user) { %>display: none;<% } %>"><i class="fa fa-plus"></i> <span data-i18n="Project">Project</span></a>\n    <% } %>\n    <a href="#addTask" class="btn btn-c2 add-opportunity" data-toggle="modal" data-backdrop="static" style="<% if (!user) { %>display: none;<% } %>"><i class="fa fa-plus"></i> <span data-i18n="Task">Opportunity</span></a>\n  </div>\n  <div class="col-md-9 col-md-pull-3">\n    <form class="form-horizontal" role="form" id="search-form">\n\n      <div class="form-group row">\n        <div class="col-sm-10 col-md-10 col-lg-9 input-search">\n          <input type="hidden" id="search" title="Search" style="width: 100%"/>\n        </div>\n        <div class="col-sm-2 col-md-2 col-lg-3 btn-search">\n          <input type="submit" class="btn btn-c1" title="Search" value="Search"/>\n        </div>\n      </div>\n\n    </form>\n  </div>\n</div>\n<div class="row">\n\n  <div class="col-md-3 col-md-push-9 box">\n    <div class="border-bottom box-pad-lr">\n      <h2>Filters</h2>\n    </div>\n    <div class="box-pad-t">\n      <% if ( target == "tasks" ) {%>\n      <div class="box-pad-lr" id="stateFilters">\n        <% _.each(ui.states, function (t) { %>\n          <label class="<% if ( t.value == "draft" ) { %>hidden draft-filter<% } %>">\n            <input type=\'checkbox\' name=\'state<%- t.label %>\' class=\'stateFilter\' value=\'<%- t.value %>\'\n            <% if ( t.value == "open" ) {%>\n              <%- checked="checked" %>\n            <% } %>\n            > <%- t.label %>\n          </label>\n        <% }); %>\n      </div>\n      <% } %>\n      <div id="search-projs-wrapper" class="box-pad-lr">\n        <ul id="search-projs" class="nav nav-pills nav-stacked nav-search">\n        </ul>\n      </div>\n      <div class="box-pad-lr">\n        <ul id="search-tags" class="nav nav-pills nav-stacked nav-search">\n        </ul>\n      </div>\n      <div class="box-pad-lr search-clear" style="display: none;">\n        <div class="align-right">\n          <a href="#" id="search-clear" class="btn btn-sm btn-c0"><i class="fa fa-remove"></i> Clear Search Criteria</a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-md-9 col-md-pull-3">\n    <div id="browse-search-spinner" class="fullwidth text-center">\n      Loading... <i class="fa fa-spinner fa-spin"></i>\n    </div>\n    <ul id="browse-list">\n    </ul>\n  </div>\n\n</div>\n';


},{}],27:[function(require,module,exports){
module.exports='<li data-id="<%= data.id %>">\n  <%= format %>\n  <div class="pull-right">\n    <a href="#" class="search-tag-remove"><i class="fa fa-remove"></i></a>\n  </div>\n</li>\n';


},{}],28:[function(require,module,exports){
module.exports="<span data-i18n='[html]noSearchResults.text'>\n<h2>Oops we didn't find any results</h2>\n<p>Maybe your search was too specific. You could try including more filters like <b>Completed</b> or <b>Archived</b>. Maybe there are too many search terms, try removing some or using more general terms.</p>\n<p>Still not finding what you wanted?</p>\n<p>Did you mean to:</p>\n</span>\n	<ul>\n		<% if (ui.project.show) { %>\n		<li>Look for <span data-i18n=\"ProjectIndefinite\">a Project</span>? Try going to Browse <span data-i18n=\"ProjectPlural\">Projects</span> or clicking <a href='/projects'>here</a> .</li>\n		<% } %>\n		<li>Look for <span data-i18n=\"TaskIndefinite\">a Task</span>? Try going to Browse <span data-i18n=\"TaskPlural\">Tasks</span> or clicking <a href='/tasks'>here</a> . </li>\n		<% if (ui.faq.show) { %>\n		<li>Get an answer to a general question? Try reading the FAQ by clicking <a href='<%- ui.faq.url %>'>here</a> .</li>\n		<% } %>\n		<li>Get an answer to a specific question you can't find elsewhere? Trying <a href='mailto:<%- ui.systemEmail %>'>sending an email to the team .</a></li>\n	</ul>";


},{}],29:[function(require,module,exports){
module.exports='<li data-id="<%- item.id %>" class="box project-box">\n  <% if (item.coverId) { %>\n  <div class="project-background-image border-bottom" style="background-image: url(/api/file/get/<%= item.coverId %>)">\n  <% } else { %>\n  <div class="project-background-image border-bottom project-background-image-default">\n  <% } %>\n  </div>\n  <div class="project-title">\n    <a href="/projects/<%- item.id %>" class="link-backbone c1">\n      <%- item.title %>\n    </a>\n  </div>\n  <div class="project-list-description">\n    <%= item.descriptionHtml %>\n  </div>\n\n  <div class="project-list-bottom-wrapper border-top">\n    <div class="project-list-counts">\n      <div class="project-list-counts-col">\n        <div class="project-list-count c2">\n          <%- item.taskCount %>\n        </div>\n        <div class="project-list-count-text c2">\n          opp<% if (item.taskCount != 1) { %>s<% } %>\n        </div>\n      </div>\n      <div class="project-list-counts-col">\n        <div class="project-list-count c2">\n          <%- item.commentCount %>\n        </div>\n        <div class="project-list-count-text c2">\n          comment<% if (item.commentCount != 1) { %>s<% } %>\n        </div>\n      </div>\n      <div class="project-list-counts-col">\n        <div class="project-list-count c2">\n          <%- item.ownerCount %>\n        </div>\n        <div class="project-list-count-text c2  ">\n          <% if (item.ownerCount != 1) { %>people<% } else { %>person<% } %>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>';


},{}],30:[function(require,module,exports){
module.exports='<li data-id="<%- item.id %>" class="box task-box">\n\n    <div class="task-list-title task-title-overflow-multi">\n      <a href="/tasks/<%- item.id %>" class="link-backbone c1">\n        <%- item.title %>\n      </a>\n    </div>\n\n  <div class="task-list-description task-desc-overflow-multi">\n    <%= item.descriptionHtml %>\n  </div>\n\n  <div class="task-list-bottom border-top">\n\n    <% _.each(tagShow, function (tagType) { %>\n\n      <% if (tags[tagType]) { %>\n      <div class="task-list-tags c0 task-single-overflow">\n        <i class="task-list-icon-center <%= tagConfig.tags[tagType].icon %>"></i>\n        <% _.each(tags[tagType], function (t, i) { %>\n          <%= t.name %><% if (i + 1 < tags[tagType].length) { %>,<% } %>\n        <% }); %>\n      </div>\n      <% } %>\n\n    <% }); %>\n\n  </div>\n  <div class="task-list-bottom-person border-top">\n    <div class="task-list-person">\n      <div class="project-people-div float-left" data-userid="<%= item.userId %>" style="text-align: right;">\n        <img src="/api/user/photo/<%= item.userId %>" class="project-people"/>\n      </div>\n      <div class="task-list-requestbox">\n        <div class="task-list-requested">requested by</div>\n        <div class="task-list-name"><%- item.user.name %></div>\n        <% if (item.user.agency) { %>\n        <div class="task-list-agency task-single-overflow"><%= item.user.agency.tag.name %></div>\n        <% } %>\n      </div>\n    </div>\n\n  </div>\n\n</li>';


},{}],31:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),async=require("async"),utils=require("../../../mixins/utilities"),UIConfig=require("../../../config/ui.json"),marked=require("marked"),TagConfig=require("../../../config/tag"),ProjectListItem=require("../templates/project_list_item.html"),TaskListItem=require("../templates/task_list_item.html"),NoListItem=require("../templates/no_search_results.html"),BrowseListView=Backbone.View.extend({initialize:function(t){var e=this,i=27;UIConfig.browse&&UIConfig.browse.pageSize&&(i=UIConfig.browse.pageSize),this.options=t,this.data={pageSize:i,page:1},$(window).on("scroll",function(t){e.scrollCheck(t)})},organizeTags:function(e){var i={};for(t in e)_.has(i,e[t].tag.type)||(i[e[t].tag.type]=[]),i[e[t].tag.type].push(e[t].tag);return i},scrollCheck:function(){var t=$(window).scrollTop(),e=$("#container").height(),i=600;this.options.collection.length/this.data.page>1&&Math.ceil(this.options.collection.length/this.data.pageSize)>=this.data.page&&t+i>e&&(this.data.page+=1,this.render())},render:function(){if(UIConfig.browse&&UIConfig.browse.useInfiniteScroll){if(1==this.data.page)var t=0;else var t=(this.data.page-1)*this.data.pageSize;var e=t+this.data.pageSize}else{if(this.data.page>1)return this.data.page=1,this;var e=this.options.collection.length,t=0}if(0==this.options.collection.length){var o={ui:UIConfig};a=_.template(NoListItem)(o),this.$el.append(a)}else for(i=t;i<e&&"undefined"!=typeof this.options.collection[i];i++){var s={item:this.options.collection[i],user:window.cache.currentUser,tagConfig:TagConfig,tagShow:["location","skill","topic","task-time-estimate","task-time-required"]};s.tags=this.options.collection[i].tags?this.organizeTags(this.options.collection[i].tags):[],this.options.collection[i].description&&(s.item.descriptionHtml=marked(this.options.collection[i].description));var a="";a="projects"==this.options.target?_.template(ProjectListItem)(s):_.template(TaskListItem)(s),this.$el.append(a)}return this.$el.i18n(),this},cleanup:function(){removeView(this)}});module.exports=BrowseListView;


},{"../../../config/tag":115,"../../../config/ui.json":116,"../../../mixins/utilities":128,"../templates/no_search_results.html":28,"../templates/project_list_item.html":29,"../templates/task_list_item.html":30,"async":131,"backbone":133,"marked":155,"underscore":159}],32:[function(require,module,exports){
var select2=require("select2"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),UIConfig=require("../../../config/ui.json"),Popovers=require("../../../mixins/popovers"),TagConfig=require("../../../config/tag"),BrowseListView=require("./browse_list_view"),BrowseMainTemplate=require("../templates/browse_main_view_template.html"),BrowseSearchTag=require("../templates/browse_search_tag.html"),popovers=new Popovers,BrowseMainView=Backbone.View.extend({events:{"submit #search-form":"search","click .search-tag-remove":"searchTagRemove","click .search-clear":"searchClear","change .stateFilter":"searchTagRemove","mouseenter .project-people-div":popovers.popoverPeopleOn,"click      .project-people-div":popovers.popoverClick,"keyup .select2-container":"submitOnEnter"},initialize:function(e){this.options=e},render:function(){var e={target:this.options.target,user:window.cache.currentUser,ui:UIConfig};return this.compiledTemplate=_.template(BrowseMainTemplate)(e),this.$el.html(this.compiledTemplate),this.$el.i18n(),this.initializeSearch(),this},format:function(e,t){var r=t.name||t.title,a=this.tagIcon[t.type];return"project"==t.target?a="fa fa-folder-o":"task"==t.target&&(a="fa fa-tag"),'<i class="'+a+'"></i> <span class="box-icon-text">'+r+"</span>"},initializeSearch:function(){var e=this;this.searchTerms=[],this.tags=[];for(var t=0;t<TagConfig[this.options.target].length;t++)this.tags.push(TagConfig.tags[TagConfig[this.options.target][t]]);this.tagIcon={},this.tagClass={};for(var t=0;t<this.tags.length;t++)this.tagIcon[this.tags[t].type]=this.tags[t].icon,this.tagClass[this.tags[t].type]=this.tags[t]["class"];var r=function(t,r,a){return e.format(e,t,r,a)};$("#search").select2({placeholder:"I'm looking for...",multiple:!0,formatResult:r,formatSelection:function(e){return e.target=null,e.type=e.name||e.title,e.id=e.name||e.title,e.value=e.name||e.title,e.unmatched=!0,e.name||e.title},createSearchChoice:function(e){return{unmatched:!0,id:e,value:e,name:"<b>"+e+"</b> <i>click to text search for this value.</i>"}},ajax:{url:"/api/ac/search/"+e.options.target,dataType:"json",data:function(t){return{type:TagConfig[e.options.target].join(),q:t}},results:function(e){return{results:e}}}}).on("select2-selecting",function(e){e.choice.hasOwnProperty("unmatched")&&e.choice.unmatched&&(e.choice.name=e.val)})},submitOnEnter:function(e){13===e.keyCode&&this.search(e)},search:function(e){var t=this;e.preventDefault&&e.preventDefault();var r=$("#search").select2("data");r.length>0&&($("#search-none").hide(),$(".search-clear").show()),_.each(r,function(e){var r=!1;for(var a in t.searchTerms)t.searchTerms[a].id==e.id&&(t.searchTerms[a].title&&t.searchTerms[a].title==e.title?r=!0:t.searchTerms[a].name&&t.searchTerms[a].name==e.name&&(r=!0));if(!r){t.searchTerms.push(e);var s={data:e,format:t.format(t,e)},i=_.template(BrowseSearchTag)(s);"tagentity"==e.target?$("#search-tags").append(i):$("#search-projs").append(i)}}),$("#search").select2("data",""),t.searchExec(t.searchTerms)},renderList:function(e){this.browseListView&&this.browseListView.cleanup();var t=this.applyStateFilters(e);this.browseListView=new BrowseListView({el:"#browse-list",target:this.options.target,collection:t});var r=_(e).chain().pluck("state").indexOf("draft").value()>=0;$(".draft-filter").toggleClass("hidden",!r),$("#browse-search-spinner").hide(),$("#browse-list").show(),this.browseListView.render(),popovers.popoverPeopleInit(".project-people-div")},searchExec:function(e){var t=this;if(!e||0==e.length)return void t.renderList(this.options.collection.toJSON());var r={items:[],tags:[],freeText:[],target:t.options.target};_.each(e,function(e){e.unmatched?r.freeText.push(e.value):r.items.push(e.id)}),$.ajax({url:"/api/search",type:"POST",data:JSON.stringify(r),dataType:"json",contentType:"application/json"}).done(function(e){t.renderList(e)})},applyStateFilters:function(e){if(!_.isObject(e)||!$("#stateFilters").length)return e;var t=[],r=$(".stateFilter:checked");return _.each(e,function(e){_.each(r,function(r){e.state==r.value&&t.push(e)})}),t},searchTagRemove:function(e){e.preventDefault&&e.preventDefault();var t=this;if($(e.currentTarget).hasClass("stateFilter")){if($("#search-tags").length>0)var r=$("#search-tags"),a="search-tags",s=!1}else{var r=$(e.currentTarget).parents("li")[0],a=$(r).data("id"),n=$($(e.currentTarget).parents("ul")[0]).attr("id"),s=!1;"search-projs"==n&&(s=!0)}for(i in t.searchTerms)if(t.searchTerms[i].id==a){if(s&&t.searchTerms[i].title){t.searchTerms.splice(i,1);break}if(t.searchTerms[i].name){t.searchTerms.splice(i,1);break}}$(e.currentTarget).hasClass("stateFilter")||r.remove(),0==t.searchTerms.length&&($("#search-none").show(),$(".search-clear").hide()),t.searchExec(t.searchTerms)},searchClear:function(e){e.preventDefault&&e.preventDefault(),this.searchTerms=[],$("#search-projs").children().remove(),$("#search-tags").children().remove(),$("#search-none").show(),$(".search-clear").hide(),this.searchExec(self.searchTerms)},cleanup:function(){this.browseListView&&this.browseListView.cleanup(),removeView(this)}});module.exports=BrowseMainView;


},{"../../../config/tag":115,"../../../config/ui.json":116,"../../../mixins/popovers":126,"../../../mixins/utilities":128,"../templates/browse_main_view_template.html":26,"../templates/browse_search_tag.html":27,"./browse_list_view":31,"backbone":133,"select2":157,"underscore":159}],33:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),TimeAgo=require("../../../../../vendor/jquery.timeago"),Popovers=require("../../../../mixins/popovers"),CommentCollection=require("../../../../entities/comments/comment_collection"),CommentFormView=require("../../new/views/comment_form_view"),CommentItemView=require("../views/comment_item_view"),CommentWrapper=require("../templates/comment_wrapper_template.html"),popovers=new Popovers;Comment=Backbone.View.extend({el:".comment-list-wrapper",events:{"click .new-topic":"newTopic","click .comment-expand":"topicExpand","click .comment-contract":"topicContract","mouseenter .comment-user-link":popovers.popoverPeopleOn,"click .comment-user-link":popovers.popoverClick,"click .link-backbone":linkBackbone,"click a[href='#reply-to-comment']":"reply"},initialize:function(e){var t=this;this.options=e,this.initializeRender(),this.initializeCommentCollection(),this.initializeListeners(),this.listenTo(this.commentCollection,"comment:save:success",function(e,i,n){i.topic&&this.topicForm&&this.topicForm.cleanup(),t.addNewCommentToDom(i,n)})},initializeRender:function(){var e=_.template(CommentWrapper)({user:window.cache.currentUser});this.$el.html(e)},initializeCommentCollection:function(){var e=this;this.commentCollection?this.renderView():this.commentCollection=new CommentCollection,this.commentCollection.fetch({url:"/api/comment/findAllBy"+this.options.target+"Id/"+this.options.id,success:function(t){e.collection=t,e.renderView(t)}})},initializeListeners:function(){var e=this;this.listenTo(this.commentCollection,"comment:topic:new",function(t){var i={value:t,topic:!0};i[e.options.target+"Id"]=e.options.id,$.ajax({url:"/api/comment",type:"POST",contentType:"application/json",processData:!1,data:JSON.stringify(i)}).done(function(){e.commentCollection.fetch({url:"/api/comment/findAllBy"+e.options.target+"Id/"+e.options.id,success:function(){}})})})},renderView:function(e){var t=this;this.parentMap={},this.topics=[];var i={comments:e.toJSON()[0].comments},n={};i.comments||(i.comments=[]);for(var o=0;o<i.comments.length;o+=1)i.comments[o].topic===!0?(n[i.comments[o].id]=0,i.comments[o].depth=n[i.comments[o].id],this.topics.push(i)):(n[i.comments[o].id]=n[i.comments[o].parentId]+1,i.comments[o].depth=n[i.comments[o].id],_.isUndefined(this.parentMap[i.comments[o].parentId])&&(this.parentMap[i.comments[o].parentId]=[]),this.parentMap[i.comments[o].parentId].push(i.comments[o].id));this.$(".comment-spinner").hide(),this.commentViews=[],this.commentForms=[],0==i.comments.length&&this.$("#comment-empty").show(),_.each(i.comments,function(i){t.renderComment(t,i,e,t.parentMap)}),this.initializeCommentUIAdditions()},renderComment:function(e,t,i,n){var e=this,o=function(e,t){if(_.isUndefined(e[t]))return 0;var i=e[t].length;return _.each(e[t],function(t){i+=o(e,t)}),i};t.topic===!0&&(t.numChildren=o(n,t.id));var m=new CommentItemView({el:"#comment-list-"+(t.topic?"null":t.parentId),model:t,target:this.options.target,projectId:t.projectId,taskId:t.taskId,collection:i}).render();if(e.commentViews.push(m),t.depth<=1){var r=new CommentFormView({el:"#comment-form-"+t.id,target:this.options.target,projectId:t.projectId,taskId:t.taskId,parentId:t.id,collection:i,depth:t.depth});e.commentForms.push(r)}return $("#comment-list-"+(t.topic?"null":t.parentId))},initializeCommentUIAdditions:function(e){_.isUndefined(e)?this.$("time.timeago").timeago():e.find("time.timeago").timeago(),popovers.popoverPeopleInit(".comment-user-link"),popovers.popoverPeopleInit(".project-people-div")},topicExpand:function(e){e.preventDefault&&e.preventDefault();var t=$($(e.currentTarget).parents("li")[0]);$(e.currentTarget).hide(),$(t.find(".comment-contract")[0]).show(),$(t.children(".comment-sublist-wrapper")[0]).slideToggle()},topicContract:function(e){e.preventDefault&&e.preventDefault();var t=$($(e.currentTarget).parents("li")[0]);$(e.currentTarget).hide(),$(t.find(".comment-expand")[0]).show(),$(t.children(".comment-sublist-wrapper")[0]).slideToggle()},reply:function(e){e.preventDefault&&e.preventDefault();var t=$($($(e.currentTarget).parents("li.comment-item")[0]).children(".comment-form")[0]);"true"==t.data("clicked")?(t.hide(),t.data("clicked","false")):(t.show(),t.data("clicked","true"))},newTopic:function(e){e.preventDefault&&e.preventDefault(),this.topicForm&&this.topicForm.cleanup();var t={el:".topic-form-wrapper",target:this.options.target,collection:this.collection,topic:!0,depth:-1};t[this.options.target+"Id"]=this.options.id,this.topicForm=new CommentFormView(t)},addNewCommentToDom:function(e,t){var i=this;if(e.user=window.cache.currentUser,$(t).data("depth")>=0){var n=$(t).parents(".comment-item.border-left")[0],o=$(n).find(".comment-count-num")[0];$(o).html(parseInt($(o).text())+1)}e.depth=$(t).data("depth")+1,_.isNull(e.parentId)?this.topics.push(e):(_.isUndefined(this.parentMap[e.parentId])&&(this.parentMap[e.parentId]=[]),this.parentMap[e.parentId].push(e.id)),$("#comment-empty").hide();var m=i.renderComment(i,e,i.collection,i.parentMap);i.initializeCommentUIAdditions(m),$(t).find("div[contentEditable=true]").text("")},cleanup:function(){for(var e in this.commentForms.reverse())this.commentForms[e]&&this.commentForms[e].cleanup();for(var e in this.commentViews.reverse())this.commentViews[e]&&this.commentViews[e].cleanup();this.topicForm&&this.topicForm.cleanup(),removeView(this)}}),module.exports=Comment;


},{"../../../../../vendor/jquery.timeago":130,"../../../../entities/comments/comment_collection":117,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../../new/views/comment_form_view":40,"../templates/comment_wrapper_template.html":35,"../views/comment_item_view":36,"backbone":133,"underscore":159}],34:[function(require,module,exports){
module.exports='<li class="comment-item clearfix <% if (topic) { %>border-left box-pad-lr<% } else { %>border-top<% } %>">\n\n  <div class="comment-content">\n    <% if (topic) { %>\n    <div class="comment-expand">\n      <span class="content">expand</span> <i class="fa fa-angle-double-down"></i>\n    </div>\n    <div class="comment-contract">\n      <span class="content">contract</span> <i class="fa fa-angle-double-up"></i>\n    </div>\n    <% } %>\n    <div class="comment-image">\n      <div class="project-people-div" data-userid="<%- userId %>">\n        <img src="/api/user/photo/<%= userId %>" alt="<%- user.name %>" class="project-people" />\n      </div>\n    </div>\n\n    <div class="comment-inner <% if (topic) { %>topic<% }%>">\n      <span class="user-username" data-userid="<%- userId %>">\n        <a href="#" class="comment-user-link" data-userid="<%- userId %>">\n          <% if (user.name) { %>\n            <%- user.name %>\n          <% } else { %>\n            <%- user.username %>\n          <% } %>\n        </a>\n      </span>\n\n      <%= valueHtml %>\n\n      <div class="comment-metadata">\n        <time class="timeago comment-created-at" datetime="<%- createdAt %>"><%- createdAt %></time>\n        <% if (topic) { %>\n        &bull;&nbsp;\n        <span class="comment-count"><i class="fa fa-comments"></i> <span class="comment-count-num"><%- numChildren %></span> comments</span>\n        <% } %>\n        <% if (depth == 1)  { %>\n        <% if (currentUser) { %>\n        &bull;\n        <a href="#reply-to-comment" class="reply-to-<%= id %>" data-depth="<%= depth %>">Reply</a>\n        <% } %>\n        <% } %>\n      </div>\n    </div>\n  </div>\n\n  <div class="comment-sublist-wrapper">\n\n    <ul id="comment-list-<%= id %>"></ul>\n  </div>\n\n  <div class="comment-form" <% if ((depth >= 1) || (!currentUser)) { %>style="display: none;"<% } %> id="comment-form-<%= id %>"></div>\n\n</li>\n';


},{}],35:[function(require,module,exports){
module.exports='<div class="box-pad-lr border-bottom">\n  <h2>Discussion\n  <% if (user) { %>\n  <button class="btn btn-c0 btn-sm file-add new-topic" id="project-topic-new">New Topic</button>\n  <% } %>\n  </h2>\n</div>\n<div class="box-pad-lr box-pad-t topic-form-wrapper"></div>\n<div class="comment-spinner fullwidth text-center">\n  Loading discussion... <i class="fa fa-spinner fa-spin"></i>\n</div>\n<ul id="comment-list-null">\n  <li class="comment-item clearfix border-left box-pad-lr" id="comment-empty" style="display:none;">\n    No discussion yet.  Start a topic!\n  </li>\n</ul>\n';


},{}],36:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utilities=require("../../../../mixins/utilities"),Autolinker=require("autolinker"),CommentItemTemplate=require("../templates/comment_item_template.html"),CommentItemView=Backbone.View.extend({render:function(){if(this.model.currentUser=window.cache.currentUser,this.model.valueHtml=Autolinker.link(this.model.value),this.model.topic){var e=_.template(CommentItemTemplate)(this.model);this.$el.append(e)}else{if(this.model.parentId===parseInt($("#comment-list-"+this.model.parentId).attr("id").split("-")[$("#comment-list-"+this.model.parentId).attr("id").split("-").length-1])){var t=_.template(CommentItemTemplate)(this.model);$("#comment-list-"+this.model.parentId).append(t)}}},cleanup:function(){removeView(this)}});module.exports=CommentItemView;


},{"../../../../mixins/utilities":128,"../templates/comment_item_template.html":34,"autolinker":132,"backbone":133,"underscore":159}],37:[function(require,module,exports){
module.exports='<li data-value=\'<%- value %>\'>\n  <div class="ac-container">\n    <% if (image !== null) { %>\n    <img src="<%- image %>" alt="<%- value %>" class="ac-image"/>\n    <% } else if (target == \'project\') { %>\n    <img src="/images/project_default.png" alt="<%- value %>" class="ac-image"/>\n    <% } else { %>\n    <div class="ac-image"></div>\n    <% } %>\n    <div class="ac-content">\n      <div class="ac-title">\n        <%- value %>\n      </div>\n      <div class="ac-description">\n        <% if ((target == \'project\') || (target == \'user\')) { %>\n        <%= description %>\n        <% } %>\n      </div>\n    </div>\n  </div>\n</li>';


},{}],38:[function(require,module,exports){
module.exports='<div class="row">\n  <div class="col-lg-12 ">\n    <div class="alert alert-danger comment-alert-empty">\n      You must enter text before submitting a comment.\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-12 ">\n    <form action="" class="form-inline comment-submit <% if (form.topic) { %>comment-form-topic<% } %>" role="form" data-depth="<%= form.depth %>">\n      <div class="input-group">\n        <div class="comment-input form-control input-sm" contentEditable="true"></div>\n        <span class="input-group-btn">\n          <input class="btn btn-c2 btn-sm" type="submit" value="<% if (form.topic) { %> Start Topic <% } else if (form.depth == 1) { %> Reply <% } else { %>Add Comment<% } %>" title="<% if (form.topic) { %> Start Topic <% } else if (form.depth == 1) { %> Reply <% } else { %>Add Comment<% } %>">\n        </span>\n      </div>\n    </form>\n  </div>\n</div>\n';


},{}],39:[function(require,module,exports){
module.exports='<% if (target == \'user\') {\n  %><a href="<%- link %>" class="comment-user-link" data-userid=<%- id %>>@<%- value %></a><% }\n  else if (target == \'project\') {\n  %><a href="<%- link %>" class="link-backbone"><%- value %></a><% }\n  else {\n  %><a href="<%- link %>"><%- value %></a><% } %>';


},{}],40:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),jqCaret=require("jquery.caret/dist/jquery.caret.min"),jqAt=require("jquery.atwho/dist/js/jquery.atwho"),utils=require("../../../../mixins/utilities"),marked=require("marked"),CommentCollection=require("../../../../entities/comments/comment_collection"),CommentFormTemplate=require("../templates/comment_form_template.html"),CommentAcTemplate=require("../templates/comment_ac_template.html"),CommentInlineTemplate=require("../templates/comment_inline_template.html"),CommentFormView=Backbone.View.extend({events:{"submit .comment-submit":"post"},initialize:function(e){this.options=e,this.render()},render:function(){var e=this,t={form:this.options},i=_.template(CommentFormTemplate)(t);this.options.topic?this.$el.prepend(i).append("<div class='clearfix'></div>"):this.$el.append(i);var n=function(e,t){return t?("user"==t.target&&(t.description=t.agency?t.agency:t.title?t.title:""),"project"==t.target&&(t.description&&(t.description=marked(t.description)),t.coverId||(t.coverId=null)),t.image||(t.image=null),_.template(e)(t)):""};return this.$(".comment-input").atwho({at:"@",search_key:"value",tpl:CommentAcTemplate,insert_tpl:CommentInlineTemplate,limit:10,callbacks:{tpl_eval:n,sorter:function(e,t){return t},highlighter:function(e){return e},remote_filter:function(e,t){$.getJSON("/api/ac/inline",{q:e},function(e){_.each(e,function(e){_.isUndefined(e.name)&&(e.name=e.value)}),t(e)})}}}).on("inserted.atwho",function(){var t=e.$("span.atwho-view-flag > span:visible");t.parent().after("&nbsp;"),t.hide()}),this},post:function(e){e.preventDefault&&e.preventDefault();var t=this.$(".comment-input").html(),i=this.$(".comment-input").text().trim();if(!i)return void this.$(".comment-alert-empty").show();var n;this.options.parentId&&(n=parseInt(this.options.parentId));var r={comment:t,topic:!1};r[this.options.target+"Id"]=this.options[this.options.target+"Id"],this.options.topic?r.topic=!0:r.parentId=n,this.$(".comment-alert-empty").hide();var o=e.currentTarget;this.collection.trigger("comment:save",r,o)},cleanup:function(){removeView(this)}});module.exports=CommentFormView;


},{"../../../../entities/comments/comment_collection":117,"../../../../mixins/utilities":128,"../templates/comment_ac_template.html":37,"../templates/comment_form_template.html":38,"../templates/comment_inline_template.html":39,"backbone":133,"jquery.atwho/dist/js/jquery.atwho":153,"jquery.caret/dist/jquery.caret.min":154,"marked":155,"underscore":159}],41:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),Popovers=require("../../../../mixins/popovers"),EventsCollection=require("../../../../entities/events/events_collection"),EventCollectionView=require("../views/event_collection_view"),ModalComponent=require("../../../../components/modal"),EventFormView=require("../../new/views/event_form_view"),popovers=new Popovers;EventList=Backbone.View.extend({el:"#event-list-wrapper",events:{"click .add-event":"add","click .rsvp":"toggleRSVP","mouseenter .data-event-flag-true":"buttonRSVPOn","mouseleave .data-event-flag-true":"buttonRSVPOff","mouseenter .project-people-div":popovers.popoverPeopleOn,"click .project-people-div":popovers.popoverClick},initialize:function(e){this.options=_.extend(e,this.defaults),this.requestEventsCollectionData()},requestEventsCollectionData:function(){var e=this;this.collection=new EventsCollection,this.collection.fetch({url:"/api/event/findAllByProjectId/"+parseInt(this.options.projectId),success:function(t){e.collection=t,e.renderEventCollectionView(t)}})},renderEventCollectionView:function(e){var t=this;this.listenTo(this.collection,"event:save:success",function(){$("#addEvent").bind("hidden.bs.modal",function(){t.requestEventsCollectionData(),this.eventFormView&&this.eventFormView.cleanup(),this.modalComponent&&this.modalComponent.cleanup()}).modal("hide")}),this.eventCollectionView&&this.eventCollectionView.cleanup(),this.eventCollectionView=new EventCollectionView({el:"#event-list-wrapper",onRender:!0,collection:e,projectId:this.options.projectId}),popovers.popoverPeopleInit(".project-people-div")},add:function(e){e.preventDefault&&e.preventDefault(),this.eventFormView&&this.eventFormView.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),this.modalComponent=new ModalComponent({el:"#event-modal-add",id:"addEvent",modalTitle:"Add Event"}).render(),this.eventFormView=new EventFormView({el:"#event-modal-add .modal-template",projectId:this.options.projectId,collection:this.collection}).render()},updatePeople:function(e,t){var n=$($(e.currentTarget).parents(".event")[0]).find(".event-people")[0],o=$(n).children(".event-people-number"),i=parseInt($(o).html());t?i++:i--,0>i&&(i=0),$(o).html(i);var l=$(n).children(".event-people-text")[0];$(l).html($(l).data(1==i?"singular":"plural"))},buttonRSVPOn:function(e){$(e.currentTarget).button("hover")},buttonRSVPOff:function(e){$(e.currentTarget).button("going")},toggleRSVP:function(e){var t=this;e.preventDefault&&e.preventDefault();var n=$($(e.currentTarget).parents("div.event")[0]).data("id");$(".rsvp").hasClass("data-event-flag-true")===!1?($(".rsvp").removeClass("data-event-flag-false"),$(".rsvp").addClass("data-event-flag-true"),$(e.currentTarget).button("going"),t.updatePeople(e,!0),$.ajax({url:"/api/event/attend/"+n,success:function(){}})):($(".rsvp").removeClass("data-event-flag-true"),$(".rsvp").addClass("data-event-flag-false"),$(e.currentTarget).button("rsvp"),t.updatePeople(e,!1),$.ajax({url:"/api/event/cancel/"+n,success:function(){}}))},cleanup:function(){this.eventCollectionView&&this.eventCollectionView.cleanup(),this.eventFormView&&this.eventFormView.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),removeView(this)}}),module.exports=EventList;


},{"../../../../components/modal":106,"../../../../entities/events/events_collection":120,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../../new/views/event_form_view":45,"../views/event_collection_view":43,"backbone":133,"underscore":159}],42:[function(require,module,exports){
module.exports='<div class="box-pad-lr border-bottom">\n  <h2>\n    Upcoming Events\n    <% if (user) { %>\n    <a href="#addEvent" class="btn btn-c0 btn-sm file-add add-event" data-toggle="modal" data-backdrop="static">Add Event</a>\n    <% } %>\n  </h2>\n</div>\n\n<div id="event-modal-add"></div>\n\n<div class="task-scroll">\n\n  <% if (events.length == 0) { %>\n\n  <div class="event border-left" data-id="null">\n    <div class="event-title">\n      No events scheduled.\n    </div>\n  </div>\n\n  <% } else { %>\n\n  <% _.each(events, function (event, iterator) { %>\n  <div class="event border-left" data-id="<%= event.id %>">\n    <% if (user) { %>\n    <div class="event-button pull-right">\n      <button class="btn btn-c2 btn-sm rsvp data-event-flag-<%= event.rsvp %>" data-going-text="<i class=\'fa fa-check\'></i> I\'m going" data-rsvp-text="RSVP" data-hover-text="Cancel RSVP"><% if (event.rsvp) { %><i class=\'fa fa-check\'></i> I\'m going<% } else { %>RSVP<% } %></button>\n    </div>\n    <% } %>\n    <div class="event-title">\n      <%- event.title %>\n    </div>\n    <div class="event-description">\n      <%- event.description %>\n    </div>\n    <div class="event-tag">\n      <i class="fa fa-calendar"></i>\n      <span class="box-icon-text">\n      <!-- day -->\n      <% var st = new Date(event.start); var et = new Date(event.end); %>\n      <%= st.toLocaleDateString() %>\n      <% if (st.toLocaleDateString() != et.toLocaleDateString()) { %>\n      - <%= et.toLocaleDateString() %>\n      <% } %>\n      <!-- time -->\n      <%= st.toLocaleTimeString() %>\n      <% if (st.toLocaleDateString() == et.toLocaleDateString()) { %>\n      - <%= et.toLocaleTimeString() %>\n      <% } %>\n      </span>\n    </div>\n    <div class="event-tag">\n      <span class="fa fa-map-marker"></span>\n      <span class="box-icon-text">\n      <%= event.location %>\n      </span>\n    </div>\n    <div class="event-tag">\n      <span class="event-icon-center"><i class="fa fa-male"></i></span>\n      <span class="box-icon-text event-people">\n        <span class="event-people-number"><%= event.rsvps.length %></span>\n        <span class="event-people-text" data-plural="people" data-singular="person">\n        <% if (event.rsvps.length == 1) { %>\n          person\n        <% } else { %>\n          people\n        <% } %>\n        </span>\n        going\n      </span>\n    </div>\n  </div>\n  <% }); %>\n\n  <% } %>\n</div>\n';


},{}],43:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),EventListTemplate=require("../templates/event_collection_view_template.html"),EventCollectionView=Backbone.View.extend({el:"#event-list-wrapper",initialize:function(e){this.options=e,this.render()},render:function(){var e={events:this.options.collection.toJSON(),projectId:this.options.projectId,user:window.cache.currentUser};return this.compiledTemplate=_.template(EventListTemplate)(e),this.$el.html(this.compiledTemplate),this},cleanup:function(){removeView(this)}});module.exports=EventCollectionView;


},{"../../../../mixins/utilities":128,"../templates/event_collection_view_template.html":42,"backbone":133,"underscore":159}],44:[function(require,module,exports){
module.exports='<form id="event-form" class="form-horizontal" style="display: block;">\n\n  <div class="modal-body">\n\n    <fieldset>\n\n      <div class="form-group">\n        <label for="event-title" class="col-lg-2 control-label">Title</label>\n        <div class="col-lg-10">\n          <input id="event-title" class="form-control" type="text" data-validate="empty,count100">\n          <span class="help-block error-empty" style="display:none;">You must enter an event title.</span>\n          <span class="help-block error-count100" style="display:none;">The event title must be less than 100 characters.</span>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label for="event-description" class="col-lg-2 control-label">Description</label>\n        <div class="col-lg-10">\n          <textarea id="event-description" class="form-control" type="text" data-validate="empty,count250" rows="3"></textarea>\n          <span class="help-block error-empty" style="display:none;">You must enter an event description.</span>\n          <span class="help-block error-count100" style="display:none;">The event description must be less than 250 characters.</span>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label for="event-start" class="col-md-2 control-label">Time</label>\n        <div class="col-md-2 padding-right-none">\n          <input id="event-start" class="form-control fullwidth" type="text">\n        </div>\n        <div class="col-md-2 padding-none" id="div-event-start-time">\n          <input id="event-start-time" class="form-control fullwidth timepicker" type="text">\n        </div>\n        <div class="col-md-1 control-label">\n          to\n        </div>\n        <div class="col-md-2 padding-none" id="div-event-end-time">\n          <input id="event-end-time" class="form-control fullwidth timepicker" type="text">\n        </div>\n        <div class="col-md-2 padding-none">\n          <input id="event-end" class="form-control fullwidth" type="text">\n        </div>\n      </div>\n\n      <div class="form-group" style="margin-top: -10px;">\n        <div class="col-md-10 col-md-offset-2 event-timezone">\n          Your time zone is set to <span class="timezone">None</span>.\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label for="event-location" class="col-lg-2 control-label">Location</label>\n        <div class="col-lg-10">\n          <input id="event-location" class="form-control" type="text" data-validate="empty">\n          <span class="help-block error-empty" style="display:none;">You must enter an event location.</span>\n        </div>\n      </div>\n\n    </fieldset>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0 wizard-cancel" data-dismiss="modal">Cancel</button>\n    <button class="btn btn-c2" type="submit">Add Event</button>\n  </div>\n\n</form>\n';


},{}],45:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),DatePicker=require("bootstrap-datetimepicker/src/js/bootstrap-datetimepicker"),TimePicker=require("timepicker/jquery.timepicker"),EventsCollection=require("../../../../entities/events/events_collection"),EventFormTemplate=require("../templates/event_form_template.html"),EventFormView=Backbone.View.extend({el:"#event-list-wrapper",events:{"blur #event-title":"v","blur #event-description":"v","blur #event-location":"v","submit #event-form":"post"},initialize:function(e){this.options=e},initializeTimeZone:function(){var e=(new Date).getTimezoneOffset(),t={"-12":"Pacific/Kwajalein","-11":"Pacific/Samoa","-10":"Pacific/Honolulu","-9":"America/Juneau","-8":"America/Los Angeles","-7":"America/Denver","-6":"America/Mexico City","-5":"America/New York","-4":"America/Caracas","-3.5":"America/St Johns","-3":"America/Argentina/Buenos Aires","-2":"Atlantic/Azores","-1":"Atlantic/Azores",0:"Europe/London",1:"Europe/Paris",2:"Europe/Helsinki",3:"Europe/Moscow",3.5:"Asia/Tehran",4:"Asia/Baku",4.5:"Asia/Kabul",5:"Asia/Karachi",5.5:"Asia/Calcutta",6:"Asia/Colombo",7:"Asia/Bangkok",8:"Asia/Singapore",9:"Asia/Tokyo",9.5:"Australia/Darwin",10:"Pacific/Guam",11:"Asia/Magadan",12:"Asia/Kamchatka"},i=t[-e/60];i+=" (",0>=e&&(i+="+"),i+=-e/60+":00)",$(".timezone").html(i),$("#event-start-time").timepicker({selectOnBlur:!0,appendTo:"#div-event-start-time"}),$("#event-end-time").timepicker({selectOnBlur:!0,showDuration:!0,durationTime:function(){return $("#event-start-time").val()},appendTo:"#div-event-end-time"});var a=18e5,n=new Date;n=new Date(Math.ceil(n.getTime()/a)*a);var r=new Date(n.getTime()+36e5);$("#event-start-time").timepicker("setTime",n),$("#event-end-time").timepicker("setTime",r);var o=new Date;$("#event-start").datetimepicker({pickDate:!0,pickTime:!1,startDate:o}),$("#event-end").datetimepicker({pickDate:!0,pickTime:!1,startDate:o}),$("#event-start").data("DateTimePicker").setDate(o),$("#event-end").data("DateTimePicker").setDate(o),$("#event-start").on("change.dp",function(e){$("#event-end").data("DateTimePicker").setStartDate(e.date);var t=$("#event-end").data("DateTimePicker").getDate().unix()-e.date.unix();0>t&&$("#event-end").data("DateTimePicker").setDate(e.date),$(e.currentTarget).blur()}),$("#event-end").on("change.dp",function(e){var t=e.date.unix()-$("#event-start").data("DateTimePicker").getDate().unix();0===t?$("#event-end-time").timepicker("option","showDuration",!0):$("#event-end-time").timepicker("option","showDuration",!1),$(e.currentTarget).blur()})},render:function(){var e=_.template(EventFormTemplate);this.$el.html(e),this.initializeTimeZone()},v:function(e){return validate(e)},post:function(e){e.preventDefault&&e.preventDefault();var t=["#event-title","#event-description","#event-location"],a=!1;for(i in t){var n=validate({currentTarget:t[i]});a=a||n}if(!a){var r=$("#event-start").data("DateTimePicker").getDate().clone().toDate(),o=$("#event-start").data("DateTimePicker").getDate().clone().toDate();r=$("#event-start-time").timepicker("getTime",r),o=$("#event-end-time").timepicker("getTime",o);var c={title:$("#event-title").val(),description:$("#event-description").val(),start:r.toISOString(),end:o.toISOString(),location:$("#event-location").val(),projectId:this.options.projectId};this.collection.trigger("event:save",c)}},cleanup:function(){removeView(this)}});module.exports=EventFormView;


},{"../../../../entities/events/events_collection":120,"../../../../mixins/utilities":128,"../templates/event_form_template.html":44,"backbone":133,"bootstrap":138,"bootstrap-datetimepicker/src/js/bootstrap-datetimepicker":137,"timepicker/jquery.timepicker":158,"underscore":159}],46:[function(require,module,exports){
module.exports='<footer class="container">\n  <div class="row">\n    <div class="col-md-12">\n      <a href="https://github.com/18F/midas"><i class="fa fa-github"></i> powered by midas</a>\n      |\n      version <%- version %> (<a href="https://github.com/18F/midas/commit/<%- version.gitLong %>"><%- version.gitShort %></a>)\n      <% if (login.terms.enabled === true) { %>\n      |\n      <a href="<%= login.terms.link %>"><%= login.terms.name %></a>\n      <% } %>\n      |\n      Locations provided by <a href="http://www.geonames.org/">GeoNames</a>.\n    </div>\n  </div>\n</footer>\n';


},{}],47:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),Login=require("../../../config/login.json"),FooterTemplate=require("../templates/footer_template.html"),FooterView=Backbone.View.extend({events:{},render:function(){function e(){headerHeight=$(".navbar").height(),footerHeight=$("footer").height(),$(document.body).height()+footerHeight<$(window).height()?o.$el.addClass("navbar-fixed-bottom"):o.$el.removeClass("navbar-fixed-bottom")}var o=this,t={version:version,login:Login},i=_.template(FooterTemplate)(t);this.$el.html(i),e(),$(".container").bind("DOMSubtreeModified",e)},cleanup:function(){removeView(this)}});module.exports=FooterView;


},{"../../../config/login.json":114,"../../../mixins/utilities":128,"../templates/footer_template.html":46,"backbone":133,"underscore":159}],48:[function(require,module,exports){
var _=require("underscore"),async=require("async"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),BaseController=require("../../../base/base_controller"),HomeView=require("../views/home_view");Home={},Home.Controller=BaseController.extend({events:{},initialize:function(){this.homeView=(new HomeView).render()},cleanup:function(){this.homeView&&this.homeView.cleanup(),removeView(this)}}),module.exports=Home.Controller;


},{"../../../base/base_controller":101,"../../../mixins/utilities":128,"../views/home_view":50,"async":131,"backbone":133,"underscore":159}],49:[function(require,module,exports){
module.exports='  <div class="container-fluid padding-left-none padding-right-none" id="home">\n    <div class="splash-wrap" id="splash1">\n      <div class="splash-center">\n      <h1 class="text-center" data-i18n="home.headline">Hassle Free Collaboration</h1>\n      <p class="lead text-center" data-i18n="home.subhead">Work with other federal employees on projects you are passionate about.</p>\n      <div class="text-center"><a class="login" href="/auth"><button class="btn btn-midas" id="center" data-i18n="home.callToAction">Get Started Today</button></a></div>\n      <!--div class="text-center text-on-dark text-muted"><a href="#">Learn More</a></div-->\n    </div><!-- /#splash -->\n    </div><!-- /.splash-wrap -->\n\n  <div class="inline-block-center">\n    <div class="value-prop">\n        <div class="icon"><i class="fa fa-comments"></i></div> <!-- icon -->\n        <div class="text">Make Connections</div>\n    </div>\n    <div class="value-prop">\n        <div class="icon"><i class="fa fa-cogs"></i></div> <!-- icon -->\n        <div class="text">Build Skills</div>\n    </div>\n    <div class="value-prop">\n        <div class="icon"><i class="fa fa-line-chart"></i></div> <!-- icon -->\n        <div class="text">Make a Difference</div>\n    </div>\n  </div>\n  <div class="text-center"><a class="login" href="/auth"><button class="btn btn-midas" id="center" data-i18n="home.callToAction">Get Started Today</button></a></div>\n\n\n  </div><!-- /.container-fluid-->\n';


},{}],50:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),async=require("async"),utils=require("../../../mixins/utilities"),UIConfig=require("../../../config/ui.json"),Login=require("../../../config/login.json"),LoginController=require("../../login/controllers/login_controller"),HomeTemplate=require("../templates/home_view_template.html"),HomeView=Backbone.View.extend({el:"#container",events:{"click .login":"loginClick"},initialize:function(e){this.options=e,this.listenTo(window.cache.userEvents,"user:login:success",function(){Backbone.history.navigate(UIConfig.home.logged_in_path,{trigger:!0})})},render:function(){var e,i={hostname:window.location.hostname,user:window.cache.currentUser||{}};return this.$el.addClass("home"),e=_.template(HomeTemplate)(i),this.$el.html(e),this.$el.i18n(),this},loginClick:function(e){e.preventDefault&&e.preventDefault(),window.cache.currentUser?Backbone.history.navigate(UIConfig.home.logged_in_path,{trigger:!0}):this.login()},login:function(e){this.loginController&&this.loginController.cleanup(),this.loginController=new LoginController({el:"#login-wrapper",message:e})},cleanup:function(){this.$el.removeClass("home"),removeView(this)}});module.exports=HomeView;


},{"../../../config/login.json":114,"../../../config/ui.json":116,"../../../mixins/utilities":128,"../../login/controllers/login_controller":51,"../templates/home_view_template.html":49,"async":131,"backbone":133,"underscore":159}],51:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),Bootstrap=require("bootstrap"),utils=require("../../../mixins/utilities"),BaseController=require("../../../base/base_controller"),LoginView=require("../views/login_view"),login=require("../../../config/login.json"),ModalComponent=require("../../../components/modal");Login=BaseController.extend({events:{"click #register-cancel":"showLogin","click #login-register":"showRegister","click #forgot-done-cancel":"showLogin","click #forgot-cancel":"showLogin","click #forgot-password":"showForgot"},initialize:function(i){this.options=i,this.initializeView()},initializeView:function(){var i=this;if(this.loginView&&(this.loginView.cleanup(),this.modalComponent.cleanup()),!_.isUndefined(this.options.message))var e=this.options.message.disableClose||!1;this.modalComponent=new ModalComponent({el:this.el,id:"login",modalTitle:"Login or Register",disableClose:e}).render(),this.loginView=new LoginView({el:".modal-template",login:login,message:this.options.message}).render(),this.$("#registration-view").hide(),this.$("#forgot-view").hide(),this.$("#forgot-done-view").hide(),$("#login").modal("show"),i.listenTo(window.cache.userEvents,"user:login",function(e){i.stopListening(window.cache.userEvents),$("#login").bind("hidden.bs.modal",function(){Backbone.history.loadUrl(),window.cache.userEvents.trigger("user:login:success",e),i.cleanup()}).modal("hide")})},showRegister:function(i){i.preventDefault&&i.preventDefault(),this.$("#login-view").hide(),this.$("#login-footer").hide(),this.$("#registration-view").show(),this.$("#registration-footer").show(),this.$("#forgot-view").hide(),this.$("#forgot-footer").hide(),this.$("#forgot-done-view").hide(),this.$("#forgot-done-footer").hide()},showLogin:function(i){i.preventDefault&&i.preventDefault(),this.$("#login-view").show(),this.$("#login-footer").show(),this.$("#registration-view").hide(),this.$("#registration-footer").hide(),this.$("#forgot-view").hide(),this.$("#forgot-footer").hide(),this.$("#forgot-done-view").hide(),this.$("#forgot-done-footer").hide()},showForgot:function(i){i.preventDefault&&i.preventDefault(),this.$("#forgot-view").show(),this.$("#forgot-footer").show(),this.$("#registration-view").hide(),this.$("#registration-footer").hide(),this.$("#login-view").hide(),this.$("#login-footer").hide(),this.$("#forgot-done-view").hide(),this.$("#forgot-done-footer").hide()},cleanup:function(){this.loginView&&this.loginView.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),removeView(this)}}),module.exports=Login;


},{"../../../base/base_controller":101,"../../../components/modal":106,"../../../config/login.json":114,"../../../mixins/utilities":128,"../views/login_view":55,"backbone":133,"bootstrap":138,"underscore":159}],52:[function(require,module,exports){
module.exports='<div class="row">\n  <div class="col-sm-9 sm-nopadding">\n    <div class="form-group">\n      <label for="rpassword" class="control-label">Password</label>\n      <input type="password" class="form-control validate" id="rpassword" name="password" placeholder="Password" data-validate="empty,password,confirm"/>\n      <span class="help-block error-empty" style="display:none;">You must enter a password.</span>\n      <span class="help-block error-password" style="display:none;">Your password does not meet password rules.</span>\n    </div>\n    <div class="form-group">\n      <label for="rpassword-confirm" class="control-label">Confirm Password</label>\n      <input type="password" class="form-control" id="rpassword-confirm" placeholder="Confirm Password"/>\n      <span class="help-block error-confirm" style="display:none;">Your password does not match the password entered above.</span>\n    </div>\n  </div>\n  <div class="col-sm-3 nopadding">\n    <div class="password-rules-title">\n      Must Contain:\n    </div>\n    <ul class="password-rules">\n      <li class="success rule-username"><i class="fa fa-check"></i> Not your email</li>\n      <li class="error rule-username"><i class="fa fa-remove"></i> Not your email</li>\n      <li class="success rule-length"><i class="fa fa-check"></i> 8 characters or more</li>\n      <li class="error rule-length"><i class="fa fa-remove"></i> 8 characters or more</li>\n      <li class="success rule-upper"><i class="fa fa-check"></i> Uppercase</li>\n      <li class="error rule-upper"><i class="fa fa-remove"></i> Uppercase</li>\n      <li class="success rule-lower"><i class="fa fa-check"></i> Lowercase</li>\n      <li class="error rule-lower"><i class="fa fa-remove"></i> Lowercase</li>\n      <li class="success rule-number"><i class="fa fa-check"></i> A Number</li>\n      <li class="error rule-number"><i class="fa fa-remove"></i> A Number</li>\n      <li class="success rule-symbol"><i class="fa fa-check"></i> A Symbol</li>\n      <li class="error rule-symbol"><i class="fa fa-remove"></i> A Symbol</li>\n    </ul>\n  </div>\n</div>\n';


},{}],53:[function(require,module,exports){
module.exports='<form role="form" id="login-password-form">\n<div class="modal-body padding-bottom-none" id="login-view">\n\n  <% if (message && !_.isUndefined(message.message)) { %>\n  <div class="alert alert-warning">\n    <%= message.message %>\n  </div>\n  <% } %>\n\n  <% if (login.oauth.length > 0) { %>\n  <div class="login-oauth">Login with\n  <% _.each(login.oauth, function (e) { %>\n  <div class="row">\n    <div class="col-sm-offset-3 col-sm-6">\n      <div class="login-option">\n        <a href="<%= login.config[e].endpoint %>" class="btn btn-c0 btn-login">\n          <img src="<%= login.config[e].image %>" alt="<%= login.config[e].name %>" class="btn-login-responsive"/>\n        </a>\n      </div>\n    </div>\n  </div>\n  <% }); %>\n  </div>\n  <% } %>\n\n  <% if (login.local.enabled === true) { %>\n    <% if (login.oauth.length > 0) { %>\n    <hr/>\n    <% } %>\n    <div class="alert alert-danger" id="login-error" style="display:none;"></div>\n      <div class="form-group">\n        <label for="username" class="control-label" data-i18n="loginModal.emailAddress">Email Address</label>\n        <input type="email" class="form-control" id="username" name="username" placeholder="Email Address"/>\n      </div>\n      <div class="form-group margin-bottom-none">\n        <label for="password" class="control-label">Password</label>\n        <input type="password" class="form-control" id="password" name="password" placeholder="Password"/>\n        <a href="#forgot-password" class="forgot-password" id="forgot-password">Forgot your password?</a>\n      </div>\n    </div>\n    <div class="modal-footer modal-footer-grey" id="login-footer">\n      <div class="row">\n        <div class="col-md-12">\n          <button type="submit" class="btn btn-c2 pull-right">Sign in</button>\n          <p class="pull-left login-register-label" id="login-register-label">\n            Need an account? \n            <a href="#login-register" id="login-register">\n              <strong>Sign up now</strong>\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  <% } else { %>\n  </div>\n  <% } %>\n</form>\n\n<form role="form" id="registration-form">\n<div class="modal-body padding-bottom-none" id="registration-view">\n    <h2>Create a New Account</h2>\n\n    <div class="row">\n      <div class="col-sm-12">\n        <div class="form-group">\n          <label for="rname" class="control-label" data-i18n="loginModal.name">Name</label>\n          <input type="text" class="form-control validate" id="rname" name="rname" placeholder="Full Name" data-validate="empty">\n          <span class="help-block error-empty" style="display:none;">Please enter your full name.</span>\n        </div>\n      </div>\n      <div class="col-sm-12">\n        <div class="form-group">\n          <label for="rusername" class="control-label" data-i18n="loginModal.emailAddress">Email Address</label>\n          <div class="input-group">\n            <input type="text" class="form-control validate" id="rusername" name="username" placeholder="Email Address" data-validate="button"/>\n            <span class="input-group-btn">\n              <a href="#" class="btn btn-danger" id="rusername-button" tabindex="-1">\n                <i id="rusername-check" class="fa fa-times"></i>\n              </a>\n            </span>\n          </div>\n          <span class="help-block error-button" style="display:none;">The email address is not valid or is already in use.</span>\n        </div>\n      </div>\n    </div>\n\n    <div class="password-view">\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <% if (login.terms.enabled === true) { %>\n        <input type="checkbox" id="rterms" class="validate" data-validate="checked"> <span data-i18n="loginModal.tosCheckbox">Yes, I agree to the </span><a href="<%= login.terms.link %>"><%= login.terms.name %></a>.\n        <span class="help-block error-checked" style="display:none;">You must accept the <%= login.terms.name %> to register.</span>\n        <% } %>\n      </label>\n    </div>\n\n    <div class="form-group margin-bottom-none">\n      <div class="row">\n        <div class="col-sm-12">\n          <div class="alert alert-danger" id="registration-error" style="display:none;"></div>\n        </div>\n      </div>\n    </div>\n</div>\n<div class="modal-footer modal-footer-grey" id="registration-footer" style="display:none;">\n  <div class="row">\n    <div class="col-sm-12">\n      <div class="pull-right">\n        <button type="button" id="register-cancel" class="btn btn-c0">Cancel</button>\n        <button type="submit" class="btn btn-c2">Register</button>\n      </div>\n    </div>\n  </div>\n</div>\n</form>\n\n<form role="form" id="forgot-form">\n<div class="modal-body padding-bottom-none" id="forgot-view">\n    <h2>Reset Your Password</h2>\n\n    <p>Please enter your email address and we\'ll send you a link to reset your password</p>\n\n    <div class="form-group">\n      <label for="fusername" class="control-label">Email Address</label>\n      <input type="text" class="form-control validate" id="fusername" name="username" placeholder="Email Address" data-validate="button"/>\n    </div>\n    <div class="form-group margin-bottom-none">\n      <div class="row">\n        <div class="col-sm-12">\n          <div class="alert alert-danger" id="forgot-error" style="display:none;"></div>\n        </div>\n      </div>\n    </div>\n</div>\n<div class="modal-footer modal-footer-grey" id="forgot-footer" style="display:none;">\n  <div class="row">\n    <div class="col-sm-12">\n      <div class="pull-right">\n        <button type="button" id="forgot-cancel" class="btn btn-c0">Cancel</button>\n        <button type="submit" class="btn btn-c2">Reset Password</button>\n      </div>\n    </div>\n  </div>\n</div>\n</form>\n\n<div class="modal-body padding-bottom-none" id="forgot-done-view">\n    <h2>Reset Your Password</h2>\n\n    <p>\n      Thank you! An email will arrive shortly with a link to reset your password.\n    </p>\n    <p>\n      If you don\'t receive an email shortly, check your spam folder.\n    </p>\n</div>\n<div class="modal-footer modal-footer-grey" id="forgot-done-footer" style="display:none;">\n  <div class="row">\n    <div class="col-sm-12">\n      <div class="pull-right">\n        <button type="button" id="forgot-done-cancel" class="btn btn-c2">Return to Login</button>\n      </div>\n    </div>\n  </div>\n</div>';


},{}],54:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),LoginPasswordTemplate=require("../templates/login_password_template.html"),LoginPasswordView=Backbone.View.extend({initialize:function(e){this.options=e},render:function(){var e=_.template(LoginPasswordTemplate);return this.$el.html(e),this},cleanup:function(){removeView(this)}});module.exports=LoginPasswordView;


},{"../../../mixins/utilities":128,"../templates/login_password_template.html":52,"backbone":133,"underscore":159}],55:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),LoginPasswordView=require("./login_password_view"),LoginTemplate=require("../templates/login_template.html"),ModalComponent=require("../../../components/modal"),LoginView=Backbone.View.extend({events:{"click .oauth-link":"link","keyup #rname":"checkName","change #rname":"checkName","blur #rname":"checkName","keyup #rusername":"checkUsername","change #rusername":"checkUsername","click #rusername-button":"clickUsername","keyup #rpassword":"checkPassword","blur #rpassword":"checkPassword","keyup #rpassword-confirm":"checkPasswordConfirm","blur #rpassword-confirm":"checkPasswordConfirm","submit #login-password-form":"submitLogin","submit #registration-form":"submitRegister","submit #forgot-form":"submitForgot"},initialize:function(e){this.options=e},render:function(){var e=this,r={login:this.options.login,message:this.options.message},s=_.template(LoginTemplate)(r);return this.$el.html(s),this.$el.i18n(),this.loginPasswordView=new LoginPasswordView({el:this.$(".password-view")}).render(),setTimeout(function(){e.$("#username").focus()},500),this},link:function(e){e.preventDefault&&e.preventDefault();var r=$(e.currentTarget).attr("href");window.location.href=r},v:function(e){return validate(e)},submitLogin:function(e){var r=this;e.preventDefault&&e.preventDefault();var s={username:this.$("#username").val(),password:this.$("#password").val(),json:!0};$.ajax({url:"/api/auth/local",type:"POST",data:s}).done(function(e){window.cache.currentUser=e,window.cache.userEvents.trigger("user:login",e)}).fail(function(e){var s=JSON.parse(e.responseText);r.$("#login-error").html(s.message),r.$("#login-error").show()})},submitRegister:function(e){var r=this,s=r.$('#registration-form [type="submit"]');e.preventDefault&&e.preventDefault(),s.prop("disabled",!0);var o=["#rname","#rusername","#rpassword"];this.options.login.terms.enabled===!0&&o.push("#rterms");var a=!1;for(i in o){var n=validate({currentTarget:o[i]});a=a||n}var t=this.checkPassword(),u=$(this.$("#rpassword").parents(".form-group")[0]);t!==!0?(u.addClass("has-error"),$(u.find(".error-password")[0]).show()):$(u.find(".error-password")[0]).hide();var l=this.checkPasswordConfirm(),c=$(this.$("#rpassword-confirm").parents(".form-group")[0]);if(l!==!0?(c.addClass("has-error"),$(c.find(".error-password")[0]).show()):$(c.find(".error-password")[0]).hide(),a===!0||t!==!0||l!==!0)return void s.prop("disabled",!1);var m={name:this.$("#rname").val(),username:this.$("#rusername").val(),password:this.$("#rpassword").val(),json:!0};this.options.login.terms.enabled===!0&&(m.terms="on"==this.$("#rterms").val()),$.ajax({url:"/api/auth/register",type:"POST",data:m}).done(function(e){window.cache.currentUser=e,window.cache.userEvents.trigger("user:login",e)}).fail(function(e){var o=JSON.parse(e.responseText);r.$("#registration-error").html(o.message),r.$("#registration-error").show(),s.prop("disabled",!1)})},submitForgot:function(e){var r=this;e.preventDefault&&e.preventDefault();var s={username:this.$("#fusername").val()};$.ajax({url:"/api/auth/forgot",type:"POST",data:s}).done(function(){r.$("#forgot-view").hide(),r.$("#forgot-footer").hide(),r.$("#forgot-done-view").show(),r.$("#forgot-done-footer").show()}).fail(function(e){var s=JSON.parse(e.responseText);r.$("#forgot-error").html(s.message),r.$("#forgot-error").show()})},checkName:function(){var e=this.$("#rname").val();e&&""!==e?$("#rname").closest(".form-group").find(".help-block").hide():$("#rname").closest(".form-group").find(".help-block").show()},checkUsername:function(){var e=$("#rusername").val();$.ajax({url:"/api/user/username/"+e}).done(function(e){$("#rusername-button").removeClass("btn-success"),$("#rusername-button").removeClass("btn-danger"),$("#rusername-check").removeClass("fa fa-check"),$("#rusername-check").removeClass("fa fa-times"),e?($("#rusername-button").addClass("btn-danger"),$("#rusername-check").addClass("fa fa-times")):($("#rusername-button").addClass("btn-success"),$("#rusername-check").addClass("fa fa-check"),$("#rusername").closest(".form-group").removeClass("has-error"),$("#rusername").closest(".form-group").find(".help-block").hide())})},checkPassword:function(){var e=validatePassword(this.$("#rusername").val(),this.$("#rpassword").val()),r=_.values(e),s=_.every(r),o=!0;return s===!0&&($("#rpassword").closest(".form-group").removeClass("has-error"),$("#rpassword").closest(".form-group").find(".help-block").hide()),_.each(e,function(e,r){e===!0?(this.$(".password-rules .success.rule-"+r).show(),this.$(".password-rules .error.rule-"+r).hide()):(this.$(".password-rules .success.rule-"+r).hide(),this.$(".password-rules .error.rule-"+r).show()),o=o&&e}),o},checkPasswordConfirm:function(){var e=!0,r=this.$("#rpassword").val(),s=this.$("#rpassword-confirm").val();return r===s?$("#rpassword-confirm").closest(".form-group").find(".help-block").hide():($("#rpassword-confirm").closest(".form-group").find(".help-block").show(),e=!1),e},clickUsername:function(e){e.preventDefault()},cleanup:function(){this.loginPasswordView&&this.loginPasswordView.cleanup(),removeView(this)}});module.exports=LoginView;


},{"../../../components/modal":106,"../../../mixins/utilities":128,"../templates/login_template.html":53,"./login_password_view":54,"backbone":133,"underscore":159}],56:[function(require,module,exports){
module.exports='<div id="login-wrapper"></div>\n<div class="navbar navbar-default navbar-static-top">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand" href="/" title="<%- systemName %> Home">\n      </a>\n    </div>\n    <div class="navbar-collapse collapse pull-right">\n      <ul class="nav navbar-nav">\n\n        <% if (ui.project.show) { %>\n        <li class="projects">\n          <a href="/projects" class="nav-link">\n            <i class="fa fa-rocket"></i>\n            <span class="navbar-title-small" data-i18n="Browse">Browse</span><br/>\n            <span class="navbar-title-big" data-i18n="ProjectPlural">Projects</span>\n          </a>\n        </li>\n        <% } %>\n        <li class="tasks">\n          <a href="/tasks" class="nav-link">\n            <i class="fa fa-tags"></i>\n            <span class="navbar-title-small" data-i18n="Browse">Browse</span><br/>\n            <span class="navbar-title-big" data-i18n="TaskPlural">Tasks</span>\n          </a>\n        </li>\n\n        <li class="divider-vertical navbar-text"></li>\n        <% if (user) { %>\n          <li class="profile dropdown"><a href="/profile" id="navbar-profile" role="button" class="dropdown-toggle" data-toggle="dropdown">\n            <img src="/api/user/photo/<%- user.id %>" class="navbar-people"/> &nbsp;\n              <% if (user.name) { %><%- user.name %>\n              <% } else { %><%- user.username %>\n              <% } %>\n            </a>\n            <ul class="dropdown-menu" role="menu" aria-labelledby="navbar-profile">\n              <li role="presentation"><a role="menuitem" class="nav-link" tabindex="-1" href="/profile">Profile</a></li>\n              <% if (user.isAdmin === true) { %>\n              <li role="presentation" class="divider"></li>\n              <li role="presentation"><a role="menuitem"\n                 tabindex="-1" href="/admin" class="nav-link">Administration</a></li>\n              <% } %>\n              <% if (login.local.logout) { %>\n              <li role="presentation" class="divider"></li>\n              <li role="presentation"><a role="menuitem"\n                 tabindex="-1" href="/auth/logout" class="logout">Logout</a></li>\n              <% } %>\n            </ul>\n          </li>\n        <% } else { %>\n          <% if (login.signin !== false) { %>\n          <li class="navbar-1line"><a href="/auth" class="login"><i class="fa fa-plus-circle"></i> Sign In</a></li>\n          <% } %>\n        <% }; %>\n      </ul>\n    </div>\n  </div>\n</div>\n';


},{}],57:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../mixins/utilities"),UIConfig=require("../../../config/ui.json"),Login=require("../../../config/login.json"),LoginController=require("../../login/controllers/login_controller"),NavTemplate=require("../templates/nav_template.html"),NavView=Backbone.View.extend({events:{"click .navbar-brand":linkBackbone,"click .nav-link":linkBackbone,"click .login":"loginClick","click .logout":"logout"},initialize:function(e){var n=this;this.options=e,this.listenTo(window.cache.userEvents,"user:login:success",function(e){n.doRender({user:e})}),this.listenTo(window.cache.userEvents,"user:logout",function(){n.doRender({user:null}),Backbone.history.loadUrl(),window.cache.userEvents.trigger("user:logout:success")}),this.listenTo(window.cache.userEvents,"user:request:login",function(e){n.login(e)}),this.listenTo(window.cache.userEvents,"user:profile:save",function(e){window.cache.currentUser=e,n.render()}),this.listenTo(window.cache.userEvents,"user:profile:photo:save",function(e){$(".navbar-people").attr("src",e)})},render:function(){return this.doRender({user:window.cache.currentUser,systemName:window.cache.system.name}),this},doRender:function(e){e.login=Login,e.ui=UIConfig;var n=_.template(NavTemplate)(e);this.$el.html(n),this.$el.i18n(),$(".nav li").on("click",function(){$(".nav li").removeClass("active"),$(this).addClass("active")})},loginClick:function(e){e.preventDefault&&e.preventDefault(),this.login()},login:function(e){this.loginController&&this.loginController.cleanup(),this.loginController=new LoginController({el:"#login-wrapper",message:e})},logout:function(e){e.preventDefault&&e.preventDefault(),$.ajax({url:"/api/auth/logout?json=true"}).done(function(){window.cache.currentUser=null,window.cache.userEvents.trigger("user:logout")}).fail(function(){})},cleanup:function(){this.loginController&&this.loginController.cleanup(),removeView(this)}});module.exports=NavView;


},{"../../../config/login.json":114,"../../../config/ui.json":116,"../../../mixins/utilities":128,"../../login/controllers/login_controller":51,"../templates/nav_template.html":56,"backbone":133,"underscore":159}],58:[function(require,module,exports){
module.exports='<form role="form" action="" id="email-form">\n  <div class="modal-body">\n    <div class="alert alert-warning" style="display:none;"></div>\n    <fieldset>\n      <div class="form-group">\n        <label for="email">Email Address</label>\n        <input type="email" class="form-control" id="email" name="email" placeholder="name@domain.com"/>\n      </div>\n    </fieldset>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0" data-dismiss="modal">Cancel</button>\n    <input type="submit" class="btn btn-c2" id="submit" value="Add Email Address"/>\n  </div>\n</form>\n';


},{}],59:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),EmailFormTemplate=require("../templates/profile_email_form.html"),EmailFormView=Backbone.View.extend({events:{"submit #email-form":"post"},initialize:function(e){this.target=e.target,this.options=e},render:function(){var e=_.template(EmailFormTemplate)({});return this.$el.html(e),this},post:function(e){e.preventDefault&&e.preventDefault();var t,r=this;this.$(".alert").hide(),t={email:$(e.currentTarget).find("#email").val()},$.ajax({url:"/api/useremail",type:"POST",data:t,success:function(e){r.options.model.trigger(r.target+":email:new",e)},error:function(e){r.$(".alert").html(e.responseJSON.message),r.$(".alert").show(),r.options.model.trigger(r.target+":email:error",e.responseJSON)}})},cleanup:function(){removeView(this)}});module.exports=EmailFormView;


},{"../../../../mixins/utilities":128,"../templates/profile_email_form.html":58,"backbone":133,"bootstrap":138,"underscore":159}],60:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),BaseController=require("../../../../base/base_controller"),ProfileModel=require("../../../../entities/profiles/profile_model"),ProfileView=require("../views/profile_show_view"),ProfileSettingsView=require("../views/profile_settings_view"),ProfileResetView=require("../views/profile_reset_view"),Login=require("../../../../config/login.json"),AlertTemplate=require("../../../../components/alert_template.html");Profile=BaseController.extend({region:!0,subRegion:!1,el:"#container",events:{},initialize:function(e){this.options=e,this.routeId=e.id,this.action=e.action,this.data=e.data,this.initializeController()},initializeController:function(){this.profileView&&this.profileView.cleanup(),this.settingsView&&this.settingsView.cleanup(),this.profileResetView&&this.profileResetView.cleanup(),"reset"==this.routeId?this.profileResetView=new ProfileResetView({el:this.$el,routeId:this.routeId,action:this.action,data:this.data}).render():this.initializeProfileModelInstance()},initializeProfileModelInstance:function(){var e=this;if(this.model&&this.model.remove(),this.model=new ProfileModel,Login.profile.edit===!1&&"edit"==this.action){var t={alert:{message:'<strong>Direct editing of profiles is disabled.</strong>  <a href="'+Login.profile.editUrl+'" title="Edit Profile">Click here to edit your profile</a>'}},o=_.template(AlertTemplate)(t);return void this.$el.html(o)}this.model.trigger("profile:fetch",this.routeId),this.listenTo(this.model,"profile:fetch:success",function(t){e.model=t;var o=t.toJSON();for(i in o.tags)"agency"==o.tags[i].tag.type?(e.model.agency=o.tags[i].tag,e.model.agency.tagId=o.tags[i].id):"location"==o.tags[i].tag.type&&(e.model.location=o.tags[i].tag,e.model.location.tagId=o.tags[i].id);e.initializeProfileViewInstance()}),this.listenTo(this.model,"profile:fetch:error",function(i,t){403===t.status&&window.cache.userEvents.trigger("user:request:login",{message:"You must be logged in to view profiles",disableClose:!1});var o={alert:{message:"<strong>Unable to load profile.  Please reload this page to try again.</strong><br/>Error: "}};if(t.responseText){var s=JSON.parse(t.responseText);s.message&&(o.alert.message+=s.message)}var r=_.template(AlertTemplate)(o);e.$el.html(r)})},initializeProfileViewInstance:function(){"settings"==this.action?this.settingsView=new ProfileSettingsView({el:this.$el,model:this.model,routeId:this.routeId,action:this.action,data:this.data}).render():this.profileView=new ProfileView({el:this.$el,model:this.model,routeId:this.routeId,action:this.action,data:this.data}).render()},cleanup:function(){this.profileView&&this.profileView.cleanup(),this.settingsView&&this.settingsView.cleanup(),removeView(this)}}),module.exports=Profile;


},{"../../../../base/base_controller":101,"../../../../components/alert_template.html":103,"../../../../config/login.json":114,"../../../../entities/profiles/profile_model":121,"../views/profile_reset_view":67,"../views/profile_settings_view":68,"../views/profile_show_view":69,"backbone":133,"underscore":159}],61:[function(require,module,exports){
module.exports='<ul class="nav nav-tabs">\n  <li class="active"><a href="#<%= handle %>-tab-open" data-toggle="tab">Open</a></li>\n  <li><a href="#<%= handle %>-tab-closed" data-toggle="tab">Closed</a></li>\n</ul>\n\n<div class="tab-content">\n  <div class="tab-pane active" id="<%= handle %>-tab-open">\n    <table class="table table-condensed table-hover">\n      <% if ( count.open > 0 || count.assigned > 0 || count.draft > 0) { %>\n        <thead>\n          <tr>\n            <th data-i18n="<%= targetCapitalized %>">Project</th>\n            <th>Created</th>\n            <th>Likes</th>\n          </tr>\n        </thead>\n        <tbody>\n        <% for (var i in data) { %>\n          <% if (data[i].state == \'completed\' || data[i].state == \'archived\') { continue; } %>\n          <tr>\n            <td>\n              <% if (data[i].state == \'draft\') { %>\n              <span class="label label-warning">draft</span>\n              <% } %>\n              <a href="<%= target %>s/<%= data[i].id %>" class="activity-link" data-id="<%= data[i].id %>"><%= data[i].title %></a>\n            </td>\n            <td>\n              <% var created = new Date(data[i].createdAt); %>\n              <%= created.toLocaleDateString() %> <%= created.toLocaleTimeString() %></td>\n            <td><%= data[i].likeCount %></td>\n          </tr>\n        <% } %>\n        </tbody>\n      <% } else { %>\n        <tbody>\n          <tr>\n            <td>No <%= targetsFriendly %></td>\n          </tr>\n        </tbody>\n      <% } %>\n    </table>\n  </div>\n  <div class="tab-pane" id="<%= handle %>-tab-closed">\n    <table class="table table-condensed table-hover">\n      <% if (count.completed > 0 || count.archived > 0) { %>\n        <thead>\n          <tr>\n            <th data-i18n="<%= targetCapitalized %>">Project</th>\n            <th>Created</th>\n            <th>Likes</th>\n          </tr>\n        </thead>\n        <tbody>\n        <% for (var i in data) { %>\n          <% if (data[i].state !== \'completed\' && data[i].state !== \'archived\') { continue; } %>\n          <tr>\n            <td>\n              <a href="<%= target %>s/<%= data[i].id %>" class="activity-link" data-id="<%= data[i].id %>"><%= data[i].title %></a>\n            </td>\n            <td><%= data[i].createdAt %></td>\n            <td><%= data[i].likeCount %></td>\n          </tr>\n        <% } %>\n        </tbody>\n      <% } else { %>\n        <tbody>\n          <tr>\n            <td>No <%= targetsFriendly %></td>\n          </tr>\n        </tbody>\n      <% } %>\n    </table>\n  </div>\n</div>\n';


},{}],62:[function(require,module,exports){
module.exports='<div class="radio">\n  <label>\n    <input type="radio" name="primaryEmail" id="email-<%- email.id %>" value="<%- email.email %>" <% if (email.isPrimary) { %>checked<% } %>>\n    <a href="#" class="email-remove" id="email-remove-<%- email.id %>" data-id="<%- email.id %>"><span class="fa fa-trash"></span></a> <%- email.email %>\n  </label>\n</div>\n';


},{}],63:[function(require,module,exports){
module.exports='<div class="row">\n\n  <div class="row">\n    <div class="col-md-6 col-md-offset-3 box">\n      <div class="box-main">\n\n        <div class="profile-reset center" id="profile-reset-check">\n          <i class="fa fa-spin fa-spinner"></i> Looking up password reset code...\n        </div>\n\n        <div class="profile-reset error" id="profile-reset-check-error" style="display: none;">\n          This is not a valid password reset code.  Please try resetting your password again and clicking on the link in the email.\n        </div>\n        <div class="profile-reset error" id="profile-reset-submit-error" style="display: none;">\n          An error occurred resetting your password.  Please reload this page and try again.\n        </div>\n\n        <div class="profile-reset" id="profile-reset-dialog" style="display: none;">\n          <form id="form-password-reset" title="Password Reset">\n            <h1>\n              Please set a new password for your account.\n            </h1>\n            <div class="password-view">\n            </div>\n            <div>\n              <input type="submit" class="btn btn-c1" value="Reset Password"/>\n            </div>\n          </form>\n        </div>\n        <div class="profile-reset center" id="profile-reset-submit" style="display: none;">\n          <i class="fa fa-spin fa-spinner"></i> Performing password reset.  Please stand by...\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</div>\n';


},{}],64:[function(require,module,exports){
module.exports='<div class="row">\n\n  <div class="alert alert-info">\n    Profile settings are not yet implemented.  Please contact the administrator of this system to update your email settings.  Our apologies, stay tuned!\n  </div>\n\n</div>\n';


},{}],65:[function(require,module,exports){
module.exports='<div class="row">\n\n  <% if (user.isAdmin) { %>\n  <div class="alert alert-info">\n    You are an administrator.\n    <% if (user.id !== data.id) { %>\n      <% if (edit === true) { %>\n        <strong>You are editing another user\'s profile.</strong>\n      <% } else { %>\n        You are viewing another user\'s profile.\n      <% } %>\n    <% } %>\n  </div>\n  <% } %>\n\n  <% if (saved) { %>\n  <div class="alert alert-success">Your profile has been successfully updated.</div>\n  <% } %>\n\n  <div class="col-sm-3 col-md-4 project-sidebar">\n    <!-- LEFT SIDEBAR -->\n\n    <div class="row">\n      <div class="col-md-12 box project-header-wrapper">\n        <div id="project-header" style="background-image:url(\'/api/user/photo/<%- data.id %>\');">\n          <div class="btn btn-c2 fileinput-button" <% if (!((data.isOwner || user.isAdmin) && edit)) { %>style="display:none;"<% } %>>\n            <i class="fa fa-camera fa-lg" title="Change Cover Photo" id="fileupload-icon"></i>\n            <input id="fileupload" type="file" name="files[]" title="Upload Photo">\n          </div>\n        </div>\n        <div id="file-upload-progress-container" style="display: none;" class="progress progress-striped active">\n          <div id="file-upload-progress" class="progress-bar" style="width: 0"></div>\n        </div>\n        <div id="file-upload-alert" class="alert alert-warning" style="display:none;">\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 box">\n        <div class="box-main tag-wrapper">\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-sm-9 col-md-8">\n    <!-- RIGHT MAIN BAR -->\n    <% if (edit) { %> <!-- in edit mode -->\n    <div class="box box-main">\n      <div id="emailModal"></div>\n\n      <form class="form-horizontal" role="form" id="profile-form">\n        <h1>\n          <div class="form-group">\n            <input type="text" class="form-control input-lg" id="name" name="name" placeholder="Your Full Name" value="<% if (data.name) { %><%- data.name %><% } %>" title="Your Full Name"/>\n          </div>\n        </h1>\n\n        <h2> Bio </h2>\n\n        <div class="form-group">\n          <label for="title" class="col-md-3 control-label">Title</label>\n          <div class="col-md-9">\n            <input type="text" class="form-control" id="title" name="title" placeholder="Title" value="<% if (data.title) { %><%- data.title %><% } %>"/>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="company" class="col-md-3 control-label">Agency</label>\n          <div class="col-md-9">\n            <input type="hidden" id="company" name="company" style="width: 100%"/>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="location" class="col-md-3 control-label">Location</label>\n          <div class="col-md-9">\n            <input type="hidden" id="location" name="location" style="width: 100%"/>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="bio" class="col-md-3 control-label">A brief public biography</label>\n          <div class="col-md-9">\n            <div class="markdown-edit"></div>\n          </div>\n        </div>\n\n        <h2> Account Information </h2>\n\n        <div class="form-group">\n          <label for="profile-email" class="col-md-3 control-label">Email</label>\n          <div class="col-md-9">\n            <input type="text" class="form-control" id="profile-email" name="email"\n              placeholder="Email" value="<% if (email) { %><%- email.email %><% } %>">\n            <div id="email-update-alert" class="alert alert-warning" style="display:none;"></div>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <% if (login.oauth.length > 0) { %>\n          <label for="services" class="col-md-3 control-label">Connected Accounts</label>\n          <div class="col-md-9" id="services">\n            <form class="form-horizontal" role="form">\n            <% _.each(login.oauth, function (a) { %>\n              <div class="form-group">\n                <div class="col-xs-8 col-sm-9 col-md-9">\n                  <img src="<%= login.config[a].image %>" alt="<%= login.config[a].name %>" style="height: 30px"/>\n                </div>\n                <div class="col-xs-4 col-sm-3 col-md-3">\n                  <% if (_.contains(data.auths, a)) { %>\n                  <a href="#" class="btn btn-danger btn-sm removeAuth pull-right" data-service="<%= a %>"><span class="fa fa-remove"></span> Disconnect</a>\n                  <% } else { %>\n                  <a href="<%= login.config[a].endpoint %>" class="btn btn-success btn-sm pull-right"><span class="fa fa-plus"></span> Connect</a>\n                  <% } %>\n                  <!-- <%= login.config[a].name %> -->\n                </div>\n              </div>\n            <% }); %>\n          </div>\n          <% } %>\n        </div>\n        <div class="form-group">\n          <div class="col-md-offset-3 col-md-9">\n            <div class="pull-right">\n              <a href="#" class="btn btn-c0" id="profile-cancel">Discard Changes</a>\n\n              <button id="submit" type="submit" class="btn btn-c2" disabled="disabled" data-loading-text="<i class=\'fa fa-spinner fa-spin\'></i> Saving..." data-success-text="Saved!" data-fail-text="Save Failed.">Save Profile</button>\n            </div>\n          </div>\n        </div>\n\n      </form>\n    </div>\n    <% } else { %> <!-- not in edit mode -->\n    <div class="row">\n      <div class="col-md-9 sm-nopadding md-nopadding">\n        <div class="box box-main">\n          <h1><% if (data.name) { %><%- data.name %><% } else { %><%- data.username %><% } %></h1>\n\n          <div class="profile-jobtitle"><% if (data.title) { %><i class="fa fa-briefcase"></i> <span class="box-icon-text"><%- data.title %></span><% } %></div>\n          <div class="profile-company"><% if (data.agency) { %><i class="icon-library"></i> <span class="box-icon-text"><%- data.agency.tag.name %></span><% } %></div>\n          <div class="profile-location"><% if (data.location) { %><span class="fa fa-map-marker"></span> <span class="box-icon-text"><%- data.location.tag.name %></span><% } %></div>\n\n          <div class="profile-bio box-pad-t">\n            <% if (data.bioHtml) { %><%= data.bioHtml %><% } else { %>This person doesn\'t have a bio yet.<% } %>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-3 sm-nopadding md-nopadding padding-left-none">\n        <div class="box padding-none">\n<!--\n          <div class="navbar-side like-row border-bottom">\n            <a href="#" id="like-button" class="like-button">\n              <i id="like-button-icon" class="fa fa-star-o fa-lg gold"></i>\n            </a>\n            <span class="like-number" id="like-number"><%- data.likeCount %></span>\n            <span class="like-plural" id="like-text" data-plural="followers" data-singular="follower">followers</span>\n          </div>\n-->\n          <div class="navbar-side <% if (data.isOwner || user.isAdmin) { %>border-bottom<% } %>">\n            <ul class="nav nav-pills nav-stacked">\n              <li>\n                <a href="#" id="email"><i class="fa fa-envelope-o"></i> <span class="box-icon-text">Share</span></a>\n              </li>\n              <% if (data.isOwner || user.isAdmin) { %>\n              <li>\n                <a href="/api/event/ical/"><span class="fa fa-calendar"></span> <span class="box-icon-text">Calendar</span></a>\n              </li>\n            </ul>\n          </div>\n          <div class="navbar-side">\n              <ul class="nav nav-pills nav-stacked">\n              <li>\n                <% if (login.profile.edit === true) { %>\n                <a href="/profile/<%- data.id %>/edit" class="link-backbone"><i class="fa fa-pencil"></i> <span class="box-icon-text">Edit Profile</span></a>\n                <% } else if (login.profile.editUrl) { %>\n                <a href="<%= login.profile.editUrl %>" target="_blank"><i class="fa fa-pencil"></i> <span class="box-icon-text">Edit Profile</span></a>\n                <% } %>\n              </li>\n              <% } %>\n            </ul>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <% if (data.isOwner) { %>\n    <div class="box">\n      <div class="box-pad-lr border-bottom">\n        <h2>Account Information</h2>\n      </div>\n\n      <div class="box-pad-lr box-pad-t">\n        <div class="row">\n          <div class="col-xs-3 col-sm-3 col-md-3">\n            Email<% if (data.emails.length > 1) { %>s<% }%>:\n          </div>\n          <div class="col-xs-9 col-sm-9 col-md-9">\n            <% for (var e = 0; e < data.emails.length; e++) { %>\n              <% if (data.emails[e].isPrimary) { %>x<% } %>\n              <%- data.emails[e].email %><br/>\n            <% } %>\n            <% if (data.emails.length == 0) { %>\n            No email addresses\n            <% } %>\n          </div>\n        </div>\n\n        <% if (login.oauth.length > 0) { %>\n        <div class="row">\n          <div class="col-xs-3 col-sm-3 col-md-3">\n            Connected Accounts:\n          </div>\n          <div class="col-xs-9 col-sm-9 col-md-9">\n            <% if (data.auths.length === 0) { %>\n              No connected accounts.\n            <% } %>\n            <% _.each(login.oauth, function (a) { %>\n              <% if (_.contains(data.auths, a)) { %>\n              <div>\n                <%= login.config[a].name %>\n                <span class="label label-success">Connected</span>\n              </div>\n              <% } %>\n            <% }); %>\n          </div>\n        </div>\n        <% } %>\n      </div>\n    </div>\n    <% } %>\n\n    <% if (ui.project.show) { %>\n    <div class="box">\n      <div class="box-pad-lr border-bottom">\n        <h2><span data-i18n="ProjectPlural">Projects</span></h2>\n      </div>\n      <div class="box-pad-lr box-pad-t">\n        <div class="project-activity-wrapper"></div>\n      </div>\n    </div>\n    <% } %>\n\n    <div class="box">\n      <div class="box-pad-lr border-bottom">\n        <h2><span data-i18n="TaskPlural">Opportunities</span> Volunteered For</h2>\n      </div>\n      <div class="box-pad-lr box-pad-t">\n        <div class="task-activity-wrapper"></div>\n      </div>\n    </div>\n\n    <div class="box">\n      <div class="box-pad-lr border-bottom">\n        <h2><span data-i18n="TaskPlural">Opportunities</span> Created</h2>\n      </div>\n      <div class="box-pad-lr box-pad-t">\n        <div class="task-createdactivity-wrapper"></div>\n      </div>\n    </div>\n\n    <% } %> <!-- /edit check -->\n\n  </div>\n</div>\n';


},{}],66:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),UIConfig=require("../../../../config/ui.json"),async=require("async"),ActTemplate=require("../templates/profile_activity_template.html"),ProfileActivityView=Backbone.View.extend({events:{"click .activity-link":"link"},initialize:function(t){this.options=t},render:function(){var t=this.options.data.sort(function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)}),e={ui:UIConfig,target:this.options.target,targetFriendly:i18n.t(this.options.target),targetsFriendly:i18n.t(this.options.target+"Plural"),targetCapitalized:this.options.target.charAt(0).toUpperCase()+this.options.target.slice(1),handle:this.options.handle,data:t,count:{}};for(var i in this.options.data)_.isUndefined(e.count[this.options.data[i].state])?e.count[this.options.data[i].state]=1:e.count[this.options.data[i].state]++;var n=_.template(ActTemplate)(e);return this.$el.html(n),this.$el.i18n(),this},link:function(t){t.preventDefault&&t.preventDefault(),Backbone.history.navigate(this.options.target+"s/"+$(t.currentTarget).data("id"),{trigger:!0})},cleanup:function(){removeView(this)}});module.exports=ProfileActivityView;


},{"../../../../config/ui.json":116,"../../../../mixins/utilities":128,"../templates/profile_activity_template.html":61,"async":131,"backbone":133,"underscore":159}],67:[function(require,module,exports){
var async=require("async"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),LoginPasswordView=require("../../../login/views/login_password_view"),ProfileResetTemplate=require("../templates/profile_reset_template.html"),ProfileResetView=Backbone.View.extend({events:{"keyup #rpassword":"checkPassword","blur #rpassword":"checkPassword","submit #form-password-reset":"submitReset"},initialize:function(e){this.options=e,this.data=e.data},render:function(){var e={user:window.cache.currentUser||{}},r=_.template(ProfileResetTemplate)(e);return this.$el.html(r),this.loginPasswordView=new LoginPasswordView({el:this.$(".password-view")}).render(),this.checkValidCode(this.options.action),this},checkPassword:function(){var e=validatePassword(this.token.email,this.$("#rpassword").val()),r=!0;return _.each(e,function(e,s){e===!0?(this.$(".password-rules .success.rule-"+s).show(),this.$(".password-rules .error.rule-"+s).hide()):(this.$(".password-rules .success.rule-"+s).hide(),this.$(".password-rules .error.rule-"+s).show()),r=r&&e}),r},checkValidCode:function(e){var r=this;$.ajax({url:"/api/auth/checkToken/"+e,success:function(e){r.$("#profile-reset-check").hide(),e===!1?r.$("#profile-reset-check-error").show():(r.token=e,r.$("#profile-reset-dialog").show())},error:function(){r.$("#profile-reset-check").hide(),r.$("#profile-reset-check-error").show()}})},submitReset:function(e){var r=this;e.preventDefault&&e.preventDefault();var s=this.checkPassword(),i=$(this.$("#rpassword").parents(".form-group")[0]);if(s!==!0)return i.addClass("has-error"),void $(i.find(".error-password")[0]).show();$(i.find(".error-password")[0]).hide();var o={token:this.options.action,password:this.$("#rpassword").val(),json:!0};r.$("#profile-reset-submit").show(),r.$("#profile-reset-submit-error").hide(),$.ajax({url:"/api/auth/reset/",type:"POST",data:o,success:function(e){r.$("#profile-reset-submit").hide(),e===!1?r.$("#profile-reset-submit-error").show():(Backbone.history.navigate("/",{trigger:!0}),window.cache.userEvents.trigger("user:request:login",{message:"Your password has been reset.  Please log in to continue."}))},error:function(){r.$("#profile-reset-submit").hide(),r.$("#profile-reset-submit-error").show()}})},cleanup:function(){removeView(this)}});module.exports=ProfileResetView;


},{"../../../../mixins/utilities":128,"../../../login/views/login_password_view":54,"../templates/profile_reset_template.html":63,"async":131,"backbone":133,"underscore":159}],68:[function(require,module,exports){
var async=require("async"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),ProfileSettingsTemplate=require("../templates/profile_settings_template.html"),ProfileSettingsView=Backbone.View.extend({events:{},initialize:function(e){this.options=e,this.data=e.data},render:function(){var e={user:window.cache.currentUser||{}},t=_.template(ProfileSettingsTemplate)(e);return this.$el.html(t),this},cleanup:function(){removeView(this)}});module.exports=ProfileSettingsView;


},{"../../../../mixins/utilities":128,"../templates/profile_settings_template.html":64,"async":131,"backbone":133,"underscore":159}],69:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),UIConfig=require("../../../../config/ui.json"),async=require("async"),jqIframe=require("blueimp-file-upload/js/jquery.iframe-transport"),jqFU=require("blueimp-file-upload/js/jquery.fileupload.js"),MarkdownEditor=require("../../../../components/markdown_editor"),marked=require("marked"),TagShowView=require("../../../tag/show/views/tag_show_view"),ProfileTemplate=require("../templates/profile_show_template.html"),EmailTemplate=require("../templates/profile_email_template.html"),Login=require("../../../../config/login.json"),ModalComponent=require("../../../../components/modal"),PAView=require("./profile_activity_view"),EmailFormView=require("../../email/views/profile_email_view"),TagFactory=require("../../../../components/tag_factory"),ProfileShowView=Backbone.View.extend({events:{"submit #profile-form":"profileSubmit","click #profile-save":"profileSave","click .link-backbone":linkBackbone,"click #profile-cancel":"profileCancel","click #like-button":"like","keyup #name, #title, #bio":"fieldModified","click .removeAuth":"removeAuth"},initialize:function(e){this.options=e,this.data=e.data,this.tagFactory=new TagFactory,this.data.newItemTags=[],this.edit=!1,"edit"==this.options.action&&(this.edit=!0),this.data.saved&&(this.saved=!0,this.data.saved=!1)},render:function(){var e={login:Login,data:this.model.toJSON(),user:window.cache.currentUser||{},edit:this.edit,saved:this.saved,ui:UIConfig};e.email=e.data.emails&&e.data.emails.length?e.data.emails[0]:"",e.data.bio&&(e.data.bioHtml=marked(e.data.bio));var t=_.template(ProfileTemplate)(e);return this.$el.html(t),this.$el.i18n(),this.initializeFileUpload(),this.initializeForm(),this.initializeSelect2(),this.initializeLikes(),this.initializeTags(),this.initializePAView(),this.initializeTextArea(),this.updatePhoto(),this.updateProfileEmail(),this},initializeFileUpload:function(){var e=this;$("#fileupload").fileupload({url:"/api/file/create",dataType:"text",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,formData:{type:"image_square"},add:function(t,i){e.$("#file-upload-progress-container").show(),i.submit()},progressall:function(t,i){var a=parseInt(i.loaded/i.total*100,10);e.$("#file-upload-progress").css("width",a+"%")},done:function(t,i){if("iframe text"==i.dataType)var a=JSON.parse(i.result);else var a=JSON.parse($(i.result).text());e.model.trigger("profile:updateWithPhotoId",a[0])},fail:function(t,i){var a=i.errorThrown;e.$("#file-upload-progress-container").hide(),413==i.jqXHR.status&&(a="The uploaded file exceeds the maximum file size."),e.$("#file-upload-alert").html(a),e.$("#file-upload-alert").show()}})},updateProfileEmail:function(){var e=this;$.ajax({url:encodeURI('/api/email/makeURL?email=contactUserAboutProfile&subject=Check Out "'+e.model.attributes.name+'"&profileTitle='+(e.model.attributes.title||"")+"&profileLink="+window.location.protocol+"//"+window.location.host+window.location.pathname+"&profileName="+(e.model.attributes.name||"")+"&profileLocation="+(e.model.attributes.location?e.model.attributes.location.tag.name:"")+"&profileAgency="+(e.model.agency?e.model.agency.name:"")),type:"GET"}).done(function(t){e.$("#email").attr("href",t)})},initializeTags:function(){this.tagView&&this.tagView.cleanup(),this.tagView=new TagShowView({model:this.model,el:".tag-wrapper",target:"profile",targetId:"userId",edit:this.edit,url:"/api/tag/findAllByUserId/"}),this.tagView.render()},initializePAView:function(){this.projectView&&this.projectView.cleanup(),this.taskView&&this.taskView.cleanup(),this.volView&&this.volView.cleanup(),$.ajax("/api/user/activities/"+this.model.attributes.id).done(function(e){this.projectView=new PAView({model:this.model,el:".project-activity-wrapper",target:"project",handle:"project",data:e.projects}),this.projectView.render(),this.taskView=new PAView({model:this.model,el:".task-createdactivity-wrapper",target:"task",handle:"task",data:e.tasks}),this.taskView.render(),this.volView=new PAView({model:this.model,el:".task-activity-wrapper",target:"task",handle:"volTask",data:e.volTasks}),this.volView.render()})},updatePhoto:function(){var e=this;this.model.on("profile:updatedPhoto",function(t){var i="/api/user/photo/"+t.attributes.id;$.get(i,function(){$("#project-header").css("background-image","url('"+i+"')"),$("#file-upload-progress-container").hide(),e.model.toJSON().id==window.cache.currentUser.id&&window.cache.userEvents.trigger("user:profile:photo:save",i)})})},initializeForm:function(){var e=this;$("#topics").on("change",function(t){e.model.trigger("profile:input:changed",t)}),$("#skills").on("change",function(t){e.model.trigger("profile:input:changed",t)}),this.listenTo(e.model,"profile:save:success",function(t){$("#submit").button("success"),e.model.toJSON().id==window.cache.currentUser.id&&window.cache.userEvents.trigger("user:profile:save",t.toJSON());var i=[$("#company").select2("data"),$("#location").select2("data")];e.model.trigger("profile:tags:save",i)}),e.on("newTagSaveDone",function(){tags=[];var t=[];_.each(e.data.newItemTags,function(e){tags.push(e)}),t.push.apply(t,e.$("#tag_topic").select2("data")),t.push.apply(t,e.$("#tag_skill").select2("data")),t.push.apply(t,e.$("#tag_location").select2("data")),t.push.apply(t,e.$("#tag_agency").select2("data")),_.each(t,function(e){e.id!==e.name&&tags.push(e)});var i={};e.model.toJSON().id!==window.cache.currentUser.id&&(i.userId=e.model.toJSON().id),async.forEach(tags,function(t,a){return e.tagFactory.addTag(t,i.userId,"userId",a)},function(t){e.model.trigger("profile:tags:save:success",t)})}),this.listenTo(e.model,"profile:tags:save",function(t){var i=[];i=i.concat(e.$("#tag_topic").select2("data"),e.$("#tag_skill").select2("data"),e.$("#tag_location").select2("data"),e.$("#location").select2("data"),e.$("#tag_agency").select2("data"));var a=function(t,i){return e.model[t]?void $.ajax({url:"/api/tag/"+e.model[t].tagId,type:"DELETE"}).done(function(){return i()}):i()},o=function(t,i){if(!t||!t.id)return i();if(t.tagId)return i();var a={tagId:t.id};e.model.toJSON().id!==window.cache.currentUser.id&&(a.userId=e.model.toJSON().id),$.ajax({url:"/api/tag",type:"POST",data:a}).done(function(){i()})};async.forEach(i,function(t,i){return e.tagFactory.addTagEntities(t,e,i)},function(i){return i?next(i):(t=_.filter(t,function(e){return e&&e.id!==e.name}),void async.each(["agency","location"],a,function(){async.each(t,o,function(){e.trigger("newTagSaveDone")})}))})}),this.listenTo(e.model,"profile:tags:save:success",function(){setTimeout(function(){$("#profile-save, #submit").attr("disabled","disabled")},0),$("#profile-save, #submit").removeClass("btn-primary"),$("#profile-save, #submit").addClass("btn-success"),e.data.saved=!0,Backbone.history.navigate("profile/"+e.model.toJSON().id,{trigger:!0})}),this.listenTo(e.model,"profile:save:fail",function(){$("#submit").button("fail")}),this.listenTo(e.model,"profile:removeAuth:success",function(){e.render()}),this.listenTo(e.model,"profile:input:changed",function(){$("#profile-save, #submit").button("reset"),$("#profile-save, #submit").removeAttr("disabled"),$("#profile-save, #submit").removeClass("btn-success"),$("#profile-save, #submit").addClass("btn-c2")})},initializeLikes:function(){$("#like-number").text(this.model.attributes.likeCount),$("#like-text").text(1===parseInt(this.model.attributes.likeCount)?$("#like-text").data("singular"):$("#like-text").data("plural")),this.model.attributes.like&&($("#like-button-icon").removeClass("fa fa-star-o"),$("#like-button-icon").addClass("fa fa-star"))},initializeSelect2:function(){var e=this,t=function(e){return e.name},i=this.model.toJSON(),a={placeholder:"Select a Location",formatResult:t,formatSelection:t,minimumInputLength:1,data:[location],createSearchChoice:function(e,t){var i=t.map(function(e){return e.value.toLowerCase()});return i.indexOf(e.toLowerCase())>=0?!1:{tagType:"location",id:e,value:e,temp:!0,name:"<b>"+e+"</b> <i>search for this location</i>"}},ajax:{url:"/api/ac/tag",dataType:"json",data:function(e){return{type:"location",q:e}},results:function(e){return{results:e}}}};$("#company").select2({placeholder:"Select an Agency",formatResult:t,formatSelection:t,minimumInputLength:2,ajax:{url:"/api/ac/tag",dataType:"json",data:function(e){return{type:"agency",q:e}},results:function(e){return{results:e}}}}),i.agency&&$("#company").select2("data",i.agency.tag),$("#topics").on("change",function(t){e.model.trigger("profile:input:changed",t)}),$("#skills").on("change",function(t){e.model.trigger("profile:input:changed",t)}),$("#company").on("change",function(t){e.model.trigger("profile:input:changed",t)}),$("#location").select2(a).on("select2-selecting",function(t){var i=(e.$(t.currentTarget),this);t.choice.temp?(this.temp=!0,$("#location").select2("data",t.choice.name),$.get("/api/location/suggest?q="+t.choice.value,function(e){e=_(e).map(function(e){return{id:e.name,text:e.name,name:e.name,unmatched:!0,tagType:"location",data:_(e).omit("name")}}),i.reload=!0,i.open=!0,$("#location").select2({data:e}).select2("open")})):delete this.temp}).on("select2-open",function(){if(!this.reload&&this.open){delete this.open,delete this.temp;var e=$("#location").select2("data");setTimeout(function(){$("#location").select2(a).select2("data",e).select2("open")},0)}else this.reload&&this.open&&delete this.reload}),i.location&&$("#location").select2("data",i.location.tag),$("#location").on("change",function(t){e.model.trigger("profile:input:changed",t)})},initializeTextArea:function(){this.md&&this.md.cleanup(),this.md=new MarkdownEditor({data:this.model.toJSON().bio,el:".markdown-edit",id:"bio",placeholder:"A short biography.",title:"Biography",rows:6}).render()},fieldModified:function(e){this.model.trigger("profile:input:changed",e)},profileCancel:function(e){e.preventDefault(),Backbone.history.navigate("profile/"+this.model.toJSON().id,{trigger:!0})},profileSave:function(e){e.preventDefault(),$("#profile-form").submit()},profileSubmit:function(e){e.preventDefault(),$("#profile-save, #submit").button("loading"),setTimeout(function(){$("#profile-save, #submit").attr("disabled","disabled")},0);var t={name:$("#name").val(),title:$("#title").val(),bio:$("#bio").val()},i=this.model.get("emails")[0],a=this;$("#profile-email").val()!==i.email?$.ajax({url:"/api/useremail/"+i.id,dataType:"json",method:"put",data:{email:$("#profile-email").val()},success:function(){a.model.trigger("profile:save",t)},error:function(){var e="Failed to update your email address. Please verify it                      is a valid email address and try again.";$("#email-update-alert").html(e),$("#email-update-alert").show()}}):this.model.trigger("profile:save",t)},removeAuth:function(e){e.preventDefault&&e.preventDefault();for(var t=$(e.target);!t.hasClass("removeAuth");)t=t.parent();this.model.trigger("profile:removeAuth",t.attr("id"))},like:function(e){e.preventDefault();var t=this,i=$(e.currentTarget).children("#like-button-icon"),a=$("#like-number");i.hasClass("fa-star-o")?(i.removeClass("fa-star-o"),i.addClass("fa fa-star"),a.text(parseInt(a.text())+1),$("#like-text").text(1===parseInt(a.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/likeu/"+t.model.attributes.id}).done(function(){})):(i.removeClass("fa-star"),i.addClass("fa-star-o"),a.text(parseInt(a.text())-1),$("#like-text").text(1===parseInt(a.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/unlikeu/"+t.model.attributes.id}).done(function(){}))},cleanup:function(){this.md&&this.md.cleanup(),this.tagView&&this.tagView.cleanup(),this.projectView&&this.projectView.cleanup(),this.taskView&&this.taskView.cleanup(),this.volView&&this.volView.cleanup(),removeView(this)}});module.exports=ProfileShowView;


},{"../../../../components/markdown_editor":104,"../../../../components/modal":106,"../../../../components/tag_factory":112,"../../../../config/login.json":114,"../../../../config/ui.json":116,"../../../../mixins/utilities":128,"../../../tag/show/views/tag_show_view":84,"../../email/views/profile_email_view":59,"../templates/profile_email_template.html":62,"../templates/profile_show_template.html":65,"./profile_activity_view":66,"async":131,"backbone":133,"blueimp-file-upload/js/jquery.fileupload.js":134,"blueimp-file-upload/js/jquery.iframe-transport":135,"marked":155,"underscore":159}],70:[function(require,module,exports){
module.exports='<form action="" id="project-form">\n  <div class="modal-body">\n    <fieldset>\n      <div class="form-group">\n        <label for="project-form-title"><span data-i18n="Project">Project</span> Title</label>\n        <input type="text" class="project-title-form form-control" id="project-form-title" name="project-form-title" placeholder="Title" data-validate="empty,count100">\n        <span class="help-block error-empty" style="display:none;">You must enter a title.</span>\n        <span class="help-block error-count100" style="display:none;">The title must be less than 100 characters.</span>\n      </div>\n      <div class="form-group">\n        <label for="project-form-description"><span data-i18n="Project">Project</span> Description</label>\n        <div class="markdown-edit"></div>\n        <span class="help-block error-empty" style="display:none;">You must enter a description.</span>\n      </div>\n    </fieldset>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0" data-dismiss="modal">Cancel</button>\n    <input type="submit" class="btn btn-c2 btn-add-project" id="submit" value="Add Project"/>\n  </div>\n</form>\n';


},{}],71:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),MarkdownEditor=require("../../../../components/markdown_editor"),ProjectsCollection=require("../../../../entities/projects/projects_collection"),ProjectFormTemplate=require("../templates/project_new_form_template.html"),ProjectFormView=Backbone.View.extend({events:{"blur #project-form-title":"v","blur #project-form-description":"v","submit #project-form":"post"},render:function(){var e=_.template(ProjectFormTemplate);return this.$el.html(e),this.$el.i18n(),this.initializeTextArea(),this.$(".btn-add-project").val("Add "+i18n.t("Project")),this},v:function(e){return validate(e)},initializeTextArea:function(){this.md&&this.md.cleanup(),this.md=new MarkdownEditor({data:"",el:".markdown-edit",id:"project-form-description",placeholder:"A description of your "+i18n.t("project")+" that explains the focus, objectives, and deliverables.",title:i18n.t("Project")+" Description",rows:6,validate:["empty"]}).render()},post:function(e){e.preventDefault&&e.preventDefault();var t=["#project-form-title","#project-form-description"],r=!1;for(i in t){var o=validate({currentTarget:t[i]});r=r||o}if(r!==!0){var n;n={title:this.$(".project-title-form").val(),description:this.$("#project-form-description").val()},this.collection.trigger("project:save",n)}},cleanup:function(){this.md&&this.md.cleanup(),removeView(this)}});module.exports=ProjectFormView;


},{"../../../../components/markdown_editor":104,"../../../../entities/projects/projects_collection":123,"../../../../mixins/utilities":128,"../templates/project_new_form_template.html":70,"backbone":133,"bootstrap":138,"underscore":159}],72:[function(require,module,exports){
var _=require("underscore"),async=require("async"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),Popovers=require("../../../../mixins/popovers"),BaseController=require("../../../../base/base_controller"),ProjectItemView=require("../views/project_item_view"),ProjectItemCoreMetaView=require("../views/project_item_coremeta_view"),ProjectownerShowView=require("../../../projectowner/show/views/projectowner_show_view"),AttachmentView=require("../../../attachment/views/attachment_show_view"),TaskListController=require("../../../tasks/list/controllers/task_list_controller"),EventListController=require("../../../events/list/controllers/event_list_controller"),CommentListController=require("../../../comments/list/controllers/comment_list_controller"),CommentFormView=require("../../../comments/new/views/comment_form_view"),ModalComponent=require("../../../../components/modal"),ModalAlert=require("../../../../components/modal_alert"),TaskModel=require("../../../../entities/tasks/task_model"),ProjectOpenTasksWarningTemplate=require("../templates/project_open_tasks_warning_template.html"),popovers=new Popovers;Project={},Project.ShowController=BaseController.extend({el:"#container",model:null,events:{"click #like-button":"like","keyup .comment-content":"search","click #tag-save":"tagSave","click #tag-create":"tagCreate","click .tag-delete":"tagDelete","click #project-close":"stateClose","click #project-reopen":"stateReopen","click #editProject":"toggleEditMode","mouseenter .project-people-div":popovers.popoverPeopleOn,"click .project-people-div":popovers.popoverClick},initialize:function(e){var t=this;this.router=e.router,this.id=e.id,this.data=e.data,this.action=e.action,this.model.trigger("project:model:fetch",this.model.id),this.listenTo(this.model,"project:model:fetch:success",function(e){if(t.model=e,"edit"==t.action){var i=this.model.toJSON(),o=i.isOwner;if(o!==!0&&window.cache.currentUser&&window.cache.currentUser.isAdmin===!0&&(o=!0),o!==!0)return void window.cache.userEvents.trigger("user:request:login",{message:"You are not the owner of this project. <a class='link-backbone' href='/projects/"+i.id+"'>View the project instead.</a>",disableClose:!0})}t.initializeItemView()}),this.model.on("project:show:rendered",function(){t.initializeItemCoreMetaView(),t.initializeOwners(),t.initializeItemViewControllers(),t.initializeHandlers(),t.initializeLikes(),t.initializeUI()})},initializeItemView:function(){this.projectShowItemView&&this.projectShowItemView.cleanup(),this.projectShowItemView=new ProjectItemView({model:this.model,action:this.action,data:this.data}).render()},initializeItemCoreMetaView:function(){this.projectShowItemCoreMetaView&&this.projectShowItemCoreMetaView.cleanup(),this.projectShowItemCoreMetaView=new ProjectItemCoreMetaView({model:this.model,action:this.action,data:this.data}).render()},initializeOwners:function(){this.projectownerShowView&&this.projectownerShowView.cleanup(),this.projectownerShowView=new ProjectownerShowView({model:this.model,action:this.action,data:this.data}).render()},initializeItemViewControllers:function(){"edit"!=this.action&&(this.taskListController&&this.taskListController.cleanup(),this.taskListController=new TaskListController({projectId:this.model.id}),this.eventListController&&this.eventListController.cleanup(),this.eventListController=new EventListController({projectId:this.model.id}),this.commentListController&&this.commentListController.cleanup(),this.commentListController=new CommentListController({target:"project",id:this.model.id}),this.attachmentView&&this.attachmentView.cleanup(),this.attachmentView=new AttachmentView({target:"project",id:this.model.attributes.id,action:this.action,data:this.data,owner:this.model.attributes.isOwner,el:".attachment-wrapper"}).render())},initializeLikes:function(){$("#like-number").text(this.model.attributes.likeCount),$("#like-text").text(1===parseInt(this.model.attributes.likeCount)?$("#like-text").data("singular"):$("#like-text").data("plural")),this.model.attributes.like&&($("#like-button-icon").removeClass("fa-star-o"),$("#like-button-icon").addClass("fa fa-star"))},initializeHandlers:function(){this.listenTo(this.model,"project:update:state:success",function(e){"closed"==e.attributes.state?($("#li-project-close").hide(),$("#li-project-reopen").show(),$("#alert-closed").show()):($("#li-project-close").show(),$("#li-project-reopen").hide(),$("#alert-closed").hide())})},initializeUI:function(){popovers.popoverPeopleInit(".project-people-div")},toggleEditMode:function(e){e.preventDefault&&e.preventDefault();var t="";this.action&&"edit"==this.action||(t="/edit"),Backbone.history.navigate("projects/"+this.id+t,{trigger:!0})},stateClose:function(e){e.preventDefault&&e.preventDefault();var t=this,i=t.model.hasOpenTasks(t.taskListController.collection);this.modalAlert&&this.modalAlert.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),this.modalComponent=new ModalComponent({el:"#modal-close",id:"check-close",modalTitle:"Close "+i18n.t("Project")}).render();if(i.hasOpenTasks)var o=_.template(ProjectOpenTasksWarningTemplate)({count:i.count}),r="I Understand and Want to Close This "+i18n.t("Project");else var o="<p>Are you sure you want to close this "+i18n.t("project")+"?  Once the "+i18n.t("project")+" is closed, participants will no longer be able to contribute.</p>",r="Close "+i18n.t("Project");this.modalAlert=new ModalAlert({el:"#check-close .modal-template",modalDiv:"#check-close",content:o,cancel:"Cancel",submit:r,callback:function(){i.hasOpenTasks&&t.model.trigger("project:update:tasks:orphan",t.taskListController.collection),t.model.trigger("project:update:state","closed"),t.initializeItemView()}}).render()},stateReopen:function(e){e.preventDefault&&e.preventDefault(),this.model.trigger("project:update:state","open")},like:function(e){e.preventDefault&&e.preventDefault();var t=$(e.currentTarget).children("#like-button-icon"),i=$("#like-number");t.hasClass("fa-star-o")?(t.removeClass("fa-star-o"),t.addClass("fa fa-star"),i.text(parseInt(i.text())+1),$("#like-text").text(1===parseInt(i.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/like/"+this.model.attributes.id}).done(function(){})):(t.removeClass("fa-star"),t.addClass("fa-star-o"),i.text(parseInt(i.text())-1),$("#like-text").text(1===parseInt(i.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/unlike/"+this.model.attributes.id}).done(function(){}))},cleanup:function(){this.projectShowItemCoreMetaView&&this.projectShowItemCoreMetaView.cleanup(),this.taskListController&&this.taskListController.cleanup(),this.eventListController&&this.eventListController.cleanup(),this.commentListController&&this.commentListController.cleanup(),this.projectShowItemView&&this.projectShowItemView.cleanup(),this.projectownerShowView&&this.projectownerShowView.cleanup(),this.attachmentView&&this.attachmentView.cleanup(),removeView(this)}}),module.exports=Project.ShowController;


},{"../../../../base/base_controller":101,"../../../../components/modal":106,"../../../../components/modal_alert":107,"../../../../entities/tasks/task_model":124,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../../../attachment/views/attachment_show_view":23,"../../../comments/list/controllers/comment_list_controller":33,"../../../comments/new/views/comment_form_view":40,"../../../events/list/controllers/event_list_controller":41,"../../../projectowner/show/views/projectowner_show_view":79,"../../../tasks/list/controllers/task_list_controller":88,"../templates/project_open_tasks_warning_template.html":75,"../views/project_item_coremeta_view":76,"../views/project_item_view":77,"async":131,"backbone":133,"underscore":159}],73:[function(require,module,exports){
module.exports='<div id="project-coremeta-show" class="coremeta-form-toggle">\n\n    <h1><%= data.title %></h1>\n\n    <div class="project-description">\n      <%= data.descriptionHtml %>\n    </div>\n\n\n</div> <!-- /main-section -->\n<div id="project-coremeta-form" class="coremeta-form-toggle coremeta-admin">\n  <div class="row">\n    <div class="col-md-12">\n      <form role="form">\n\n        <div class="alert alert-success" id="project-coremeta-success" style="display: none;">\n          Your <span data-i18n="project">project</span> has been successfully updated!\n          <a class="close" data-dismiss="alert" href="#" aria-hidden="true">&times;</a>\n        </div>\n\n        <!-- RIGHT MAIN BAR -->\n        <div class="form-group">\n          <h2 class="box-pad-t"><span data-i18n="Project">Project</span> Title</h2>\n          <input id="project-edit-form-title" class="form-control input-lg" value="<%= data.title %>" type="text" data-validate="empty,count100" title="Title"/>\n          <span class="help-block error-empty" style="display:none;">You must enter a <span data-i18n="project">project</span> title.</span>\n          <span class="help-block error-count100" style="display:none;">Your title must be less than 100 characters.</span>\n        </div>\n        <div class="form-group">\n          <h2 class="box-pad-t"><span data-i18n="Project">Project</span> Description</h2>\n          <div class="markdown-edit">\n          </div>\n          <span class="help-block error-empty" style="display:none;">You must enter a <span data-i18n="project">project</span> description.</span>\n        </div>\n      </form>\n    </div>\n  </div>\n  <div class="row">\n    <div class="col-md-12 form-group">\n\n      <div class="pull-right coremeta-admin" id="project-coremeta-buttons">\n          <button class="btn btn-c0" id="coremeta-view">Discard Changes</button>\n          <button class="btn btn-c2" id="coremeta-save">Save <span data-i18n="Project">Project</span></button>\n      </div>\n\n    </div>\n  </div>\n</div>\n';


},{}],74:[function(require,module,exports){
module.exports='<!-- ALERTS -->\n<div class="alert alert-danger" id="alert-closed" style="<% if (data.state != \'closed\') { %>display: none;<% } %>">This <span data-i18n="project">project</span> is <strong>closed</strong>.  It is no longer active, and no more modifications may be made.</div>\n\n<div class="row">\n  <div class="col-sm-4 col-md-4 col-lg-4 project-sidebar md-nopadding-right sm-nopadding">\n    <!-- LEFT SIDEBAR -->\n\n    <div class="row">\n      <div class="col-md-12 box project-header-wrapper">\n        <% if (data.coverId) { %>\n        <div id="project-header" style="background-image:url(\'/api/file/get/<%= data.coverId %>\');">\n        <% } else { %>\n        <div id="project-header" style="background-image:url(\'/images/project_default.png\');">\n        <% } %>\n          <div class="btn btn-c2 fileinput-button" <% if (!(data.isOwner || user.isAdmin) || !edit) { %>style="display:none;"<% } %>>\n            <i class="fa fa-camera fa-lg" title="Change Cover Photo" id="fileupload-icon"></i>\n            <input id="fileupload" type="file" name="files[]" title="Change Cover Photo">\n          </div>\n        </div>\n        <div id="file-upload-progress-container" style="display: none;" class="progress progress-striped active">\n          <div id="file-upload-progress" class="progress-bar" style="width: 0"></div>\n        </div>\n        <div class="file-upload-alert alert alert-warning" style="display:none;">\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class="col-sm-8 col-md-8 col-lg-8 md-nopadding sm-nopadding">\n\n    <!-- RIGHT MAIN BAR -->\n    <div class="row">\n      <div class="col-sm-8 col-md-9 sm-nopadding">\n        <div class="main-section">\n          <div class="box box-main" id="project-coremeta-wrapper">\n          </div>\n        </div>\n      </div>\n      <div class="col-sm-4 col-md-3 padding-left-none sm-nopadding">\n        <div class="box padding-none">\n\n          <div class="navbar-side like-row border-bottom">\n            <% if (user) { %>\n            <button id="like-button" class="btn btn-link like-button" title="Click to Like or Unlike">\n            <% } else { %>\n            <span class="like-button">\n            <% } %>\n              <i id="like-button-icon" class="fa fa-star-o fa-lg gold"></i>\n            <% if (user) { %>\n            </button>\n            <% } else { %>\n            </span>\n            <% } %>\n            <span class="like-number" id="like-number"><%- data.likeCount %></span>\n            <span class="like-plural" id="like-text" data-plural="likes" data-singular="like">likes</span>\n          </div>\n          <div class="navbar-side <% if (data.isOwner || user.isAdmin) { %>border-bottom<% } %>">\n            <ul class="nav nav-pills nav-stacked">\n              <li>\n                <a href="#" id="email"><i class="fa fa-envelope-o"></i> <span class="box-icon-text">Share</span></a>\n              </li>\n              <li>\n                <a href="webcal://<%- hostname %>/api/event/ical/<%- data.id %>"><span class="fa fa-calendar"></span> <span class="box-icon-text">Calendar</span></a>\n              </li>\n            </ul>\n          </div>\n          <% if (data.isOwner || user.isAdmin) { %>\n          <div class="navbar-side">\n            <div id="modal-close"></div>\n            <ul class="nav nav-pills nav-stacked">\n              <li>\n                <a href="#" id="editProject"><i class="fa fa-pencil"></i> <span class="box-icon-text">Edit <span data-i18n="Project">Project</span></span></a>\n              </li>\n              <% if ( !edit ) { %>\n              <li id="li-project-close" style="<% if (data.state == \'closed\') { %>display: none;<% } %>">\n                <a href="#" id="project-close"><i class="fa fa-times-circle"></i> <span class="box-icon-text">Close <span data-i18n="Project">Project</span></span></a>\n              </li>\n              <li id="li-project-reopen" style="<% if (data.state != \'closed\') { %>display: none;<% } %>">\n                <a href="#" id="project-reopen"><i class="fa fa-share"></i> <span class="box-icon-text">Reopen <span data-i18n="Project">Project</span></span></a>\n              </li>\n              <% } %>\n              <!--\n              <li>\n                <a href="#" id="project-delete"><i class="fa fa-trash-o"></i> <span class="box-icon-text">Delete <span data-i18n="Project">Project</span></span></a>\n              </li>\n              -->\n            </ul>\n          </div>\n          <% } %>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>\n<div class="row">\n\n  <div class="col-sm-5 col-md-4 md-nopadding-right sm-nopadding">\n\n    <div class="row">\n      <div class="col-md-12 box">\n        <div class="box-main tag-wrapper">\n        </div>\n      </div>\n    </div>\n\n    <% if (!(data.isOwner || user.isAdmin) || !edit) { %>\n    <div class="row">\n      <div class="col-md-12 box">\n        <div class="attachment-wrapper">\n        </div>\n      </div>\n    </div>\n    <% } %>\n\n  </div>\n  <div class="col-sm-7 col-md-8 md-nopadding-right sm-nopadding">\n\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <div class="box" id="projectowner-wrapper">\n        </div>\n      </div>\n    </div>\n\n    <% if (!(data.isOwner || user.isAdmin) || !edit) { %>\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <!-- BEGIN EVENTS -->\n        <div class="box" id="event-list-wrapper">\n        </div>\n        <!-- END EVENTS -->\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <!-- BEGIN TASKS -->\n        <div class="wrapper-addTask"></div>\n        <div class="box" id="task-list-wrapper" data-project-id="<%= data.id %>">\n        </div>\n        <!-- END TASKS -->\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n\n        <div class="box comment-list-wrapper" style="clear: both;">\n        </div>\n      </div>\n    </div>\n\n    <% } %> <!-- end of check for edit mode -->\n\n    <!-- add a space at the bottom of the page until we figure out what goes here -->\n    <div style="height: 50px;">\n    </div>\n\n  </div>\n</div>\n';


},{}],75:[function(require,module,exports){
module.exports='<div>\n  <p>This <span data-i18n="project">project</span> has <strong><%- count %></strong> open, or in progress, opportunities. Closing this <span data-i18n="project">project</span> will cause any such opportunities to be orphaned (no longer associated with any <span data-i18n="project">project</span>).</p>\n\n  <p>Are you sure you wish to proceed?</p>\n\n</div>\n';


},{}],76:[function(require,module,exports){
var _=require("underscore"),async=require("async"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),marked=require("marked"),MarkdownEditor=require("../../../../components/markdown_editor"),Popovers=require("../../../../mixins/popovers"),ModalComponent=require("../../../../components/modal"),ProjectItemCoreMetaTemplate=require("../templates/project_item_coremeta_template.html"),ProjectItemCoreMetaView=Backbone.View.extend({el:"#project-coremeta-wrapper",model:null,events:{"blur #project-edit-form-title":"v","blur #project-edit-form-description":"v","click #coremeta-save":"saveCoreMeta","click #coremeta-view":"viewProject"},initialize:function(e){var t=this;this.options=e,this.data=e.data,this.action=e.action,this.user=window.cache.currentUser||{},this.edit=!1,this.options.action&&"edit"==this.options.action&&(this.edit=!0),this.model.on("project:coremeta:show:rendered",function(){t.initializeTextArea(),t.initializeToggledElements()}),this.model.on("project:save:success",function(){t.render(),$("#project-coremeta-success").show(),t.viewProject({})}),this.model.on("project:tags:save:success",function(){t.render(),$("#project-coremeta-success").show(),t.viewProject({})})},render:function(){var e={data:this.model.toJSON()};e.data.descriptionHtml=marked(e.data.description||"");var t=_.template(ProjectItemCoreMetaTemplate)(e);return this.$el.html(t),this.$el.i18n(),this.model.trigger("project:coremeta:show:rendered",e),this},initializeTextArea:function(){this.md&&this.md.cleanup(),this.md=new MarkdownEditor({data:this.model.toJSON().description,el:".markdown-edit",id:"project-edit-form-description",title:"Project Description",rows:6,validate:["empty"]}).render()},initializeToggledElements:function(){var e=this;(this.model.attributes.isOwner||this.user.isAdmin)&&this.edit?(e.$("#project-coremeta-form").show(),e.$("#project-coremeta-show").hide()):e.$(".coremeta-admin").hide()},v:function(e){return validate(e)},saveCoreMeta:function(e){if(e.preventDefault&&e.preventDefault(),!this.model.attributes.isOwner&&!this.user.isAdmin&&this.edit)return!1;var t=["#project-edit-form-title","#project-edit-form-description"],i=!1;for(var r in t){var o=validate({currentTarget:t[r]});i=i||o}if(!i){var a=this,s=(a.model.attributes.id,a.$("#project-edit-form-title").val()),n=a.$("#project-edit-form-description").val(),c={title:s,description:n};a.model.trigger("project:tag:update:start"),a.model.trigger("project:model:update",c)}},viewProject:function(e){e.preventDefault&&e.preventDefault(),Backbone.history.navigate("projects/"+this.model.attributes.id,{trigger:!0})},cleanup:function(){this.md&&this.md.cleanup(),removeView(this)}});module.exports=ProjectItemCoreMetaView;


},{"../../../../components/markdown_editor":104,"../../../../components/modal":106,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../templates/project_item_coremeta_template.html":73,"async":131,"backbone":133,"marked":155,"underscore":159}],77:[function(require,module,exports){
var jqIframe=require("blueimp-file-upload/js/jquery.iframe-transport"),jqFU=require("blueimp-file-upload/js/jquery.fileupload.js"),select2=require("select2"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),async=require("async"),ProjectShowTemplate=require("../templates/project_item_view_template.html"),TagShowView=require("../../../tag/show/views/tag_show_view"),TagFactory=require("../../../../components/tag_factory"),ProjectShowView=Backbone.View.extend({el:"#container",events:{},initialize:function(t){this.options=t,this.data=t.data,this.action=t.action,this.edit=!1,this.options.action&&"edit"==this.options.action&&(this.edit=!0),this.tagFactory=new TagFactory,this.data.newItemTags=[]},render:function(){var t,e={hostname:window.location.hostname,data:this.model.toJSON(),user:window.cache.currentUser||{},edit:this.edit};return t=_.template(ProjectShowTemplate)(e),this.$el.html(t),this.$el.i18n(),this.initializeToggle(),this.initializeTagFactory(),this.initializeFileUpload(),this.initializeTags(),this.updatePhoto(),this.updateProjectEmail(),this.model.trigger("project:show:rendered"),this},updatePhoto:function(){this.listenTo(this.model,"project:updated:photo:success",function(t){var e,i=t.toJSON();i.coverId&&(e="/api/file/get/"+i.coverId,$("#project-header").css("background-image","url("+e+")")),$("#file-upload-progress-container").hide()})},updateProjectEmail:function(){var t=this;$.ajax({url:encodeURI('/api/email/makeURL?email=contactUserAboutProject&subject=Check Out "'+t.model.attributes.title+'"&projectTitle='+t.model.attributes.title+"&projectLink="+window.location.protocol+"//"+window.location.host+window.location.pathname+"&projectDescription="+(t.model.attributes.description||"")),type:"GET"}).done(function(e){t.$("#email").attr("href",e)})},initializeTagFactory:function(){var t=this;this.listenTo(t.model,"project:tag:update:start",function(){var e=[];e=e.concat(t.$("#tag_topic").select2("data"),t.$("#tag_skill").select2("data"),t.$("#tag_location").select2("data"),t.$("#tag_agency").select2("data")),async.forEach(e,function(e,i){return t.tagFactory.addTagEntities(e,t,i)},function(e){return e?next(e):void t.trigger("newTagSaveDone")})}),t.on("newTagSaveDone",function(){tags=[];var e=[];_.each(t.data.newItemTags,function(t){tags.push(t)}),e.push.apply(e,t.$("#tag_topic").select2("data")),e.push.apply(e,t.$("#tag_skill").select2("data")),e.push.apply(e,t.$("#tag_location").select2("data")),e.push.apply(e,t.$("#tag_agency").select2("data")),_.each(e,function(t){t.id!==t.name&&tags.push(t)});var i=t.model.attributes.id;async.forEach(tags,function(e,a){return t.tagFactory.addTag(e,i,"projectId",a)},function(e){t.model.trigger("project:tags:save:success",e)})})},initializeToggle:function(){this.$("#editProject").find(".box-icon-text").html(this.edit?"View "+i18n.t("Project"):"Edit "+i18n.t("Project"))},initializeTags:function(){this.tagView=new TagShowView({model:this.model,el:".tag-wrapper",target:"project",targetId:"projectId",edit:this.edit,url:"/api/tag/findAllByProjectId/"}),this.tagView.render()},initializeFileUpload:function(){var t=this;$("#fileupload").fileupload({url:"/api/file/create",dataType:"text",acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,formData:{type:"image"},add:function(e,i){t.$("#file-upload-progress-container").show(),i.submit()},progressall:function(e,i){var a=parseInt(i.loaded/i.total*100,10);t.$("#file-upload-progress").css("width",a+"%")},done:function(e,i){if("iframe text"==i.dataType)var a=JSON.parse(i.result);else var a=JSON.parse($(i.result).text());t.model.trigger("project:update:photoId",a[0])},fail:function(e,i){var a=i.errorThrown;t.$("#file-upload-progress-container").hide(),413==i.jqXHR.status&&(a="The uploaded file exceeds the maximum file size."),t.$(".file-upload-alert").html(a),t.$(".file-upload-alert").show()}})},cleanup:function(){this.tagView&&this.tagView.cleanup(),removeView(this)}});module.exports=ProjectShowView;


},{"../../../../components/tag_factory":112,"../../../../mixins/utilities":128,"../../../tag/show/views/tag_show_view":84,"../templates/project_item_view_template.html":74,"async":131,"backbone":133,"blueimp-file-upload/js/jquery.fileupload.js":134,"blueimp-file-upload/js/jquery.iframe-transport":135,"select2":157,"underscore":159}],78:[function(require,module,exports){
module.exports='<div class="box-pad-lr border-bottom">\n  <h2><span data-i18n="ProjectOwnerPlural">Project Owners</span>\n    <button id="owner-edit" name="owner-edit" class="btn btn-c0 btn-sm file-add owner-form-toggle">Add Owners</button>\n    <button id="owner-cancel" name="owner-cancel" class="btn btn-c0 btn-sm file-add owner-form-toggle">Cancel</button>\n    <button id="owner-save" name="owner-save" class="btn btn-c2 btn-sm file-add owner-form-toggle">Submit</button>\n  </h2>\n</div>\n\n<div id="project-owners-form" class="box-pad-lr box-pad-t owner-form-toggle">\n  <form class="" role="form">\n    <div class="form-group">\n      <input style="width: 100%" id="owners" name="owners" type="hidden" value="Add Owner"/>\n    </div>\n  </form>\n</div>\n\n<div id="project-owners-show" class="box-pad-lr box-pad-t owner-form-toggle">\n  <% if (data.owners) { %>\n    <% for (var i = 0; i < data.owners.length; i++) { %>\n    <div class="project-people-div" data-userid="<%= data.owners[i].userId %>">\n      <img src="/api/user/photo/<%= data.owners[i].userId %>" class="project-people" alt="<%= data.owners[i].name %>"/>\n      <% if ((data.isOwner || user.isAdmin) && (data.owners[i].userId != cache.currentUser.id) && data.edit) { %>\n      <a href="#" class="delete-projectowner project-owner-delete fa fa-times"  id="delete-projectowner-<%= data.owners[i].id %>" data-uid="<%= data.owners[i].userId %>" data-poid="<%= data.owners[i].id %>">\n      </a>\n      <% } %>\n    </div>\n    <% } %>\n  <% } %>\n</div>\n';


},{}],79:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),async=require("async"),Popovers=require("../../../../mixins/popovers"),ModalComponent=require("../../../../components/modal"),ProjectownerShowTemplate=require("../templates/projectowner_show_template.html"),ProjectownerShowView=Backbone.View.extend({el:"#projectowner-wrapper",model:null,events:{"click button.owner-form-toggle":"toggleOwners","click #owner-save":"saveOwners","click #owner-cancel":"initializeOwnerSelect2","click .delete-projectowner":"removeOwner"},initialize:function(e){var t=this;this.options=e,this.data=e.data,this.action=e.action,this.user=window.cache.currentUser||{},this.options.action&&"edit"==this.options.action&&(this.edit=!0),this.model.on("projectowner:show:rendered",function(){t.initializeOwnerSelect2()}),this.model.on("project:update:owners:success",function(){if(t.render(),_.isUndefined(e)){var e=new Popovers;e.popoverPeopleInit(".project-people-div")}})},render:function(){var e,t={data:this.model.toJSON(),user:this.user};return t.data.edit=this.edit,e=_.template(ProjectownerShowTemplate)(t),this.$el.html(e),this.$el.i18n(),this.model.trigger("projectowner:show:rendered",t),this},initializeOwnerSelect2:function(){var e=this;if((this.model.attributes.isOwner||this.user.isAdmin)&&this.edit){var t=function(e){return e.name},r=this.model.attributes.owners||[],n=_.map(r,function(e){return e.userId})||[];e.$("#owners").select2({placeholder:"Add "+i18n.t("Project")+" Owners",multiple:!0,formatResult:t,formatSelection:t,minimumInputLength:1,ajax:{url:"/api/ac/user",dataType:"json",data:function(e){return{q:e}},results:function(t){return{results:_.filter(t,function(e){return _.indexOf(n,e.id)>=0?!1:!0},e)}}}}),e.$("#owner-edit").show()}else e.$("#owner-edit").hide();e.$("#project-owners-form").hide(),e.$("#project-owners-show").show(),e.$("#owner-save").hide(),e.$("#owner-cancel").hide()},toggleOwners:function(){return this.model.attributes.isOwner||this.user.isAdmin||!this.edit?void $(".owner-form-toggle").toggle(400):!1},saveOwners:function(e){function t(e,t){$.ajax({url:"/api/projectowner/",type:"POST",data:{projectId:n,userId:e},success:function(t){var r=t.id;i.push({id:r,userId:e})}}).done(function(){t()})}if(e.preventDefault&&e.preventDefault(),!this.model.attributes.isOwner&&!this.user.isAdmin&&this.edit)return!1;var r=this,n=r.model.attributes.id,i=this.model.attributes.owners||[],o=$("#owners").select2("data")||[],s=_.map(o,function(e){return e.id})||[];async.each(s,t,function(){r.model.trigger("projectowner:show:changed",i)}),$("#owners").select2("data",[])},removeOwner:function(e){e.stopPropagation()&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),$(e.currentTarget).off("mouseenter"),$(".popover").remove();var t=$(e.currentTarget).data("poid"),r=$(e.currentTarget).data("uid"),n=this;"undefined"!=typeof cache&&r!==cache.currentUser.id&&$.ajax({url:"/api/projectowner/"+t,type:"DELETE"}).done(function(){});var i=this.model.attributes.owners||[],o=_.filter(i,function(e){return e.id!==t},this)||[];n.model.trigger("projectowner:show:changed",o)},cleanup:function(){removeView(this)}});module.exports=ProjectownerShowView;


},{"../../../../components/modal":106,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../templates/projectowner_show_template.html":78,"async":131,"backbone":133,"underscore":159}],80:[function(require,module,exports){
module.exports='<form role="form" action="" id="tag-form">\n  <div class="modal-body">\n    <fieldset>\n      <div class="form-group">\n        <label for="tag-form-type">Tag Type</label>\n        <select id="tag-form-type" name="tag-form-type" class="form-control">\n          <% for (var i = 0; i < tags.length; i++) { %>\n          <option value="<%- tags[i].type %>"><%- tags[i].name %></option>\n          <% } %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label for="tag-form-name">\n          Tag Name\n        </label>\n        <input type="text" class="form-control" id="tag-form-name" name="tag-form-name" placeholder="Tag Name" data-validate="empty,count100"/>\n        <span class="help-block error-empty" style="display:none;">You must enter a tag name.</span>\n        <span class="help-block error-count100" style="display:none;">Tags must be less than 100 characters in length.</span>\n      </div>\n    </fieldset>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0" data-dismiss="modal">Cancel</button>\n    <input type="submit" class="btn btn-c2" id="submit" value="Create Tag"/>\n  </div>\n</form>\n';


},{}],81:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),TagFormTemplate=require("../templates/tag_new_form_template.html"),TagFormView=Backbone.View.extend({events:{"blur #tag-form-name":"v","submit #tag-form":"post"},initialize:function(t){this.tags=t.tags,this.target=t.target,this.options=t},render:function(){var t={tags:this.tags},e=_.template(TagFormTemplate)(t);return this.$el.html(e),this},v:function(t){return validate(t)},post:function(t){t.preventDefault&&t.preventDefault();var e=["#tag-form-name"],a=!1;for(var r in e){var i=validate({currentTarget:e[r]});a=a||i}if(!a){var n,o=this;n={type:$(t.currentTarget).find("#tag-form-type").val(),name:$(t.currentTarget).find("#tag-form-name").val()},$.ajax({url:"/api/tag/add",type:"POST",data:n}).done(function(t){o.options.model.trigger(o.target+":tag:new",t)})}},cleanup:function(){removeView(this)}});module.exports=TagFormView;


},{"../../../../mixins/utilities":128,"../templates/tag_new_form_template.html":80,"backbone":133,"bootstrap":138,"underscore":159}],82:[function(require,module,exports){
module.exports='<li><%- tag.tag.name %>\n<% if ((data.isOwner || user.isAdmin) && edit) { %>\n<span class="tag-delete fa fa-times" data-id="<%- tag.id %>"></span>\n<% } %>\n</li>\n';


},{}],83:[function(require,module,exports){
module.exports='<% for (var i = 0; i < tags.length; i++) { %>\n<div class="tag-title <%- tags[i][\'class\'] %>" id="<%- tags[i].id %>">\n  <h2><i class="<%- tags[i].icon %>"></i> <span class="box-icon-text"><%- tags[i].plural %></span></h2>\n  <% if ((data.isOwner || user.isAdmin) && edit) { %>\n  <div style=\'margin-bottom: 5px\'>\n    <input type="text" id="tag_<%- tags[i].id.toLowerCase() %>" class="fullwidth" name="tag_<%- tags[i].name.toLowerCase() %>"/>\n  </div>\n  <% } %>\n  <ul class="tags">\n    <li class="tag-empty" id="<%- tags[i][\'class\'] %>-empty">\n      <% if (tags[i][\'class\'] === \'location\') { %>Anywhere<% } else { %>None<% } %>\n    </li>\n  </ul>\n</div>\n<% } %>\n<% if (data.userId) {\n%>\n<div class="tag-title">\n  <h2><i class="fa fa-child "></i> <span class="box-icon-text">Progress</span></h2>\n  <ul class="tags">\n    <li class="tag-empty" id="task-length-empty" style="display: none;">None</li>\n    <li>Published: <%- data.publishedAt ? moment(data.publishedAt).format(\'ddd, MMM D, YYYY\') : \'--\' %></li><br>\n    <li>Assigned: <%- data.assignedAt ? moment(data.assignedAt).format(\'ddd, MMM D, YYYY\') : \'--\' %></li><br>\n    <li>Completed: <%- data.completedAt ? moment(data.completedAt).format(\'ddd, MMM D, YYYY\') : \'--\' %></li>\n  </ul>\n</div>\n<% } %>\n';


},{}],84:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),async=require("async"),ModalComponent=require("../../../../components/modal"),TagConfig=require("../../../../config/tag"),TagFormView=require("../../new/views/tag_new_form_view"),TagTemplate=require("../templates/tag_item_template.html"),TagShowTemplate=require("../templates/tag_show_template.html"),TagFactory=require("../../../../components/tag_factory"),TagShowView=Backbone.View.extend({events:{"click #tag-create":"createTag","click #tag-save":"saveTag","click .tag-delete":"deleteTag"},initialize:function(t){this.options=t,this.model=t.model,this.target=t.target,this.targetId=t.targetId,this.edit=t.edit,this.tagFactory=new TagFactory,this.tags=[];for(var e=0;e<TagConfig[this.target].length;e++)this.tags.push(TagConfig.tags[TagConfig[this.target][e]])},render:function(){var t={data:this.model.toJSON(),tags:this.tags,edit:this.edit,user:window.cache.currentUser||{}},e=_.template(TagShowTemplate)(t);return this.$el.html(e),this.initializeSelect2(),this.initializeTags(),this},initializeSelect2:function(){var t=this;t.tagFactory.createTagDropDown({type:"skill",selector:"#tag_skill",width:"100%",tokenSeparators:[","]}),t.tagFactory.createTagDropDown({type:"topic",selector:"#tag_topic",width:"100%",tokenSeparators:[","]}),t.tagFactory.createTagDropDown({type:"location",selector:"#tag_location",width:"100%"}),t.tagFactory.createTagDropDown({type:"agency",selector:"#tag_agency",width:"100%"}),t.model.trigger("profile:input:changed")},initializeTags:function(){for(var t=this,e={},a={},i=0;i<this.tags.length;i++)e[this.tags[i].type]=this.tags[i].icon,a[this.tags[i].type]=this.tags[i]["class"];var r=function(e){var i={data:t.model.toJSON(),tags:t.tags,tag:e,edit:t.edit,user:window.cache.currentUser||{}},r=_.template(TagTemplate)(i),n=$("."+e.tag.type).children(".tags");n.append(r),$("#"+a[e.tag.type]+"-empty").hide()};$.ajax({url:this.options.url+this.model.id}).done(function(t){for(var e=0;e<t.length;e++)r(t[e])});var n=function(t){return'<i class="'+e[t.type]+'"></i> '+t.name};$("#input-tags").select2({placeholder:"Add tags",multiple:!0,formatResult:n,formatSelection:n,ajax:{url:"/api/ac/tag",dataType:"json",data:function(e){return{type:TagConfig[t.target].join(),q:e}},results:function(t){return{results:t}}}}),this.listenTo(this.model,this.target+":tag:new",function(t){$(".modal").modal("hide");var e=$("#input-tags").select2("data");e.push(t),$("#input-tags").select2("data",e)}),this.listenTo(this.model,this.target+":tag:save",function(t){for(var e=0;e<t.length;e++)t[e].existing||r(t[e]);$("#input-tags").select2("val","")}),this.listenTo(this.model,this.target+":tag:delete",function(t){1==$(t.currentTarget).parent("li").siblings().length&&$(t.currentTarget).parent("li").siblings(".tag-empty").show(),$(t.currentTarget).parent("li").remove()})},createTag:function(t){t.preventDefault&&t.preventDefault();var e=this;_.isUndefined(this.modalComponent)&&(this.modalComponent=new ModalComponent({el:"#container",id:"createTag",modalTitle:"Create Tag"}).render()),_.isUndefined(this.modalComponent)||(this.tagFormView&&this.tagFormView.cleanup(),this.tagFormView=new TagFormView({el:"#createTag .modal-template",model:e.model,tags:e.tags,target:e.target}),this.tagFormView.render())},saveTag:function(t){t.preventDefault&&t.preventDefault();var e=this;$("#tag-save").addClass("disabled");var a=$("#input-tags").select2("data"),i=[],r=function(t,a){var r={tagId:t.id};e.targetId&&(r[e.targetId]=e.model.id),$.ajax({url:"/api/tag",type:"POST",data:r}).done(function(t){i.push(t),a()})};async.each(a,r,function(){for(var t=0;t<i.length;t++)for(var r=0;r<a.length;r++)if(i[t].tagId==a[r].id){i[t].tag=a[r];break}$("#tag-save").removeClass("disabled"),e.model.trigger(e.options.target+":tag:save",i)})},deleteTag:function(t){t.preventDefault&&t.preventDefault();var e=this;$.ajax({url:"/api/tag/"+$(t.currentTarget).data("id"),type:"DELETE"}).done(function(){e.model.trigger(e.options.target+":tag:delete",t)})},cleanup:function(){this.tagFormView&&this.tagFormView.cleanup(),removeView(this)}});module.exports=TagShowView;


},{"../../../../components/modal":106,"../../../../components/tag_factory":112,"../../../../config/tag":115,"../../../../mixins/utilities":128,"../../new/views/tag_new_form_view":81,"../templates/tag_item_template.html":82,"../templates/tag_show_template.html":83,"async":131,"backbone":133,"bootstrap":138,"underscore":159}],85:[function(require,module,exports){
module.exports='<form action="" id="task-edit-form">\n  <div class="form-group">\n    <h2 class="box-pad-t">\n      <span data-i18n="Task">Opportunity</span> Title\n    </h2>\n    <input id="task-title" type="text" placeholder="A short description of the problem." value="<%- data.title %>" class="form-control input-lg validate" data-validate="empty,count100"/>\n    <span class="help-block error-empty" style="display:none;">You must enter a title for this <span data-i18n="task">opportunity</span></span>\n    <span class="help-block error-count100" style="display:none;">The short description of the problem must be less than 100 characters.</span>\n  </div>\n  <div class="form-group">\n    <h2 class="box-pad-t">\n      <span data-i18n="Task">Opportunity</span> Description\n    </h2>\n    <div class="markdown-edit"></div>\n    <span class="help-block error-empty" style="display:none;">You must enter a description for this <span data-i18n="task">opportunity</span></span>\n  </div>\n  <hr />\n\n  <% if (ui.project.show) { %>\n  This <span data-i18n="task">opportunity</span> belongs to the <span data-i18n="project">project</span>:\n  <div class="row">\n    <div class="col-md-12">\n      <input type="hidden" id="projectId" class="task-skills fullwidth" />\n    </div>\n  </div>\n  <% } %>\n\n  <hr/>\n\n  <div class="row">\n    <div class="col-md-12">\n        <span data-i18n="TaskOwner">Task Owner</span>\n        <input style="width: 100%" id="owner" name="owner" type="hidden" value="Edit Owner"/>\n    </div>\n  </div>\n\n  <hr/>\n\n  <div class="task-edit-description">\n    We need\n    <select id="people" class="dropdown">\n      <% _.each(tagTypes[\'task-people\'], function (t) { %>\n      <option value=<%= t.id %> <% if (madlibTags[\'task-people\'] && (madlibTags[\'task-people\'][0].id == t.id)) { %>selected<% } %>><%= t.name %></option>\n      <% }); %>\n    </select>\n\n    to work on an <span data-i18n="task">opportunity</span> about:\n    <div class="row">\n      <div class="col-md-12">\n        <input type="hidden" id="task_tag_topics" class="task-skills fullwidth" />\n      </div>\n    </div>\n\n    <hr />\n\n    The following skills are useful and\n    <select id="skills-required" class="dropdown">\n      <% _.each(tagTypes[\'task-skills-required\'], function (t) { %>\n      <option value=<%= t.id %> <% if (madlibTags[\'task-skills-required\'] && (madlibTags[\'task-skills-required\'][0].id == t.id)) { %>selected<% } %>><%= t.name %></option>\n      <% }); %>\n    </select>\n\n    to complete this <span data-i18n="task">opportunity</span> you should\n    <div class="row">\n      <div class="col-md-12">\n        <input type="hidden" id="task_tag_skills" class="task-skills fullwidth"/>\n      </div>\n    </div>\n\n    <hr />\n\n    The <span data-i18n="task">opportunity</span> will require\n    <select id="time-estimate" class="dropdown">\n      <% _.each(tagTypes[\'task-time-estimate\'], function (t) { %>\n      <option value=<%= t.id %> <% if (madlibTags[\'task-time-estimate\'] && (madlibTags[\'task-time-estimate\'][0].id == t.id)) { %>selected<% } %>><%= t.name %></option>\n      <% }); %>\n    </select>\n\n    of\n    <select id="time-required" class="dropdown">\n      <% _.each(tagTypes[\'task-time-required\'], function (t) { %>\n      <option value=<%= t.id %> <% if (madlibTags[\'task-time-required\'] && (madlibTags[\'task-time-required\'][0].id == t.id)) { %>selected<% } %>><%= t.name %></option>\n      <% }); %>\n    </select>\n\n    work, and must be completed within\n    <select id="length" class="dropdown">\n      <% _.each(tagTypes[\'task-length\'], function (t) { %>\n      <option value=<%= t.id %> <% if (madlibTags[\'task-length\'] && (madlibTags[\'task-length\'][0].id == t.id)) { %>selected<% } %>><%= t.name %></option>\n      <% }); %>\n    </select>\n\n    <hr />\n\n    Participants must be located at:<br/>\n\n    <div class="row">\n      <div class="col-md-12">\n        <input type="hidden" id="task_tag_location" class="task-skills fullwidth"/>\n      </div>\n    </div>\n    <small>Leave empty if people can participate from anywhere</small>\n\n    <hr/>\n\n    Pubished date:<br>\n    <div class="col-md-12 padding-none" id="div-publishedAt">\n      <input id="publishedAt" name="publishedAt" class="form-control timepicker" type="text">\n    </div>\n    Assigned date:<br>\n    <div class="col-md-12 padding-none" id="div-assignedAt">\n      <input id="assignedAt" name="assignedAt" class="form-control timepicker" type="text">\n    </div>\n    Completed date:<br>\n    <div class="col-md-12 padding-none" id="div-completedAt">\n      <input id="completedAt" name="completedAt" class="form-control timepicker" type="text">\n    </div>\n    <div class="clearfix">\n      <hr>\n    </div>\n\n  </div>\n  <div class="row">\n    <div class="col-lg-12">\n      <div class="pull-right box-pad-b">\n        <button class="btn btn-c0" id="task-view">Discard Changes</button>\n        <input type="submit" class="btn btn-c2" data-i18n="[value]SaveTask" value="Save Opportunity"/>\n      </div>\n    </div>\n  </div>\n</form>\n';


},{}],86:[function(require,module,exports){
module.exports='<div class="project-people-div" data-userid="<%= data.userId %>">\n  <img src="/api/user/photo/<%= data.userId %>" class="project-people" alt="<%= data.owner.name %>"/>\n</div>\n<div class="project-people-space">\n  <div class="bar"></div>\n</div>\n<% _.each(data.volunteers, function (v) { %>\n  <div class="project-people-div" data-userid="<%= v.userId %>" data-voluserid="<%= v.userId %>">\n    <img src="/api/user/photo/<%= v.userId %>" class="project-people" alt="<%= v.name %>"/>\n    <a href="#" class="delete-volunteer volunteer-delete fa fa-times"  id="delete-volunteer-<%= v.id %>" data-uid="<%= v.userId %>" data-vid="<%= v.id %>"></a>\n  </div>\n<% }); %>\n';


},{}],87:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utilities=require("../../../../mixins/utilities"),UIConfig=require("../../../../config/ui.json"),async=require("async"),marked=require("marked"),MarkdownEditor=require("../../../../components/markdown_editor"),TaskEditFormTemplate=require("../templates/task_edit_form_template.html"),VolunteerEditFormTemplate=require("../templates/volunteer_edit_form_template.html"),TagFactory=require("../../../../components/tag_factory"),TaskEditFormView=Backbone.View.extend({events:{"blur .validate":"v","click #task-view":"view","submit #task-edit-form":"submit"},initialize:function(t){this.options=t,this.tagFactory=new TagFactory,this.data={},this.data.newTag={},this.initializeListeners(),this.listenTo(this.options.model,"task:update:success",function(t){Backbone.history.navigate("tasks/"+t.attributes.id,{trigger:!0})})},view:function(t){t.preventDefault&&t.preventDefault(),Backbone.history.navigate("tasks/"+this.model.attributes.id,{trigger:!0})},v:function(t){return validate(t)},render:function(){var t,e;this.data={data:this.model.toJSON(),tagTypes:this.options.tagTypes,newTags:[],newItemTags:[],tags:this.options.tags,madlibTags:this.options.madlibTags,ui:UIConfig},e=_.template(VolunteerEditFormTemplate)(this.data),$(this.options.elVolunteer).html(e),$(this.options.elVolunteer).i18n(),t=_.template(TaskEditFormTemplate)(this.data),this.$el.html(t),this.$el.i18n(),this.initializeSelect2(),this.initializeTextArea(),$("#publishedAt").datetimepicker({defaultDate:this.data.data.publishedAt}),$("#assignedAt").datetimepicker({defaultDate:this.data.data.assignedAt}),$("#completedAt").datetimepicker({defaultDate:this.data.data.completedAt})},initializeSelect2:function(){var t=function(t){var e='<div class="select2-result-title">';return e+=t.name||t.title,e+="</div>",_.isUndefined(t.description)||(e+='<div class="select2-result-description">'+marked(t.description)+"</div>"),e};this.$("#projectId").select2({placeholder:"Select a project to associate",multiple:!1,formatResult:t,formatSelection:t,allowClear:!0,ajax:{url:"/api/ac/project",dataType:"json",data:function(t){return{q:t}},results:function(t){return{results:t}}}}),this.data.data.project&&this.$("#projectId").select2("data",this.data.data.project),this.$("#owner").select2({placeholder:"task owner",multiple:!1,formatResult:t,formatSelection:t,allowClear:!1,ajax:{url:"/api/ac/user",dataType:"json",data:function(t){return{q:t}},results:function(t){return{results:t}}}}),this.data.data.owner&&this.$("#owner").select2("data",this.data.data.owner),this.tagFactory.createTagDropDown({type:"skill",selector:"#task_tag_skills",width:"100%",tokenSeparators:[","]}),this.data.madlibTags.skill&&this.$("#task_tag_skills").select2("data",this.data.madlibTags.skill),this.tagFactory.createTagDropDown({type:"topic",selector:"#task_tag_topics",width:"100%",tokenSeparators:[","]}),this.data.madlibTags.topic&&this.$("#task_tag_topics").select2("data",this.data.madlibTags.topic),this.tagFactory.createTagDropDown({type:"location",selector:"#task_tag_location",width:"100%"}),this.data.madlibTags.location&&this.$("#task_tag_location").select2("data",this.data.madlibTags.location),$("#skills-required").select2({placeholder:"required/not-required",width:"200px"}),$("#time-required").select2({placeholder:"time-required",width:"130px"}),$("#people").select2({placeholder:"people",width:"150px"}),$("#length").select2({placeholder:"length",width:"130px"}),$("#time-estimate").select2({placeholder:"time-estimate",width:"200px"}),$("#task-location").select2({placeholder:"location",width:"130px"})},initializeTextArea:function(){this.md&&this.md.cleanup(),this.md=new MarkdownEditor({data:this.model.toJSON().description,el:".markdown-edit",id:"task-description",placeholder:"Description of opportunity including goals, expected outcomes and deliverables.",title:"Opportunity Description",rows:6,validate:["empty"]}).render()},initializeListeners:function(){var t=this;t.on("task:tags:save:done",function(){var e={title:this.$("#task-title").val(),description:this.$("#task-description").val(),publishedAt:this.$("#publishedAt").val()||void 0,assignedAt:this.$("#assignedAt").val()||void 0,completedAt:this.$("#completedAt").val()||void 0},a=this.$("#projectId").select2("data");e.projectId=a?a.id:null;var i=this.$("#owner").select2("data");i&&(e.userId=i.id),oldTags=this.getOldTags(),tags=this.getTagsFromPage(),diff=this.tagFactory.createDiff(oldTags,tags),_.each(t.data.newItemTags,function(t){diff.add.push(t.id)}),async.forEach(diff.add,function(e,a){return _.isFinite(e)||e.name!=e.id?void t.tagFactory.addTag(e,t.model.attributes.id,"taskId",a):a()},function(){t.options.model.trigger("task:update",e)})})},submit:function(t){var e=this;t.preventDefault&&t.preventDefault();var a=[],i=[],s=[];_.extend(this,Backbone.Events);var o=this.$el.find(".validate"),r=!1;_.each(o,function(t){var e=validate({currentTarget:t});r=r||e}),r!==!0&&(a=this.getTagsFromPage(),i=this.getOldTags(),newTags=[],newTags=newTags.concat(e.$("#task_tag_topics").select2("data"),e.$("#task_tag_skills").select2("data"),e.$("#task_tag_location").select2("data")),async.forEach(newTags,function(t,a){e.tagFactory.addTagEntities(t,e,a)},function(t){return t?next(t):void e.trigger("task:tags:save:done")}),s=this.tagFactory.createDiff(i,a),s.remove.length>0&&async.each(s.remove,e.tagFactory.removeTag,function(){}))},getTagsFromPage:function(){var t=[];return t.push.apply(t,this.$("#task_tag_topics").select2("data")),t.push.apply(t,this.$("#task_tag_skills").select2("data")),t.push.apply(t,this.$("#task_tag_location").select2("data")),t.push.apply(t,[this.$("#skills-required").select2("data")]),t.push.apply(t,[this.$("#people").select2("data")]),t.push.apply(t,[this.$("#time-required").select2("data")]),t.push.apply(t,[this.$("#time-estimate").select2("data")]),t.push.apply(t,[this.$("#length").select2("data")]),t},getOldTags:function(){var t=[];for(var e in this.options.tags)t.push({id:parseInt(this.options.tags[e].id),tagId:parseInt(this.options.tags[e].tag.id),type:this.options.tags[e].tag.type});return t},cleanup:function(){this.md&&this.md.cleanup(),removeView(this)}});module.exports=TaskEditFormView;


},{"../../../../components/markdown_editor":104,"../../../../components/tag_factory":112,"../../../../config/ui.json":116,"../../../../mixins/utilities":128,"../templates/task_edit_form_template.html":85,"../templates/volunteer_edit_form_template.html":86,"async":131,"backbone":133,"marked":155,"underscore":159}],88:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),Utilities=require("../../../../mixins/utilities"),Bootstrap=require("bootstrap"),TasksCollection=require("../../../../entities/tasks/tasks_collection"),TaskCollectionView=require("../views/task_collection_view"),TaskFormView=require("../../new/views/task_form_view"),ModalWizardComponent=require("../../../../components/modal_wizard"),TaskModel=require("../../../../entities/tasks/task_model");TaskList=Backbone.View.extend({el:"#task-list-wrapper",events:{"click .add-task":"add","click .show-task":"show","click .task":"show","click .wizard":"wizard"},initialize:function(t){this.options=_.extend(t,this.defaults);var e=this;this.initializeTaskCollectionInstance(),this.initializeTaskModelInstance(),this.initializeListeners(),this.requestTasksCollectionData(),this.collection.on("tasks:render",function(){e.requestTasksCollectionData()})},initializeListeners:function(){var t=this;this.listenTo(this.taskModel,"task:tags:save:success",function(){t.initializeTaskModelInstance(),t.requestTasksCollectionData()})},initializeTaskModelInstance:function(){this.taskModel=new TaskModel},initializeTaskCollectionInstance:function(){this.collection?this.collection.initialize():this.collection=new TasksCollection},requestTasksCollectionData:function(){var t=this;this.collection.fetch({url:"/api/task/findAllByProjectId/"+parseInt(this.options.projectId),success:function(e){t.tasks=e,t.renderTaskCollectionView()}})},renderTaskCollectionView:function(){var t=this;this.taskCollectionView&&this.taskCollectionView.cleanup(),this.taskCollectionView=new TaskCollectionView({el:"#task-list-wrapper",onRender:!0,collection:t.tasks})},add:function(t){t.preventDefault&&t.preventDefault();var e=this;this.taskFormView&&this.taskFormView.cleanup(),this.modalWizardComponent&&this.modalWizardComponent.cleanup(),this.modalWizardComponent=new ModalWizardComponent({el:".wrapper-addTask",id:"addTask",modalTitle:"New Opportunity",model:e.taskModel,collection:e.tasks,modelName:"task",data:function(t){return{title:t.$("#task-title").val(),description:t.$("#task-description").val(),projectId:e.options.projectId}}}).render(),this.taskFormView=new TaskFormView({el:".modal-body",projectId:this.options.projectId,model:e.taskModel,tasks:e.tasks}).render(),this.modalWizardComponent.setChildView(this.taskFormView),this.modalWizardComponent.setNext(this.taskFormView.childNext),this.modalWizardComponent.setSubmit(this.taskFormView.childNext)},show:function(t){t.preventDefault&&t.preventDefault();var e=($(t.currentTarget).data("projectid"),$(t.currentTarget).data("id"));"null"!=e&&Backbone.history.navigate("tasks/"+e,{trigger:!0},e)},cleanup:function(){this.taskFormView&&this.taskFormView.cleanup(),this.modalWizardComponent&&this.modalWizardComponent.cleanup(),this.taskCollectionView&&this.taskCollectionView.cleanup(),removeView(this)}}),module.exports=TaskList;


},{"../../../../components/modal_wizard":110,"../../../../entities/tasks/task_model":124,"../../../../entities/tasks/tasks_collection":125,"../../../../mixins/utilities":128,"../../new/views/task_form_view":92,"../views/task_collection_view":90,"backbone":133,"bootstrap":138,"underscore":159}],89:[function(require,module,exports){
module.exports='<div class="box-pad-lr border-bottom">\n  <h2>\n    Available Opportunities\n    <% if (user) { %>\n    <a href="#addTask" class="btn btn-c0 btn-sm file-add add-task" data-toggle="modal" data-backdrop="static">Add Opportunity</a>\n    <% } %>\n  </h2>\n</div>\n\n<div class="task-scroll">\n  <% if (tasks.length == 0) { %>\n  <div class="task border-left" data-id="null">\n    <div class="task-title">\n      No current opportunities.\n    </div>\n  </div>\n  <% } %>\n  <% _.each(tasks, function(task) { %>\n  <div class="task border-left" data-projectid="<%= task.projectId %>" data-id="<%= task.id %>">\n    <div class="pull-right">\n      <strong><%= task.state %></strong>\n    </div>\n    <div class="task-title">\n      <a href="/tasks/<%- task.id %>" class="show-task" data-projectid="<%= task.projectId %>" data-id="<%= task.id %>"><%- task.title %></a>\n    </div>\n    <div class="task-description">\n      <%= task.description %>\n    </div>\n    <div class="task-tags-row">\n      <ul class="tags task-tags">\n        <% _.each(task.tags, function (tag) { %>\n          <li><%= tag.tag.name %></li>\n        <% }); %>\n      </ul>\n    </div>\n  </div>\n  <% }) %>\n</div>\n';


},{}],90:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),async=require("async"),marked=require("marked"),TaskListTemplate=require("../templates/task_collection_view_template.html"),TasksCollectionView=Backbone.View.extend({el:"#task-list-wrapper",initialize:function(e){this.options=e,this.requestTagData()},requestTagData:function(){var e=this;this.tasksJson={tasks:this.options.collection.toJSON(),user:window.cache.currentUser};var t=function(e,t){$.ajax({url:"/api/tag/findAllByTaskId/"+e.id,async:!1,success:function(s){e.tags=s,t()},error:function(){e.tags=[],t()}})};async.each(this.tasksJson.tasks,t,function(){e.render()})},render:function(){return _.each(this.tasksJson.tasks,function(e){e.description=marked(e.description)}),this.compiledTemplate=_.template(TaskListTemplate)(this.tasksJson),this.$el.html(this.compiledTemplate),this},cleanup:function(){removeView(this)}});module.exports=TasksCollectionView;


},{"../../../../mixins/utilities":128,"../templates/task_collection_view_template.html":89,"async":131,"backbone":133,"marked":155,"underscore":159}],91:[function(require,module,exports){
module.exports='<form id="task-form" class="form-inline" action="/api/task">\n\n  <section id="section-1" class="current">\n    <div class="form-group fullwidth">\n      <label for="task-title">\n        What problem are you trying to solve?\n      </label>\n      <div class="row">\n        <div class="col-md-12">\n          <input type="text" id="task-title" class="fullwidth form-control validate" placeholder="A short description of the problem." data-validate="empty,count100"/>\n          <span class="help-block error-empty" style="display:none;">You must enter a title for this <span data-i18n="task">opportunity</span></span>\n          <span class="help-block error-count100" style="display:none;">The short description of the problem must be less than 100 characters.</span>\n        </div>\n      </div>\n    </div>\n  </section>\n\n  <section id="section-2">\n    <div class="form-group fullwidth">\n      <label for="people">\n        We need\n      </label>\n      <select id="people" class="dropdown">\n        <% _.each(tags[\'task-people\'], function (person) { %>\n          <option value="<%= person.id %>"><%= person.name %></option>\n        <% }); %>\n      </select>\n\n      <label for="topics">\n        to work on an <span data-i18n="task">opportunity</span> about these topics:\n      </label>\n      <div class="row">\n        <div class="col-md-12">\n          <input type="hidden" id="task_tag_topics" class="fullwidth" name="topic" />\n        </div>\n      </div>\n    </div>\n\n    <hr/>\n\n    <div class="form-group fullwidth">\n      <label for="skills-required">\n        The following skills are useful and\n      </label>\n      <select id="skills-required" name="skills-required" class="dropdown">\n        <% _.each(tags[\'task-skills-required\'], function(requirement) { %>\n          <option value="<%= requirement.id %>"><%= requirement.name %></option>\n        <% }); %>\n      </select>\n      <label for="skills">\n        to complete this <span data-i18n="task">opportunity</span>:\n      </label>\n      <div class="row">\n        <div class="col-md-12">\n          <input type="hidden" id="task_tag_skills" name="skills" class="fullwidth" />\n        </div>\n      </div>\n    </div>\n\n  </section>\n\n  <section id="section-3">\n    <div class="form-group fullwidth">\n      <label for="time-estimate">\n        The <span data-i18n="task">opportunity</span> will require\n      </label>\n      <select id="time-estimate" class="dropdown">\n        <% _.each(tags[\'task-time-estimate\'], function (timeEstimate) { %>\n          <option value="<%= timeEstimate.id %>"><%= timeEstimate.name %></option>\n        <% }); %>\n      </select>\n\n      <label for="time-required">\n        of\n      </label>\n      <select id="time-required" class="dropdown">\n        <% _.each(tags[\'task-time-required\'], function (time) { %>\n          <option value="<%= time.id %>"><%= time.name %></option>\n        <% }); %>\n      </select>\n\n      <label for="length">\n        work, and must be completed within\n      </label>\n      <select id="length" class="dropdown">\n        <% _.each(tags[\'task-length\'], function (item) { %>\n          <option value="<%= item.id %>"><%= item.name %></option>\n        <% }) %>\n      </select>\n    </div>\n\n    <hr/>\n\n    <div class="form-group fullwidth">\n      <label for="task-location">\n        The volunteer(s) must be located\n      </label>\n      <select id="task-location" class="dropdown">\n        <option value="false">anywhere</option>\n        <option value="true">at specific location(s)</option>\n      </select> to complete this task.\n\n      <div class="row el-specific-location">\n        <div class="col-md-12">\n          <div class="form-group task-skills fullwidth">\n            <label for="location">\n              The specific location(s) are:\n            </label>\n            <input type="hidden" id="task_tag_location" name="location" class="fullwidth"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n\n  <section id="section-4">\n    <div class="form-group fullwidth">\n      <label for="task-description">\n        Describe the <span data-i18n="task">opportunity</span> details, including goals, expected outcomes and deliverables.\n      </label>\n      <div class="row">\n        <div class="col-md-12">\n          <div class="markdown-edit"></div>\n          <span class="help-block error-empty" style="display:none;">You must enter a description for this <span data-i18n="task">opportunity</span></span>\n        </div>\n      </div>\n    </div>\n  </section>\n\n</form>\n';


},{}],92:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),async=require("async"),utilities=require("../../../../mixins/utilities"),MarkdownEditor=require("../../../../components/markdown_editor"),TasksCollection=require("../../../../entities/tasks/tasks_collection"),TaskFormTemplate=require("../templates/task_form_template.html"),TagFactory=require("../../../../components/tag_factory"),TaskFormView=Backbone.View.extend({el:"#task-list-wrapper",events:{"change .validate":"v","change #task-location":"locationChange"},initialize:function(t){this.options=_.extend(t,this.defaults),this.tasks=this.options.tasks,this.tagFactory=new TagFactory,this.data={},this.data.newTag={},this.data.newItemTags=[],this.data.existingTags=[],this.initializeSelect2Data(),this.initializeListeners()},initializeSelect2Data:function(){var t=this,e=["task-skills-required","task-time-required","task-people","task-length","task-time-estimate"];this.tagSources={};var a=function(e){$.ajax({url:"/api/ac/tag?type="+e+"&list",type:"GET",async:!1,success:function(a){t.tagSources[e]=a}})};async.each(e,a,function(){t.render()})},initializeListeners:function(){var t=this;_.extend(this,Backbone.Events),t.on("newTagSaveDone",function(){tags=[];var e=[];_.each(t.data.newItemTags,function(t){tags.push(t)}),e.push.apply(e,t.$("#task_tag_topics").select2("data")),e.push.apply(e,t.$("#task_tag_skills").select2("data")),"true"==t.$("#task-location").select2("data").id&&e.push.apply(e,t.$("#task_tag_location").select2("data")),_.each(e,function(t){t.id!==t.name&&tags.push(t)}),_.each(this.data.existingTags,function(t){tags.push(t)}),async.forEach(tags,function(e,a){return t.tagFactory.addTag(e,t.tempTaskId,"taskId",a)},function(e){t.model.trigger("task:modal:hide"),t.model.trigger("task:tags:save:success",e)})}),this.listenTo(this.tasks,"task:save:success",function(e){t.tempTaskId=e,this.data.existingTags.push(t.$("#skills-required").select2("data")),this.data.existingTags.push(t.$("#people").select2("data")),this.data.existingTags.push(t.$("#time-required").select2("data")),this.data.existingTags.push(t.$("#time-estimate").select2("data")),this.data.existingTags.push(t.$("#length").select2("data"));var a=[];a=a.concat(t.$("#task_tag_topics").select2("data"),t.$("#task_tag_skills").select2("data"),t.$("#task_tag_location").select2("data")),async.forEach(a,function(e,a){return t.tagFactory.addTagEntities(e,t,a)},function(e){return e?next(e):void t.trigger("newTagSaveDone")})})},getTagsFromPage:function(){return tags={topic:this.$("#task_tag_topics").select2("data"),skill:this.$("#task_tagskills").select2("data"),location:this.$("#task_tag_location").select2("data"),"task-skills-required":[this.$("#skills-required").select2("data")],"task-people":[this.$("#people").select2("data")],"task-time-required":[this.$("#time-required").select2("data")],"task-time-estimate":[this.$("#time-estimate").select2("data")],"task-length":[this.$("#length").select2("data")]},tags},render:function(){var t=_.template(TaskFormTemplate)({tags:this.tagSources});return this.$el.html(t),this.initializeSelect2(),this.initializeTextArea(),this.$("section:not(.current)").hide(),this.$el.i18n(),this},v:function(t){return validate(t)},childNext:function(t,e){var a=e.find(".validate"),i=!1;return _.each(a,function(t){var e=validate({currentTarget:t});i=i||e}),i},initializeSelect2:function(){var t=this;t.tagFactory.createTagDropDown({type:"skill",selector:"#task_tag_skills",width:"100%",tokenSeparators:[","]}),t.tagFactory.createTagDropDown({type:"topic",selector:"#task_tag_topics",width:"100%",tokenSeparators:[","]}),t.tagFactory.createTagDropDown({type:"location",selector:"#task_tag_location",width:"100%",tokenSeparators:[","]}),t.$(".el-specific-location").hide(),t.$("#skills-required").select2({placeholder:"Required/Not Required",width:"resolve"}),t.$("#time-required").select2({placeholder:"Time Commitment",width:"resolve"}),t.$("#people").select2({placeholder:"Personnel Needed",width:"resolve"}),t.$("#length").select2({placeholder:"Deadline",width:"resolve"}),t.$("#time-estimate").select2({placeholder:"Estimated Time Required",width:"resolve"}),t.$("#task-location").select2({placeholder:"Work Location",width:"resolve"})},initializeTextArea:function(){this.md&&this.md.cleanup(),this.md=new MarkdownEditor({data:"",el:".markdown-edit",id:"task-description",placeholder:"Description of "+i18n.t("task")+" including goals, expected outcomes and deliverables.",title:i18n.t("Task")+" Description",rows:6,validate:["empty"]}).render()},locationChange:function(t){_.isEqual(t.currentTarget.value,"true")?this.$(".el-specific-location").show():this.$(".el-specific-location").hide()},cleanup:function(){this.md&&this.md.cleanup(),removeView(this)}});module.exports=TaskFormView;


},{"../../../../components/markdown_editor":104,"../../../../components/tag_factory":112,"../../../../entities/tasks/tasks_collection":125,"../../../../mixins/utilities":128,"../templates/task_form_template.html":91,"async":131,"backbone":133,"bootstrap":138,"underscore":159}],93:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),Popovers=require("../../../../mixins/popovers"),utils=require("../../../../mixins/utilities"),BaseView=require("../../../../base/base_view"),CommentListController=require("../../../comments/list/controllers/comment_list_controller"),AttachmentView=require("../../../attachment/views/attachment_show_view"),TaskItemView=require("../views/task_item_view"),TagShowView=require("../../../tag/show/views/tag_show_view"),ModalComponent=require("../../../../components/modal"),ModalAlert=require("../../../../components/modal_alert"),TaskEditFormView=require("../../edit/views/task_edit_form_view"),UIConfig=require("../../../../config/ui.json"),VolunteerSupervisorNotifyTemplate=require("../templates/volunteer_supervisor_notify_template.html"),VolunteerTextTemplate=require("../templates/volunteer_text_template.html"),ChangeStateTemplate=require("../templates/change_state_template.html"),UpdateNameTemplate=require("../templates/update_name_template.html"),popovers=new Popovers,TaskShowController=BaseView.extend({el:"#container",events:{"change .validate":"v","keyup .validate":"v","click #task-edit":"edit","click #task-view":"view","click #like-button":"like","click #volunteer":"volunteer","click #volunteered":"volunteered","click #task-close":"stateChange","click #task-reopen":"stateReopen","click .link-backbone":linkBackbone,"click .delete-volunteer":"removeVolunteer","mouseenter .project-people-div":popovers.popoverPeopleOn,"click .project-people-div":popovers.popoverClick},initialize:function(e){this.options=e,this.initializeTaskItemView(),this.initializeChildren(),this.getUserSettings(window.cache.currentUser)},initializeEdit:function(){var e=this.model.toJSON(),t=e.isOwner;return t!==!0&&(_.isUndefined(e.project)||e.project.isOwner===!0&&(t=!0),window.cache.currentUser&&window.cache.currentUser.isAdmin===!0&&(t=!0)),t!==!0?void window.cache.userEvents.trigger("user:request:login",{message:"You are not the owner of this opportunity. <a class='link-backbone' href='/tasks/"+e.id+"'>View the opportunity instead.</a>",disableClose:!0}):(this.taskEditFormView&&this.taskEditFormView.cleanup(),this.taskEditFormView=new TaskEditFormView({el:".edit-task-section",elVolunteer:"#task-volunteers",edit:!0,taskId:this.model.attributes.id,model:this.model,tags:this.tags,madlibTags:this.madlibTags,tagTypes:this.tagTypes}).render(),this.$(".task-show-madlib").hide(),this.$(".li-task-view").show(),this.$(".li-task-edit").hide(),void this.$(".task-view").hide())},initializeChildren:function(){var e=this;this.listenTo(this.model,"task:show:render:done",function(){e.initializeHandlers(),e.initializeLikes(),window.cache.currentUser&&e.initializeVolunteers(),"edit"==e.options.action?(e.initializeEdit(),popovers.popoverPeopleInit(".project-people-div")):(popovers.popoverPeopleInit(".project-people-div"),e.commentListController&&e.commentListController.cleanup(),e.commentListController=new CommentListController({target:"task",id:e.model.attributes.id}),e.attachmentView&&e.attachmentView.cleanup(),e.attachmentView=new AttachmentView({target:"task",id:this.model.attributes.id,owner:this.model.attributes.isOwner,el:".attachment-wrapper"}).render()),e.tagView&&e.tagView.cleanup(),e.tagView=new TagShowView({model:e.model,el:".tag-wrapper",target:"task",targetId:"taskId",edit:!1,url:"/api/tag/findAllByTaskId/"}).render()})},initializeLikes:function(){$("#like-number").text(this.model.attributes.likeCount),$("#like-text").text(1===parseInt(this.model.attributes.likeCount)?$("#like-text").data("singular"):$("#like-text").data("plural")),this.model.attributes.like&&($("#like-button-icon").removeClass("fa fa-star-o"),$("#like-button-icon").addClass("fa fa-star"))},initializeVolunteers:function(){this.model.attributes.volunteer?($(".volunteer-true").show(),$(".volunteer-false").hide()):($(".volunteer-true").hide(),$(".volunteer-false").show())},initializeHandlers:function(){this.listenTo(this.model,"task:update:state:success",function(e){"closed"==e.attributes.state?($("#li-task-close").hide(),$("#li-task-reopen").show(),$("#alert-closed").show()):($("#li-task-close").show(),$("#li-task-reopen").hide(),$("#alert-closed").hide())})},initializeTaskItemView:function(){var e=this;this.listenTo(this.model,"task:tag:types",function(t){e.tagTypes=t}),this.listenTo(this.model,"task:tag:data",function(t,i){e.tags=t,e.madlibTags=i}),this.taskItemView&&this.taskItemView.cleanup(),this.taskItemView=new TaskItemView({model:this.options.model,router:this.options.router,id:this.options.id,el:this.el})},v:function(e){return validate(e)},edit:function(e){e.preventDefault&&e.preventDefault(),this.initializeEdit(),popovers.popoverPeopleInit(".project-people-div"),Backbone.history.navigate("tasks/"+this.model.id+"/edit")},view:function(e){e.preventDefault&&e.preventDefault(),Backbone.history.navigate("tasks/"+this.model.id,{trigger:!0})},like:function(e){e.preventDefault&&e.preventDefault();var t=$(e.currentTarget).children("#like-button-icon"),i=$("#like-number");t.hasClass("fa-star-o")?(t.removeClass("fa-star-o"),t.addClass("fa-star"),i.text(parseInt(i.text())+1),$("#like-text").text(1===parseInt(i.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/liket/"+this.model.attributes.id}).done(function(){})):(t.removeClass("fa-star"),t.addClass("fa-star-empty"),i.text(parseInt(i.text())-1),$("#like-text").text(1===parseInt(i.text())?$("#like-text").data("singular"):$("#like-text").data("plural")),$.ajax({url:"/api/like/unliket/"+this.model.attributes.id}).done(function(){}))},getUserSettings:function(e){return _.isNull(e)?null:void $.ajax({url:"/api/usersetting/"+e.id,type:"GET",dataType:"json"}).success(function(e){_.each(e,function(e){e.isActive&&(window.cache.currentUser[e.key]=e)})})},deleteUserSettingByKey:function(e){var t=window.cache.currentUser[e]?window.cache.currentUser[e].id:null;t&&$.ajax({url:"/api/usersetting/"+t,type:"DELETE",dataType:"json"})},saveUserSettingByKey:function(e,t){var i=this;return t.newValue==t.oldValue?!0:(t.deleteOld||i.deleteUserSettingByKey(t.settingKey),void $.ajax({url:"/api/usersetting/",type:"POST",dataType:"json",data:{userId:e,key:t.settingKey,value:t.newValue}}))},volunteer:function(e){if(e.preventDefault&&e.preventDefault(),window.cache.currentUser){var t=this,i=($(e.currentTarget).children("#like-button-icon"),e);if(this.modalAlert&&this.modalAlert.cleanup(),this.modalComponent&&this.modalComponent.cleanup(),!window.cache.currentUser.name){var a=_.template(UpdateNameTemplate)({});return this.modalComponent=new ModalComponent({el:"#modal-volunteer",id:"update-name",modalTitle:"What's your name?"}).render(),void(this.modalAlert=new ModalAlert({el:"#update-name .modal-template",modalDiv:"#update-name",content:a,validateBeforeSubmit:!0,cancel:i18n.t("volunteerModal.cancel"),submit:i18n.t("volunteerModal.ok"),callback:function(){var e=$("#update-name-field").val();$.ajax({url:"/api/user/"+window.cache.currentUser.id,method:"PUT",data:{name:e}}).done(function(e){window.cache.currentUser.name=e.name,t.volunteer(i)})}}).render())}if(this.modalComponent=new ModalComponent({el:"#modal-volunteer",id:"check-volunteer",modalTitle:i18n.t("volunteerModal.title")}).render(),UIConfig.supervisorEmail.useSupervisorEmail)var r=window.cache.currentUser.supervisorEmail?window.cache.currentUser.supervisorEmail.value:"",o=window.cache.currentUser.supervisorName?window.cache.currentUser.supervisorName.value:"",n=!0,a=_.template(VolunteerSupervisorNotifyTemplate)({supervisorEmail:r,supervisorName:o});else{n=!1;var a=_.template(VolunteerTextTemplate)({})}this.modalAlert=new ModalAlert({el:"#check-volunteer .modal-template",modalDiv:"#check-volunteer",content:a,cancel:i18n.t("volunteerModal.cancel"),submit:i18n.t("volunteerModal.ok"),validateBeforeSubmit:n,callback:function(){UIConfig.supervisorEmail.useSupervisorEmail&&(t.saveUserSettingByKey(window.cache.currentUser.id,{settingKey:"supervisorEmail",newValue:$("#userSuperVisorEmail").val(),oldValue:r}),t.saveUserSettingByKey(window.cache.currentUser.id,{settingKey:"supervisorName",newValue:$("#userSuperVisorName").val(),oldValue:o})),$.ajax({url:"/api/volunteer/",type:"POST",data:{taskId:t.model.attributes.id}}).done(function(e){$(".volunteer-true").show(),$(".volunteer-false").hide();var i='<div class="project-people-div" data-userid="'+e.userId+'" data-voluserid="'+e.userId+'"><img src="/api/user/photo/'+e.userId+'" class="project-people"/>';"edit"===t.options.action&&(i+='<a href="#" class="delete-volunteer volunteer-delete fa fa-times"  id="delete-volunteer-'+e.id+'" data-uid="'+e.userId+'" data-vid="'+e.id+'"></a>'),i+="</div>",$("#task-volunteers").append(i),popovers.popoverPeopleInit(".project-people-div")})}}).render()}else window.cache.userEvents.trigger("user:request:login")},volunteered:function(e){e.preventDefault&&e.preventDefault()},removeVolunteer:function(e){e.stopPropagation()&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),$(e.currentTarget).off("mouseenter"),$(".popover").remove();var t=$(e.currentTarget).data("vid"),i=$(e.currentTarget).data("uid");"undefined"!=typeof cache&&$.ajax({url:"/api/volunteer/"+t,type:"DELETE"}).done(function(){});var a=this.model.attributes.volunteers||[],r=_.filter(a,function(e){return e.id!==t},this)||[];this.model.attributes.volunteers=r,$('[data-voluserid="'+i+'"]').remove(),window.cache.currentUser.id===i&&($(".volunteer-false").show(),$(".volunteer-true").hide())},stateChange:function(e){e.preventDefault&&e.preventDefault();var t=this;this.modalAlert&&this.modalAlert.cleanup(),this.modalComponent&&this.modalComponent.cleanup();var i=UIConfig.states;draftAdminOnly&&!window.cache.currentUser.isAdmin&&(i=_(i).reject(function(e){return"draft"===e.value}));var a=_.template(ChangeStateTemplate)({model:t.model,states:i});this.modalComponent=new ModalComponent({el:"#modal-close",id:"check-close",modalTitle:"Change "+i18n.t("Task")+" State"}).render(),this.modalAlert=new ModalAlert({el:"#check-close .modal-template",modalDiv:"#check-close",content:a,cancel:"Cancel",submit:"Change "+i18n.t("Task")+" State",callback:function(){t.model.trigger("task:update:state",$("input[name=opportunityState]:checked").val())}}).render()},stateReopen:function(e){e.preventDefault&&e.preventDefault(),this.model.trigger("task:update:state","open")},cleanup:function(){this.taskEditFormView&&this.taskEditFormView.cleanup(),this.tagView&&this.tagView.cleanup(),this.attachmentView&&this.attachmentView.cleanup(),this.commentListController&&this.commentListController.cleanup(),this.taskItemView&&this.taskItemView.cleanup(),removeView(this)}});module.exports=TaskShowController;


},{"../../../../base/base_view":102,"../../../../components/modal":106,"../../../../components/modal_alert":107,"../../../../config/ui.json":116,"../../../../mixins/popovers":126,"../../../../mixins/utilities":128,"../../../attachment/views/attachment_show_view":23,"../../../comments/list/controllers/comment_list_controller":33,"../../../tag/show/views/tag_show_view":84,"../../edit/views/task_edit_form_view":87,"../templates/change_state_template.html":94,"../templates/update_name_template.html":96,"../templates/volunteer_supervisor_notify_template.html":97,"../templates/volunteer_text_template.html":98,"../views/task_item_view":99,"backbone":133,"bootstrap":138,"underscore":159}],94:[function(require,module,exports){
module.exports="<div class=\"form-group\">\n	<p>Please select the new state for the opportunity. The current state is checked and the available states are:\n		<ul style='list-style-type:none'>\n			<% _.each(states, function (t) { %>\n				<li><input type='radio' name='opportunityState' value='<%- t.value %>'\n					<% if ( t.value == model.attributes.state ) {%>\n						<%- checked=\"checked\" %>\n					<% } %>\n						> <%- t.label %> </li>\n					<% }); %>\n		</ul>\n	</p>\n</div>\n";


},{}],95:[function(require,module,exports){
module.exports='<!-- ALERTS -->\n<div class="alert alert-danger" id="alert-closed" style="<% if (model.state != \'closed\') { %>display: none;<% } %>">This <span data-i18n="task">opportunity</span> is <strong>closed</strong>.  It is no longer active, and no more modifications may be made.</div>\n\n<div class="row">\n\n  <div class="col-md-push-4 col-sm-push-4 col-sm-8 col-md-8 md-nopadding-right">\n    <div class="row">\n      <div class="col-md-9 sm-nopadding md-nopadding">\n        <div class="box box-main">\n\n          <div class="main-section">\n            <div class="edit-task-section">\n\n              <h1><%- model.title %></h1>\n              <% if (!_.isUndefined(model.project) && ui.project.show) { %>\n              <div class="task-project">\n                <a href="/projects/<%- model.projectId %>" class="link-backbone">\n                  <i class="fa fa-folder-o"></i>\n                  <%- model.project.title %>\n                </a>\n              </div>\n              <% } %>\n\n              <div class="task-show-description">\n                <%= model.descriptionHtml %>\n              </div>\n\n              <div class="task-show-creation">\n                <span data-i18n="Task">Opportunity</span> created <time class="timeago" datetime="<%- model.createdAt %>"><%- model.createdAt %></time>\n                <% if (model.createdAt != model.updatedAt) { %>\n                and updated <time class="timeago" datetime="<%- model.updatedAt %>"><%- model.updatedAt %></time>\n                <% } %>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="col-md-3 padding-left-none sm-nopadding md-nopadding">\n        <div class="box padding-none">\n\n          <div class="navbar-side like-row border-bottom">\n            <% if (user) { %>\n            <a href="#" id="like-button" class="like-button">\n            <% } else { %>\n            <span class="like-button">\n            <% } %>\n              <i id="like-button-icon" class="fa fa-star-o fa-lg gold"></i>\n            <% if (user) { %>\n            </a>\n            <% } else { %>\n            </span>\n            <% } %>\n            <span class="like-number" id="like-number"><%- model.likeCount %></span>\n            <span class="like-plural" id="like-text" data-plural="likes" data-singular="like">likes</span>\n          </div>\n          <div class="navbar-side border-bottom">\n            <ul class="nav nav-pills nav-stacked">\n              <li>\n                <a href="#" id="email"><i class="fa fa-envelope-o"></i> <span class="box-icon-text">Share</span></a>\n              </li>\n            </ul>\n          </div>\n          <% if (model.isOwner || (user && user.isAdmin)) { %>\n          <div class="navbar-side <% if (user) { %>border-bottom<% } %>">\n            <div id="modal-close"></div>\n            <ul class="nav nav-pills nav-stacked">\n              <li class="li-task-edit">\n                <a href="#" id="task-edit"><i class="fa fa-pencil"></i> <span class="box-icon-text">Edit <span data-i18n="Task">Opportunity</span></span></a>\n              </li>\n              <li class="li-task-view" style="display: none;">\n                <a href="#" id="task-view"><i class="fa fa-pencil"></i> <span class="box-icon-text">View <span data-i18n="Task">Opportunity</span></span></a>\n              </li>\n              <% if (!draftAdminOnly || model.state !== \'draft\' || (user && user.isAdmin)) { %>\n              <li id="li-task-close" style="<% if (model.state == \'closed\') { %>display: none;<% } %>">\n                <a href="#" id="task-close"><i class="fa fa-times-circle"></i> <span class="box-icon-text">Change <span data-i18n="Task">Opportunity</span> State</span></a>\n              </li>\n              <% } else {%>\n                <li><span class="no-link">This draft <span data-i18n="task">opportunity</span> is awaiting approval from an administrator.</span></li>\n              <% } %>\n              <li id="li-task-reopen" style="<% if (model.state != \'closed\') { %>display: none;<% } %>">\n                <a href="#" id="task-reopen"><i class="fa fa-share"></i> <span class="box-icon-text">Reopen</span></a>\n              </li>\n              <!--\n              <li>\n                <a href="#" id="task-delete"><i class="fa fa-trash-o"></i> <span class="box-icon-text">Delete <span data-i18n="Task">Opportunity</span></span></a>\n              </li>\n              -->\n            </ul>\n          </div>\n          <% } %>\n          <div class="navbar-side border-bottom" <% if (!vol) {%>style="display: none;"<%}%>>\n            <div id="modal-volunteer"></div>\n            <ul class="nav nav-pills nav-stacked">\n              <li class="volunteer-true" style="display: none;">\n                <a href="#" id="volunteered" class="btn btn-c1"><i class="fa fa-thumbs-up"></i> <span class="box-icon-text" data-i18n="taskPage.volunteeredButton">Volunteered!</span></a>\n\n              </li>\n              <li class="volunteer-false">\n                <a href="#" id="volunteer" class="btn btn-c2"><i class="fa fa-thumbs-o-up"></i> <span class="box-icon-text" data-i18n="taskPage.volunteerButton">Volunteer</span></a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <div class="box box-main task-view">\n          <div id="task-show-madlib-description" class="task-show-description">\n            We need\n              <strong>\n                <% if (madlibTags[\'task-people\']) { %>\n                  <%= madlibTags[\'task-people\'][0].name %>\n                <% } else { %>\n                  \'no people yet assigned\'\n                <% } %>\n              </strong>\n\n            <% if (madlibTags.topic) { %>\n            to work on an <span data-i18n="task">opportunity</span> about:\n              <strong>\n                    <% _.each(madlibTags.topic, function (t, i) { %>\n                    <% if (i > 0) { %>\n                    ,\n                    <% } %>\n                    <%= t.name %>\n                    <% }) %>\n              </strong>.\n            <% } %>\n\n            <br />\n\n            The following skills are useful and\n              <strong>\n                <% if (madlibTags[\'task-skills-required\']) { %>\n                  <%= madlibTags[\'task-skills-required\'][0].name %>\n                <% } else { %>\n                  not required\n                <% } %>\n              </strong>\n\n            to complete this <span data-i18n="task">opportunity</span>:\n              <strong>\n                <% if (madlibTags.skill) { %>\n                  <% _.each(madlibTags.skill, function (s, i) { %>\n                  <% if (i > 0) { %>\n                  ,\n                  <% } %>\n                  <%= s.name %>\n                  <% }) %>\n                <% } else { %>\n                  no special skills required\n                <% } %>\n              </strong>.\n\n\n            The <span data-i18n="task">opportunity</span> will require\n              <strong>\n                <% if (madlibTags[\'task-time-estimate\']) { %>\n                  <%= madlibTags[\'task-time-estimate\'][0].name %>\n                <% } else { %>\n                  an unspecified amount of time\n                <% } %>\n              </strong>\n\n            of\n              <strong>\n                <% if (madlibTags[\'task-time-required\']) { %>\n                  <%= madlibTags[\'task-time-required\'][0].name %>\n                <% } else { %>\n                  unstructured\n                <% } %>\n              </strong>\n\n            work, and\n            <% if (madlibTags[\'task-length\']) { %>\n            must be completed within\n              <strong>\n                <%= madlibTags[\'task-length\'][0].name %></strong>.\n            <% } else { %>\n              <strong>\n                has no deadline.\n              </strong>\n            <% } %>\n\n            <% if (madlibTags.location) { %>\n            The participant(s) must be located at\n            <strong>\n              <% _.each(madlibTags.location, function (s, i) { %>\n              <% if (i > 0) { %>\n              ,\n              <% } %>\n              <%= s.name %>\n              <% }) %>\n            </strong>\n            to complete this <span data-i18n="task">opportunity</span>.\n            <% } else { %>\n            The participant(s) can be located anywhere.\n            <% } %>\n            </strong>\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 sm-nopadding md-nopadding">\n        <div class="box task-both">\n          <div class="box-pad-lr border-bottom">\n            <h2>Requestor and Participants\n            </h2>\n          </div>\n          <div class="box-main" id="task-volunteers">\n            <div class="project-people-div" data-userid="<%= model.userId %>">\n              <img src="/api/user/photo/<%= model.userId %>" class="project-people" alt="<%= model.owner.name %>"/>\n            </div>\n            <div class="project-people-space">\n              <div class="bar">\n              </div>\n            </div>\n            <% _.each(model.volunteers, function (v) { %>\n            <div class="project-people-div" data-userid="<%= v.userId %>" data-voluserid="<%= v.userId %>">\n              <img src="/api/user/photo/<%= v.userId %>" class="project-people" alt="<%= v.name %>"/>\n            </div>\n            <% }); %>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 task-view sm-nopadding md-nopadding">\n\n        <div class="box comment-list-wrapper" style="clear: both;">\n          <div class="box-pad-lr border-bottom">\n            <h2>Discussion\n            <% if (user) { %>\n            <button class="btn btn-c0 btn-sm file-add new-topic" id="project-topic-new">New Topic</button>\n            <% } %>\n            </h2>\n          </div>\n          <div class="">\n            <div class="box-pad-lr box-pad-t topic-form-wrapper"></div>\n            <ul id="comment-list-null">\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n  <div class="col-md-pull-8 col-sm-pull-8 col-sm-4 col-md-4 project-sidebar md-nopadding-right">\n    <!-- LEFT SIDEBAR -->\n    <div class="row">\n      <div class="col-md-12 box sm-nopadding">\n        <div class="box-main tag-wrapper">\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-md-12 box task-view sm-nopadding">\n        <div class="attachment-wrapper">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';


},{}],96:[function(require,module,exports){
module.exports='<p>In order to introduce you as part of the sign up process, we would like to fill in your profile. Please enter your name:</p>\n<div class="form-group">\n  <input type="text" class="form-control validate" id="update-name-field" name="update-name-field" placeholder="Full Name" data-validate="empty">\n  <span class="help-block error-empty" style="display:none;">Please enter your full name.</span>\n</div>\n';


},{}],97:[function(require,module,exports){
module.exports='<div class="form-group">\n	<p>Thank you for volunteering. Please be sure you have the availability and expertise to support this opportunity to completion. We will notify your supervisor of your interest in this project so that he or she is aware that you plan to include this work during your regularly scheduled work week to support Department colleagues and projects. Kudos to you!</p>\n	<p>Please enter  the name and email address of your supervisor below. If youve previously volunteered, the last supervisor email you provided is shown. Please update it if necessary.</p>\n	<span class="form-group">\n		<input type="text" id="userSuperVisorName" placeholder="Supervisor Name" class="validate" data-validate="empty" value="<%= supervisorName %>"/>\n		<input type="text" id="userSuperVisorEmail" placeholder="Supervisor email address" class="validate" data-validate="empty,email,emaildomain" data-emaildomain="state.gov" value="<%= supervisorEmail %>"/>\n		<span class="help-block error-email error-empty error-emaildomain" style="display:none;">You must enter a name and a valid State Department email address to proceed.</span>\n	</span>\n</div>\n';


},{}],98:[function(require,module,exports){
module.exports='<p data-i18n="volunteerModal.notifySupervisor">I understand it is my responsibility to confirm supervisor approval prior to committing to an opportunity.</p>\n<p data-i18n="volunteerModal.cantCancel">Once you volunteer for an opportunity, you will not be able to cancel your commitment to volunteer.</p>\n';


},{}],99:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../../../../mixins/utilities"),UIConfig=require("../../../../config/ui.json"),async=require("async"),marked=require("marked"),TimeAgo=require("../../../../../vendor/jquery.timeago"),BaseView=require("../../../../base/base_view"),TaskShowTemplate=require("../templates/task_show_item_template.html"),TaskItemView=BaseView.extend({initialize:function(e){var t=this;this.options=e,this.model.trigger("task:model:fetch",e.id),this.listenTo(this.model,"task:model:fetch:success",function(e){t.model=e,t.initializeTags(t)})},getTagData:function(e,t){$.ajax({url:"/api/tag/findAllByTaskId/"+e.options.id,async:!1,success:function(a){e.tags=[];for(var i=0;i<a.length;i+=1)e.tags.push(a[i]);return e.data={user:window.cache.currentUser,model:e.model.toJSON(),tags:e.tags},e.data.madlibTags=organizeTags(e.tags),e.data.model.descriptionHtml=marked(e.data.model.description),e.model.trigger("task:tag:data",e.tags,e.data.madlibTags),t()}})},render:function(e){e.getTagData(e,function(){var t=e.data,a=(!t.user||t.user.id!==t.model.userId)&&"draft"!==t.model.state;e.data.ui=UIConfig,e.data.vol=a;var i=_.template(TaskShowTemplate)(e.data);e.$el.html(i),e.$el.i18n(),$("time.timeago").timeago(),e.updateTaskEmail(),e.model.trigger("task:show:render:done")})},updateTaskEmail:function(){var e=this;$.ajax({url:encodeURI('/api/email/makeURL?email=contactUserAboutTask&subject=Check Out "'+e.model.attributes.title+'"&opportunityTitle='+e.model.attributes.title+"&opportunityLink="+window.location.protocol+"//"+window.location.host+window.location.pathname+"&opportunityDescription="+(e.model.attributes.description||"")+"&opportunityMadlibs="+$("<div />",{html:e.$("#task-show-madlib-description").html()}).text().replace(/\s+/g," ")),type:"GET"}).done(function(t){e.$("#email").attr("href",t)})},initializeTags:function(e){var t=["task-skills-required","task-time-required","task-people","task-length","task-time-estimate"];e.tagSources={};var a=function(t,a){$.ajax({url:"/api/ac/tag?type="+t+"&list",type:"GET",async:!1,success:function(i){return e.tagSources[t]=i,a()}})};async.each(t,a,function(){e.model.trigger("task:tag:types",e.tagSources),e.render(e)})},cleanup:function(){removeView(this)}});module.exports=TaskItemView;


},{"../../../../../vendor/jquery.timeago":130,"../../../../base/base_view":102,"../../../../config/ui.json":116,"../../../../mixins/utilities":128,"../templates/task_show_item_template.html":95,"async":131,"backbone":133,"bootstrap":138,"marked":155,"underscore":159}],100:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone");BaseComponent=Backbone.View.extend({initialize:function(){}}),module.exports=BaseComponent;


},{"backbone":133,"underscore":159}],101:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone");BaseController=Backbone.View.extend({initialize:function(){},initializeViewSafely:function(e){this.view?this.view.initialize():this.view=new e},cleanup:function(){$(this).remove()}}),module.exports=BaseController;


},{"backbone":133,"underscore":159}],102:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utilities=require("../mixins/utilities"),BaseView=Backbone.View.extend({initialize:function(){},cleanup:function(){removeView(this)}});module.exports=BaseView;


},{"../mixins/utilities":128,"backbone":133,"underscore":159}],103:[function(require,module,exports){
module.exports='<div class="alert <% if (alert.type) { %><%= alert.type %><% } else { %>alert-danger<% } %>" id="alert-main">\n  <% if (alert.dismiss) { %>\n  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  <% } %>\n  <%= alert.message %>\n</div>\n';


},{}],104:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../mixins/utilities"),marked=require("marked"),BaseComponent=require("../base/base_component"),jqSelection=require("../../vendor/jquery.selection"),EditorTemplate=require("./markdown_editor_template.html");MarkdownEditor=BaseComponent.extend({events:{"click .btn":"clickButton"},initialize:function(t){return this.options=t,this.actions={bold:{before:"**",text:"text",after:"**"},italic:{before:"_",text:"text",after:"_"},strikethrough:{before:"~~",text:"text",after:"~~"},code:{before:"`",text:"code",after:"`"},link:{before:"[Link Title](",text:"http://",after:")"}},this},render:function(){var t={id:this.options.id,validate:this.options.validate,rows:this.options.rows,maxlength:this.options.maxlength,placeholder:this.options.placeholder,title:this.options.title,data:this.options.data},e=_.template(EditorTemplate)(t);return this.$el.html(e),this},clickButton:function(t){t.preventDefault&&t.preventDefault();var e=$(t.currentTarget),i=this.$("#"+this.options.id).selection(),s=e.data("edit");if("preview"!=s&&"edit"!=s&&"help"!=s){var o=this.$("#"+this.options.id).selection("getPos"),r=this.$("#"+this.options.id).val(),n=r.substring(o.start-this.actions[s].before.length,o.start),h=r.substring(o.end,o.end+this.actions[s].after.length),a=this.actions[s].before,l=this.actions[s].after;n==a&&h==l&&(a="",l=""),""==i&&(i=this.actions[s].text),this.$("#"+this.options.id).selection("insert",{text:a,mode:"before"}).selection("replace",{text:i}).selection("insert",{text:l,mode:"after"})}else if("help"==s)this.$(".help").is(":visible")?(this.$(".help").hide(),e.removeClass("active")):(this.$(".help").show(),e.addClass("active"));else if(this.$(".preview").is(":visible"))this.$(".btn-edit").hide(),this.$(".btn-preview").show(),this.$(".preview").hide(),this.$("#"+this.options.id).show();else{var d=marked(this.$("#"+this.options.id).val());this.$(".btn-preview").hide(),this.$(".btn-edit").show(),this.$(".preview").html(d),this.$("#"+this.options.id).hide(),this.$(".preview").show()}},cleanup:function(){removeView(this)}}),module.exports=MarkdownEditor;


},{"../../vendor/jquery.selection":129,"../base/base_component":100,"../mixins/utilities":128,"./markdown_editor_template.html":105,"backbone":133,"marked":155,"underscore":159}],105:[function(require,module,exports){
module.exports='<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group btn-group-sm">\n    <button type="button" class="btn btn-c0" data-edit="bold" title="Bold"><i class="fa fa-bold" alt="Bold"></i></button>\n    <button type="button" class="btn btn-c0" data-edit="italic" title="Italic"><i class="fa fa-italic" alt="Italic"></i></button>\n    <button type="button" class="btn btn-c0" data-edit="strikethrough" title="Strikethrough"><i class="fa fa-strikethrough" alt="Strikethrough"></i></button>\n    <button type="button" class="btn btn-c0" data-edit="code" title="Code"><i class="fa fa-code" alt="Code"></i></button>\n  </div>\n  <div class="btn-group btn-group-sm">\n    <button type="button" class="btn btn-c0" data-edit="link" title="Link"><i class="fa fa-link" alt="Link"></i></button>\n  </div>\n  <div class="btn-group btn-group-sm">\n    <button type="button" class="btn btn-c0" data-edit="help"><i class="fa fa-question-circle" alt="Help"></i> Help</button>\n  </div>\n\n  <div class="btn-group btn-group-sm">\n    <button type="button" class="btn btn-c1 btn-preview" data-edit="preview"><i class="fa fa-eye" alt="Open"></i> Preview</button>\n  </div>\n  <div class="btn-group btn-group-sm">\n    <button type="button" class="btn btn-c1 btn-edit" data-edit="edit" style="display: none;"><i class="fa fa-pencil" alt="Edit"></i> Edit</button>\n  </div>\n</div>\n<div class="help">\n  You can use any <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a> or <a href="https://help.github.com/articles/github-flavored-markdown" target="_blank">GitHub Flavored Markdown</a> syntax in this text box.\n</div>\n<textarea\n  <%if (!_.isUndefined(maxlength)) { %>maxlength="<%= maxlength %>"<% } %>\n  <% if (!_.isUndefined(rows)) { %>rows="<%= rows %>"<% } %>\n  class="form-control validate"\n  id="<%= id %>"\n  data-validate="<% if (!_.isUndefined(validate)) { %><%= validate.join(\',\') %><% } %>"\n  <% if (!_.isUndefined(placeholder)) { %>placeholder="<%= placeholder %>"<% } %>\n  <% if (!_.isUndefined(title)) { %>title="<%= title %>"<% } %>\n  ><%= data %></textarea>\n<div class="preview" style="display: none;"></div>\n';


},{}],106:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utils=require("../mixins/utilities"),BaseComponent=require("../base/base_component"),ModalTemplate=require("./modal_template.html");Modal=BaseComponent.extend({events:{"click .link-backbone":"link"},initialize:function(e){this.options=e},render:function(){var e={id:this.options.id,modalTitle:this.options.modalTitle,disableClose:this.options.disableClose},i=_.template(ModalTemplate)(e);return this.$el.append(i),this},link:function(e){e.preventDefault&&e.preventDefault(),$("#"+this.options.id).bind("hidden.bs.modal",function(){linkBackbone(e)}).modal("hide")},cleanup:function(){removeView(this)}}),module.exports=Modal;


},{"../base/base_component":100,"../mixins/utilities":128,"./modal_template.html":109,"backbone":133,"underscore":159}],107:[function(require,module,exports){
var Bootstrap=require("bootstrap"),_=require("underscore"),Backbone=require("backbone"),utils=require("../mixins/utilities"),ModalTemplate=require("./modal_alert_template.html"),ModalAlert=Backbone.View.extend({events:{"submit #modal-form":"post"},initialize:function(e){this.options=e},render:function(){var e=_.template(ModalTemplate)(this.options);return this.$el.html(e),this.$el.i18n(),$(this.options.modalDiv).modal("show"),this},post:function(e){var t=this,i=!1;e.preventDefault&&e.preventDefault(),t.options.validateBeforeSubmit&&$(".validate").each(function(){return i=validate({currentTarget:this}),i?!1:void 0}),i||$(this.options.modalDiv).bind("hidden.bs.modal",function(){t.options.callback(e)}).modal("hide")},cleanup:function(){removeView(this)}});module.exports=ModalAlert;


},{"../mixins/utilities":128,"./modal_alert_template.html":108,"backbone":133,"bootstrap":138,"underscore":159}],108:[function(require,module,exports){
module.exports='<form role="form" action="" id="modal-form">\n  <div class="modal-body">\n    <%= content %>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-c0" data-dismiss="modal"><%= cancel %></button>\n    <input type="submit" class="btn btn-c2" id="submit" value="<%= submit %>"/>\n  </div>\n</form>\n';


},{}],109:[function(require,module,exports){
module.exports='<div class="modal fade"\n  id="<%- id %>"\n  role="dialog"\n  aria-hidden="true"\n  tabindex="-1"\n  <% if (disableClose === true) { %>\n  data-backdrop="static"\n  data-keyboard="false"\n  <% } %>\n  >\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <% if (disableClose !== true) { %>\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <% } %>\n        <h4 class="modal-title"><%- modalTitle %></h4>\n      </div>\n\n      <div class="modal-template">\n\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n';


},{}],110:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),utilities=require("../mixins/utilities"),BaseView=require("../base/base_view"),ModalWizardTemplate=require("./modal_wizard_template.html");ModalWizard=BaseView.extend({events:{"click .wizard-forward":"moveWizardForward","click .wizard-backward":"moveWizardBackward","click .wizard-submit":"submit","click .wizard-cancel":"cancel"},initialize:function(i){this.options=i,this.initializeListeners()},initializeListeners:function(){this.model&&this.listenTo(this.model,this.options.modelName+":modal:hide",function(){$(".modal.in").modal("hide")})},render:function(){var i={id:this.options.id,modalTitle:this.options.modalTitle,draft:this.options.draft},t=_.template(ModalWizardTemplate)(i);return this.$el.html(t),this},setChildView:function(i){return this.childView=i,this},setNext:function(i){return this.childNext=i,this},setSubmit:function(i){return this.childSubmit=i,this},moveWizardForward:function(i){function t(){e.hide(),e.removeClass("current"),r.addClass("current"),r.show()}i.preventDefault&&i.preventDefault();var e=$(".current"),r=e.next(),n=(r.html(),!1);if(this.childNext&&(n=this.childNext(i,e)),n!==!0){var a={exists:function(){return!_.isUndefined(r.next().html())},doesNotExist:function(){return _.isUndefined(r.next().html())}};t(),a.doesNotExist()&&($("button.wizard-forward").hide(),$("button.wizard-submit").show())}},moveWizardBackward:function(i){i.preventDefault&&i.preventDefault();var t=$(".current"),e=t.prev(),r=e.html();_.isUndefined(r)||(t.hide(),t.removeClass("current"),e.addClass("current"),e.show(),$("button.wizard-forward").show(),$("button.wizard-submit").hide())},submit:function(i){i.preventDefault&&i.preventDefault();var t=this.options.data(this),e=!1,r=$(i.currentTarget).data("state");this.childSubmit&&(e=this.childSubmit(i,this.$(".current"))),e!==!0&&($(".modal.in").modal("hide"),r&&(t.state=r),this.collection.trigger(this.options.modelName+":save",t))},cancel:function(i){i.preventDefault&&i.preventDefault(),$(".modal.in").modal("hide")},cleanup:function(){this.childView&&this.childView.cleanup(),removeView(this)}}),module.exports=ModalWizard;


},{"../base/base_view":102,"../mixins/utilities":128,"./modal_wizard_template.html":111,"backbone":133,"underscore":159}],111:[function(require,module,exports){
module.exports='<div class="modal fade" id="<%- id %>" role="dialog" aria-hidden="true" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title"><%- modalTitle %></h4>\n      </div>\n\n      <div class="modal-body">\n\n      </div>\n\n      <div class="modal-footer">\n        <button type="button" class="btn btn-c0 wizard-cancel" data-dismiss="modal">Cancel</button>\n        <% if (draft) { %><button type="button" class="btn btn-c0 wizard-submit" data-state="draft">Save Draft</button><% } %>\n        <button type="button" class="btn btn-c2 wizard-backward"><i class="fa fa-chevron-left"></i> Back</button>\n        <button type="button" class="btn btn-c2 wizard-forward">Next <i class="fa fa-chevron-right"></i></button>\n        <button type="button" class="btn btn-c2 wizard-submit" style="display: none;">Create</button>\n      </div>\n\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div>\n';


},{}],112:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),async=require("async"),utils=require("../mixins/utilities"),marked=require("marked"),BaseComponent=require("../base/base_component"),jqSelection=require("../../vendor/jquery.selection");TagFactory=BaseComponent.extend({initialize:function(e){return this.options=e,this},addTagEntities:function(e,t,a){return e&&"undefined"!=typeof e.unmatched&&e.unmatched?(delete e.unmatched,void $.ajax({url:"/api/tagEntity",type:"POST",data:{type:e.tagType,name:e.id,data:e.data},success:function(e){return t.data&&(t.data.newTag=e,t.data.newItemTags.push(e)),a(null,e)}})):a()},removeTag:function(e,t){$.ajax({url:"/api/tag/"+e,type:"DELETE",success:function(){return t()}})},addTag:function(e,t,a,n){var i={};i[a]=t,i.tagId=_.isFinite(e)?e:e.id,$.ajax({url:"/api/tag",type:"POST",data:i,success:function(){return n()},error:function(e){return n(e)}})},createTagDropDown:function(e){var t={placeholder:"Start typing to select a "+e.type,minimumInputLength:2,multiple:!0,width:e.width||"500px",tokenSeparators:e.tokenSeparators||[],formatResult:function(e){return e.name},formatSelection:function(e){return e.name},createSearchChoice:function(t){return{unmatched:!0,tagType:e.type,id:t,value:t,temp:!0,name:"<b>"+t+"</b> <i>"+("location"!==e.type?"click to create a new tag with this value":"search for this location")+"</i>"}},ajax:{url:"/api/ac/tag",dataType:"json",data:function(t){return{type:e.type,q:t}},results:function(e){return{results:e}}}},a=self.$(e.selector);a.remote=!0,a.select2(t).on("select2-selecting",function(e){if("location"===e.choice.tagType){{self.$(e.currentTarget)}e.choice.temp?(e.choice.name="<em>Searching for <strong>"+e.choice.value+"</strong></em>",this.temp=!0,$.get("/api/location/suggest?q="+e.choice.value,function(e){e=_(e).map(function(e){return{id:e.name,name:e.name,unmatched:!0,tagType:"location",data:_(e).omit("name")}});var t=a.select2("data");this.cache=_.reject(t,function(e){return e.name.indexOf("<em>Searching for <strong>")>=0}),a.select2({multiple:!0,data:{results:e,text:"name"}}).select2("data",this.cache).select2("open"),a.remote=!1})):(this.reload=!0,delete this.temp)}else e.choice.hasOwnProperty("unmatched")&&e.choice.unmatched&&(e.choice.name=e.val)}).on("select2-blur",function(){!this.reload&&this.temp&&(this.reload=!0,delete this.temp)}).on("select2-open",function(){var e=this;this.reload&&(this.cache=a.select2("data"),setTimeout(function(){a.select2(t).select2("data",e.cache).select2("open")},0),delete this.reload)})},createDiff:function(e,t){var a={remove:[],add:[],none:[]},n=null;return _.each(e,function(i,r){n=null,_.each(t,function(e,a){e&&parseInt(e.id)==i.tagId&&(t.splice(a,1),n=r)}),_.isFinite(n)?a.none.push(parseInt(e[n].tagId)):a.remove.push(parseInt(i.id))}),a.add=t,a}}),module.exports=TagFactory;


},{"../../vendor/jquery.selection":129,"../base/base_component":100,"../mixins/utilities":128,"async":131,"backbone":133,"marked":155,"underscore":159}],113:[function(require,module,exports){
module.exports={
  "resGetPath"      : "/locales/__lng__/__ns__.json",

  "lng"             : "en-US",

  "fallbackLng"     : "en",

  "useLocalStorage" : false,

  "sendMissing"     : false,
  "sendMissingTo"   : "current"
}

},{}],114:[function(require,module,exports){
module.exports={
  "signin": true,
  "oauth": [
    "linkedin",
    "myusa"
  ],
  "config": {
    "linkedin": {
      "name": "LinkedIn",
      "image": "/images/login/linkedin.png",
      "endpoint": "/api/auth/oauth/linkedin",
      "params": {"scope": ["r_basicprofile", "r_fullprofile", "r_emailaddress", "r_network"]}
    },
    "myusa": {
      "name": "MyUSA",
      "image": "/images/login/myusa.png",
      "endpoint": "/api/auth/oauth/myusa",
      "params": { "scope": ["profile.email", "profile.first_name", "profile.last_name"] }
    }
  },
  "local": {
    "enabled": true,
    "expand": true,
    "logout": true
  },
  "terms": {
    "enabled": false,
    "name": "Terms and Conditions",
    "link": "https://18f.gsa.gov/"
  },
  "profile": {
    "edit": true,
    "editUrl": null
  }
}

},{}],115:[function(require,module,exports){
module.exports={tags:{skill:{icon:"icon-atom","class":"skill",id:"skill",type:"skill",name:"Skill",plural:"Skills"},topic:{icon:"fa fa-briefcase","class":"topic",id:"topic",type:"topic",name:"Topic",plural:"Topics"},agency:{icon:"icon-library","class":"agency",id:"agency",type:"agency",name:"Agency",plural:"Agencies"},location:{icon:"fa fa-map-marker","class":"location",id:"location",type:"location",name:"Work Location",plural:"Work Locations"},"task-skills-required":{icon:"fa fa-map-marker","class":"task-skills-required",id:"task-skills-required",type:"task-skills-required",name:"Skill Required",plural:"Skills Required"},"task-time-required":{icon:"fa fa-calendar-o","class":"task-time-required",id:"task-time-required",type:"task-time-required",name:"Time Commitment",plural:"Time Commitment"},"task-people":{icon:"fa fa-group","class":"task-people",id:"task-people",type:"task-people",name:"Personnel Needed",plural:"Personnel Needed"},"task-length":{icon:"fa fa-bullseye","class":"task-length",id:"task-length",type:"task-length",name:"Deadline",plural:"Deadline"},"task-time-estimate":{icon:"fa fa-cogs","class":"task-time-estimate",id:"task-time-estimate",type:"task-time-estimate",name:"Estimated Time Required",plural:"Estimated Time Required"}},project:["skill","topic","agency","location"],projects:["skill","topic","agency","location"],profile:["skill","topic"],profiles:["skill","topic","agency","location"],task:["skill","topic","location","task-people","task-time-estimate","task-time-required","task-length"],tasks:["skill","topic","agency","location","task-skills-required","task-time-required","task-people","task-length","task-time-estimate"]};


},{}],116:[function(require,module,exports){
module.exports={
  "project": {
    "show": true
  },
  "supervisorEmail": {
	  "useSupervisorEmail": false
  },
  "home": {
    "logged_in_path": "/projects"
  },
  "faq" : {
    "show" : false,
    "url"  : "/faq"
  },
  "systemEmail" : "test@midas.com",
  "browse": {
    "pageSize" : 27,
    "useInfiniteScroll" : false
  },
  "states" : [{"value": "draft","label":"Draft"},{"value": "open","label":"Open"},{"value":"assigned","label":"Assigned"},{"value": "completed","label":"Completed"},{"value":"archived","label":"Archived"}]
}

},{}],117:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),CommentModel=require("./comment_model"),CommentListController=require("../../apps/comments/list/controllers/comment_list_controller"),CommentCollection=Backbone.Collection.extend({urlRoot:"/api/comment",model:CommentModel,initialize:function(){var e=this;this.listenTo(this,"comment:save",function(o,t){e.addAndSave(o,t)})},addAndSave:function(e,o){var t,n=this;t=new CommentModel({parentId:e.parentId,value:e.comment,taskId:e.taskId,projectId:e.projectId,topic:e.topic}),n.add(t),n.models.forEach(function(t){t.attributes.value===e.comment&&t.save(null,{success:function(e,t){n.trigger("comment:save:success",e,t,o)}})})}});module.exports=CommentCollection;


},{"../../apps/comments/list/controllers/comment_list_controller":33,"./comment_model":118,"backbone":133,"underscore":159}],118:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),CommentModel=Backbone.Model.extend({urlRoot:"/api/comment",initialize:function(){this.saveComment()},saveComment:function(){var e=this;this.listenTo(this,"comment:save",function(o,n,t){e.save({parentId:o,value:n,projectId:t},{success:function(){e.trigger("comment:save:success")}})})}});module.exports=CommentModel;


},{"backbone":133,"underscore":159}],119:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),EventModel=Backbone.Model.extend({urlRoot:"/api/event"});module.exports=EventModel;


},{"backbone":133,"underscore":159}],120:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),EventModel=require("./event_model"),EventCollection=Backbone.Collection.extend({model:EventModel,parse:function(e){return e?e.events:void 0},url:"/api/event",initialize:function(){this.addAndSave()},addAndSave:function(){var e=this;this.listenTo(this,"event:save",function(t){e.ev=new EventModel({title:t.title,description:t.description,start:t.start,end:t.end,location:t.location,projectId:t.projectId}),e.add(e.event),e.ev.save({},{success:function(t,n){e.trigger("event:save:success",t,n)}})})}});module.exports=EventCollection;


},{"./event_model":119,"backbone":133,"underscore":159}],121:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),ProfileModel=Backbone.Model.extend({urlRoot:"/api/user",initialize:function(){this.initializeProfileSave(),this.initializeProfileGet()},parse:function(e){return _(e).each(function(e,i,t){e||delete t[i]}),e},initializeProfileGet:function(){var e=this;this.listenTo(this,"profile:fetch",function(i){e.remoteGet(i)})},remoteGet:function(e){var i=this;e&&this.set({id:e}),this.fetch({success:function(e){i.trigger("profile:fetch:success",e)},error:function(e,t){i.trigger("profile:fetch:error",e,t)}})},initializeProfileSave:function(){var e=this;this.listenTo(this,"profile:updateWithPhotoId",function(i){e.save({photoId:i.id},{success:function(i){e.trigger("profile:updatedPhoto",i)},error:function(){}})}),this.listenTo(this,"profile:save",function(i){e.save({name:i.name,username:i.username,title:i.title,bio:i.bio},{success:function(i){e.trigger("profile:save:success",i)},error:function(i){e.trigger("profile:save:fail",i)}})}),this.listenTo(this,"profile:removeAuth",function(i){var t=this.get("auths");t.splice(t.indexOf(i),1),e.save({auths:t},{success:function(t){e.trigger("profile:removeAuth:success",t,i)},error:function(t){e.trigger("profile:removeAuth:fail",t,i)}})})}});module.exports=ProfileModel;


},{"backbone":133,"underscore":159}],122:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),ProjectModel=Backbone.Model.extend({defaults:{title:null,description:null,archived:!1},initialize:function(){var t=this;this.listenTo(this,"project:model:fetch",function(e){t.remoteGet(e)}),this.listenTo(this,"project:model:update",function(e){t.update(e)}),this.listenTo(this,"project:update:photoId",function(e){t.updatePhoto(e)}),this.listenTo(this,"project:update:state",function(e){t.updateState(e)}),this.listenTo(this,"projectowner:show:changed",function(e){t.updateOwners(e)}),this.listenTo(this,"project:update:tasks:orphan",function(e){t.orphan(e)})},urlRoot:"/api/project",remoteGet:function(t){var e=this;this.set({id:t}),this.fetch({success:function(t){e.trigger("project:model:fetch:success",t)}})},update:function(t){var e=this;this.save({title:t.title,description:t.description},{success:function(t){e.trigger("project:save:success",t)}})},updatePhoto:function(t){var e=this;this.save({coverId:t.id},{success:function(t){e.trigger("project:updated:photo:success",t)}})},updateState:function(t){var e=this;this.save({state:t},{success:function(t){e.trigger("project:update:state:success",t)}})},updateOwners:function(t){var e=this;this.save({owners:t},{success:function(t){e.trigger("project:update:owners:success",t)}})},hasOpenTasks:function(t){var e=!1,s=0;return _.each(t.models,function(t){-1!=_.indexOf(["open","assigned"],t.attributes.state)&&(e=!0,s++)}),{hasOpenTasks:e,count:s}},orphan:function(t){t.each(function(t){t.trigger("task:update:orphan",{})})}});module.exports=ProjectModel;


},{"backbone":133,"underscore":159}],123:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),ProjectModel=require("./project_model"),ProjectsCollection=Backbone.Collection.extend({model:ProjectModel,url:"/api/project/findAll",parse:function(e){return e.projects},initialize:function(){var e=this;this.listenTo(this,"project:save",function(o){e.addAndSave(o)})},addAndSave:function(e){var o,t=this;o=new ProjectModel({title:e.title,description:e.description}),o.save({},{success:function(e){t.add(o),t.trigger("project:save:success",e)}})}});module.exports=ProjectsCollection;


},{"./project_model":122,"backbone":133,"underscore":159}],124:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),TaskModel=Backbone.Model.extend({defaults:{name:null,description:null},urlRoot:"/api/task",initialize:function(){this.listenTo(this,"task:save",function(t){this.save(t)}),this.listenTo(this,"task:model:fetch",function(t){this.remoteGet(t)}),this.listenTo(this,"task:update",function(t){this.update(t)}),this.listenTo(this,"task:update:state",function(t){this.updateState(t)}),this.listenTo(this,"task:update:orphan",function(t){this.orphan(t)})},update:function(t){var s=this;this.save(t,{success:function(t){s.trigger("task:update:success",t)}})},updateState:function(t){var s=this;this.save({state:t},{success:function(t){s.trigger("task:update:state:success",t)}})},orphan:function(){var t=this;this.save({projectId:null},{success:function(s){t.trigger("task:update:orphan:success",s)}})},remoteGet:function(t){var s=this;this.set({id:t}),this.fetch({success:function(t){s.trigger("task:model:fetch:success",t)}})}});module.exports=TaskModel;


},{"backbone":133,"underscore":159}],125:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),TaskModel=require("./task_model"),TasksCollection=Backbone.Collection.extend({model:TaskModel,parse:function(e){return e?e.tasks?e.tasks:e:[]},url:"/api/task",initialize:function(){var e=this;this.listenTo(this,"task:save",function(s){e.addAndSave(s)})},addAndSave:function(e){var s=this;s.task=new TaskModel(e),s.task.save(null,{success:function(){s.trigger("task:save:success",s.task.id)}})}});module.exports=TasksCollection;


},{"./task_model":124,"backbone":133,"underscore":159}],126:[function(require,module,exports){
var _=require("underscore"),Backbone=require("backbone"),BaseComponent=require("../base/base_component"),Bootstrap=require("bootstrap"),utils=require("./utilities"),PopoverProfile=require("./templates/popover_profile.html");Popovers=BaseComponent.extend({popoverPeopleInit:function(e){$(e).popover({placement:"auto top",trigger:"manual",html:"true",title:"load",container:"body",content:'<div class="popover-spinner"><div class="loading">Fetching Information</div><i class="fa fa-spinner fa-spin"></i></div>',template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title" style="display:none; visibility:hidden"></h3><div class="popover-content"></div></div>'}).on("mouseleave",function(){var e=this,o=function(){$(".popover:hover").length?setTimeout(o,100):$(e).popover("hide")};setTimeout(o,100)})},popoverPeopleOn:function(e){e.preventDefault&&e.preventDefault();var o=$(e.currentTarget),t=o.data("bs.popover");_.isUndefined(o.data("userid"))||_.isUndefined(t)||(o.popover("show"),"load"==t.options.title&&$.ajax({url:"/api/user/info/"+o.data("userid")}).done(function(e){var i=_.template(PopoverProfile)({data:e});t.options.title="done",t.options.content=i,t.setContent(),t.$tip.addClass(t.options.placement),$(".popover").on("click",".link-backbone",function(e){o.popover("hide"),linkBackbone(e)})}))},popoverClick:function(e){e.preventDefault&&e.preventDefault();var o=$(e.currentTarget).data("userid");$(e.currentTarget).popover("hide"),Backbone.history.navigate("profile/"+o,{trigger:!0})}}),module.exports=Popovers;


},{"../base/base_component":100,"./templates/popover_profile.html":127,"./utilities":128,"backbone":133,"bootstrap":138,"underscore":159}],127:[function(require,module,exports){
module.exports='<div class="popover-table">\n  <div class="popover-row">\n    <div class="popover-cell-left">\n      <img align="left" src="/api/user/photo/<%- data.id %>" class="popover-image"/>\n    </div>\n    <div class="popover-cell-right popover-person">\n      <div class="title"><a class="link-backbone" href="/profile/<%- data.id %>"><%- data.name %></a></div>\n      <% if (data.title) { %><div class="text-line"><i class="fa fa-briefcase"></i> <%- data.title %></div><% } %>\n      <% if (data.agency) { %><div class="text-line"><i class="fa fa-library"></i> <%- data.agency.tag.name %></div><% } %>\n      <% if (data.location) { %><div class="text-line"><span class="fa fa-map-marker"></span> <%- data.location.tag.name %></div><% } %>\n    </div>\n  </div>\n</div>';


},{}],128:[function(require,module,exports){
(function (global){
global.getCurrentModelFromId=function(r,e){var t=0;for(id=parseInt(e),models=r.models;t<models.length;t+=1)if(models[t].id===id)return models[t]},global.getCurrentModelFromFormAttributes=function(r,e){for(var t,o=0,e=$.trim(e),i=r.models;o<i.length;o+=1)for(t in i[o].attributes)if(i[o].attributes[t]===e)return i[o]},global.removeView=function(r){r.undelegateEvents(),r.$el.html("")},global.clearEl=function(r){$(r).children().remove()},global.clearContainer=function(){$("#container").children().remove()},global.scrollTop=function(){$(window).scrollTop($(window).scrollTop())},global.organizeTags=function(r){var e={};for(t in r)_.has(e,r[t].tag.type)||(e[r[t].tag.type]=[]),e[r[t].tag.type].push(r[t].tag);return e},global.validate=function(r){var e=String($(r.currentTarget).data("validate")).split(","),t=$(r.currentTarget).val(),o=$(r.currentTarget).parents(".form-group, .checkbox")[0],n=!1;return _.each(e,function(e){if("empty"==e)return void(t?$(o).find(".error-empty").hide():($(o).find(".error-empty").show(),n=!0));if("checked"==e)return void($(r.currentTarget).prop("checked")!==!0?($(o).find(".error-checked").show(),n=!0):$(o).find(".error-checked").hide());if("count"==e.substring(0,5)){var a=parseInt(e.substring(5));return void(t.length>a?($(o).find(".error-"+e).show(),n=!0):$(o).find(".error-"+e).hide())}if("confirm"==e){var l=$(r.currentTarget).attr("id"),s=$("#"+l+"-confirm").val();return void(t!=s?($(o).find(".error-"+e).show(),n=!0):$(o).find(".error-"+e).hide())}if("button"==e&&($($(o).find("#"+$(r.currentTarget).attr("id")+"-button")[0]).hasClass("btn-success")?$(o).find(".error-"+e).hide():($(o).find(".error-"+e).show(),n=!0)),"email"==e){var d=!1;if(""!=t&&t.indexOf("@")>=2){var f=t.split("@"),u=f[1].split(".");if(u.length>=2)for(i=0;i<u.length;i++){if(u[i].length<2){d=!1;break}d=!0}}return void(!d||f[0].length<2?($(o).find(".error-email").show(),n=!0):$(o).find(".error-email").hide())}if("emaildomain"!=e);else{var c=$(r.currentTarget).data("emaildomain");if(""!=t&&t.indexOf("@")>=2){var f=t.split("@");f[1]!=c?($(o).find(".error-emaildomain").show(),n=!0):$(o).find(".error-emaildomain").hide()}}}),n===!0?$(o).addClass("has-error"):$(o).removeClass("has-error"),n},global.validatePassword=function(r,e){var t={username:!1,length:!1,upper:!1,lower:!1,number:!1,symbol:!1},o=r.toLowerCase().trim(),i=e.toLowerCase().trim();o!=i&&o.split("@",1)[0]!=i&&(t.username=!0),e&&e.length>=8&&(t.length=!0);for(var n=0;n<e.length;n++){var a=e.charAt(n);a===a.toLowerCase()&&a!==a.toUpperCase()?t.lower=!0:a===a.toUpperCase()&&a!==a.toLowerCase()?t.upper=!0:!isNaN(parseFloat(a))&&isFinite(a)&&(t.number=!0)}return/.*[^\w\s].*/.test(e)&&(t.symbol=!0),t},global.linkBackbone=function(r){if(r.metaKey!==!0&&r.ctrlKey!==!0&&2!=r.which){r.preventDefault&&r.preventDefault();var e=$(r.currentTarget).attr("href");Backbone.history.navigate(e,{trigger:!0})}};


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],129:[function(require,module,exports){
!function(t,e,r){var n=function(t){var n={text:"",start:0,end:0};if(!t.value)return n;try{if(e.getSelection)n.start=t.selectionStart,n.end=t.selectionEnd,n.text=t.value.slice(n.start,n.end);else if(r.selection){t.focus();var s=r.selection.createRange(),a=r.body.createTextRange();n.text=s.text;try{a.moveToElementText(t),a.setEndPoint("StartToStart",s)}catch(c){a=t.createTextRange(),a.setEndPoint("StartToStart",s)}n.start=t.value.length-a.text.length,n.end=n.start+s.text.length}}catch(c){}return n},s={getPos:function(t){var e=n(t);return{start:e.start,end:e.end}},setPos:function(t,r,n){n=this._caretMode(n),"start"==n?r.end=r.start:"end"==n&&(r.start=r.end),t.focus();try{if(t.createTextRange){var s=t.createTextRange();e.navigator.userAgent.toLowerCase().indexOf("msie")>=0&&(r.start=t.value.substr(0,r.start).replace(/\r/g,"").length,r.end=t.value.substr(0,r.end).replace(/\r/g,"").length),s.collapse(!0),s.moveStart("character",r.start),s.moveEnd("character",r.end-r.start),s.select()}else t.setSelectionRange&&t.setSelectionRange(r.start,r.end)}catch(a){}},getText:function(t){return n(t).text},_caretMode:function(t){switch(t=t||"keep",t===!1&&(t="end"),t){case"keep":case"start":case"end":break;default:t="keep"}return t},replace:function(e,r,s){var a=n(e),c=e.value,o=t(e).scrollTop(),i={start:a.start,end:a.start+r.length};e.value=c.substr(0,a.start)+r+c.substr(a.end),t(e).scrollTop(o),this.setPos(e,i,s)},insertBefore:function(e,r,s){var a=n(e),c=e.value,o=t(e).scrollTop(),i={start:a.start+r.length,end:a.end+r.length};e.value=c.substr(0,a.start)+r+c.substr(a.start),t(e).scrollTop(o),this.setPos(e,i,s)},insertAfter:function(e,r,s){var a=n(e),c=e.value,o=t(e).scrollTop(),i={start:a.start,end:a.end};e.value=c.substr(0,a.end)+r+c.substr(a.end),t(e).scrollTop(o),this.setPos(e,i,s)}};t.extend({selection:function(n){var s="text"==(n||"text").toLowerCase();try{if(e.getSelection){if(s)return e.getSelection().toString();var a,c=e.getSelection();return c.getRangeAt?a=c.getRangeAt(0):(a=r.createRange(),a.setStart(c.anchorNode,c.anchorOffset),a.setEnd(c.focusNode,c.focusOffset)),t("<div></div>").append(a.cloneContents()).html()}if(r.selection)return s?r.selection.createRange().text:r.selection.createRange().htmlText}catch(o){}return""}}),t.fn.extend({selection:function(t,e){switch(e=e||{},t){case"getPos":return s.getPos(this[0]);case"setPos":return this.each(function(){s.setPos(this,e)});case"replace":return this.each(function(){s.replace(this,e.text,e.caret)});case"insert":return this.each(function(){"before"==e.mode?s.insertBefore(this,e.text,e.caret):s.insertAfter(this,e.text,e.caret)});case"get":default:return s.getText(this[0])}return this}})}(jQuery,window,window.document);


},{}],130:[function(require,module,exports){
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=a(this),o=n.settings;return isNaN(e.datetime)||(0==o.cutoff||r(e.datetime)<o.cutoff)&&t(this).text(i(e.datetime)),this}function a(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:n.datetime(e)});var a=t.trim(e.text());n.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(a.length>0)||n.isTime(e)&&e.attr("title")||e.attr("title",a)}return e.data("timeago")}function i(t){return n.inWords(r(t))}function r(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return i(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var n=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function a(a,r){var n=t.isFunction(a)?a(r,e):a,o=i.numbers&&i.numbers[r]||r;return n.replace(/%d/i,o)}var i=this.settings.strings,r=i.prefixAgo,n=i.suffixAgo;this.settings.allowFuture&&0>e&&(r=i.prefixFromNow,n=i.suffixFromNow);var o=Math.abs(e)/1e3,s=o/60,u=s/60,m=u/24,d=m/365,f=45>o&&a(i.seconds,Math.round(o))||90>o&&a(i.minute,1)||45>s&&a(i.minutes,Math.round(s))||90>s&&a(i.hour,1)||24>u&&a(i.hours,Math.round(u))||42>u&&a(i.day,1)||30>m&&a(i.days,Math.round(m))||45>m&&a(i.month,1)||365>m&&a(i.months,Math.round(m/30))||1.5>d&&a(i.year,1)||a(i.years,Math.round(d)),c=i.wordSeparator||"";return void 0===i.wordSeparator&&(c=" "),t.trim([r,f,n].join(c))},parse:function(e){var a=t.trim(e);return a=a.replace(/\.\d+/,""),a=a.replace(/-/,"/").replace(/-/,"/"),a=a.replace(/T/," ").replace(/Z/," UTC"),a=a.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(a)},datetime:function(e){var a=t(e).attr(n.isTime(e)?"datetime":"title");return n.parse(a)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var o={init:function(){var a=t.proxy(e,this);a();var i=n.settings;i.refreshMillis>0&&setInterval(a,i.refreshMillis)},update:function(a){t(this).data("timeago",{datetime:n.parse(a)}),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:n.parse(t(this).attr(n.isTime(this)?"datetime":"title"))}),e.apply(this)}};t.fn.timeago=function(t,e){var a=t?o[t]:o.init;if(!a)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){a.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")});


},{}],131:[function(require,module,exports){
(function (process){
!function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var u=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},i=function(n,t){if(n.map)return n.map(t);var e=[];return u(n,function(n,r,u){e.push(t(n,r,u))}),e},c=function(n,t,e){return n.reduce?n.reduce(t,e):(u(n,function(n,r,u){e=t(e,n,r,u)}),e)},o=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,r.setImmediate="undefined"!=typeof setImmediate?function(n){setImmediate(n)}:r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){if(r=r||function(){},!t.length)return r();var i=0;u(t,function(u){e(u,n(function(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r(null))}))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e(null):u())})};u()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var u=a(t);u.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var a=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,c=0;!function o(){if(u>=t.length)return r();for(;n>c&&i<t.length;)i+=1,c+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,c-=1,u>=t.length?r():o())})}()}},l=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},f=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[a(n)].concat(e))}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},p=function(n,t,e,r){var u=[];t=i(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})};r.map=l(p),r.mapSeries=s(p),r.mapLimit=function(n,t,e,r){return y(t)(n,e,r)};var y=function(n){return f(n,p)};r.reduce=function(n,t,e,u){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){u(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,u){var c=i(n,function(n){return n}).reverse();r.reduce(c,t,e,u)},r.foldr=r.reduceRight;var m=function(n,t,e,r){var u=[];t=i(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(){r(i(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=l(m),r.filterSeries=s(m),r.select=r.filter,r.selectSeries=r.filterSeries;var v=function(n,t,e,r){var u=[];t=i(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(){r(i(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=l(v),r.rejectSeries=s(v);var h=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})};r.detect=l(h),r.detectSeries=s(h),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,i(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=o(n);if(!e.length)return t(null);var i={},a=[],l=function(n){a.unshift(n)},f=function(n){for(var t=0;t<a.length;t+=1)if(a[t]===n)return void a.splice(t,1)},s=function(){u(a.slice(0),function(n){n()})};l(function(){o(i).length===e.length&&(t(null,i),t=function(){})}),u(e,function(e){var a=n[e]instanceof Function?[n[e]]:n[e],p=function(n){var c=Array.prototype.slice.call(arguments,1);if(c.length<=1&&(c=c[0]),n){var a={};u(o(i),function(n){a[n]=i[n]}),a[e]=c,t(n,a),t=function(){}}else i[e]=c,r.setImmediate(s)},y=a.slice(0,Math.abs(a.length-1))||[],m=function(){return c(y,function(n,t){return n&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(e)};if(m())a[a.length-1](p,i);else{var v=function(){m()&&(f(v),a[a.length-1](p,i))};l(v)}})},r.waterfall=function(n,t){if(t=t||function(){},n.constructor!==Array){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var u=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),c=n.next();i.push(c?u(c):t),r.setImmediate(function(){n.apply(null,i)})}}};u(r.iterator(n))()};var d=function(n,t,e){if(e=e||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(o(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){d({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){d({map:y(t),each:a(t)},n,e)},r.series=function(n,t){if(t=t||function(){},n.constructor===Array)r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(o(n),function(t,r){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[t]=u,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var g=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};r.concat=l(g),r.concatSeries=s(g),r.whilst=function(n,t,e){n()?t(function(u){return u?e(u):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(u){return u?e(u):void(t()?r.doWhilst(n,t,e):e())})},r.until=function(n,t,e){n()?e():t(function(u){return u?e(u):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(u){return u?e(u):void(t()?e():r.doUntil(n,t,e))})},r.queue=function(t,e){function i(n,t,i,c){t.constructor!==Array&&(t=[t]),u(t,function(t){var u={data:t,callback:"function"==typeof c?c:null};i?n.tasks.unshift(u):n.tasks.push(u),n.saturated&&n.tasks.length===e&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var c=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(n,t){i(o,n,!1,t)},unshift:function(n,t){i(o,n,!0,t)},process:function(){if(c<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),c+=1;var r=function(){c-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+c===0&&o.drain(),o.process()},u=n(r);t(e.data,u)}},length:function(){return o.tasks.length},running:function(){return c}};return o},r.cargo=function(n,t){var e=!1,c=[],o={tasks:c,payload:t,saturated:null,empty:null,drain:null,push:function(n,e){n.constructor!==Array&&(n=[n]),u(n,function(n){c.push({data:n,callback:"function"==typeof e?e:null}),o.saturated&&c.length===t&&o.saturated()}),r.setImmediate(o.process)},process:function a(){if(!e){if(0===c.length)return void(o.drain&&o.drain());var r="number"==typeof t?c.splice(0,t):c.splice(0),l=i(r,function(n){return n.data});o.empty&&o.empty(),e=!0,n(l,function(){e=!1;var n=arguments;u(r,function(t){t.callback&&t.callback.apply(null,n)}),a()})}},length:function(){return c.length},running:function(){return e}};return o};var k=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&u(e,function(t){console[n](t)}))}]))}};r.log=k("log"),r.dir=k("dir"),r.memoize=function(n,t){var e={},r={};t=t||function(n){return n};var u=function(){var u=Array.prototype.slice.call(arguments),i=u.pop(),c=t.apply(null,u);c in e?i.apply(null,e[c]):c in r?r[c].push(i):(r[c]=[i],n.apply(null,u.concat([function(){e[c]=arguments;var n=r[c];delete r[c];for(var t=0,u=n.length;u>t;t++)n[t].apply(null,arguments)}])))};return u.memo=e,u.unmemoized=n,u},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.map(u,t,e)},r.timesSeries=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.mapSeries(u,t,e)},r.compose=function(){var n=Array.prototype.reverse.call(arguments);return function(){var t=this,e=Array.prototype.slice.call(arguments),u=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){u.apply(t,[n].concat(e))})}};var A=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=l(A),r.applyEachSeries=s(A),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof define&&define.amd?define([],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:t.async=r}();


}).call(this,require('_process'))
},{"_process":151}],132:[function(require,module,exports){
!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.returnExportsGlobal=e()}):"object"==typeof exports?module.exports=e():t.Autolinker=e()}(this,function(){var t=function(e){t.Util.assign(this,e),this.matchValidator=new t.MatchValidator};return t.prototype={constructor:t,urls:!0,email:!0,twitter:!0,newWindow:!0,stripPrefix:!0,className:"",htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,matcherRegex:function(){var t=/(^|[^\w])@(\w{1,15})/,e=/(?:[\-;:&=\+\$,\w\.]+@)/,r=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,i=/(?:www\.)/,n=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,s=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,a=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",t.source,")","|","(",e.source,n.source,s.source,")","|","(","(?:","(",r.source,n.source,")","|","(?:","(.?//)?",i.source,n.source,")","|","(?:","(.?//)?",n.source,s.source,")",")","(?:"+a.source+")?",")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,link:function(e){var r=this,i=this.getHtmlParser(),n=this.htmlCharacterEntitiesRegex,s=0,a=[];return i.parse(e,{processHtmlNode:function(t,e,r){"a"===e&&(r?s=Math.max(s-1,0):s++),a.push(t)},processTextNode:function(e){if(0===s)for(var i=t.Util.splitAndCapture(e,n),o=0,c=i.length;c>o;o++){var l=i[o],u=r.processTextNode(l);a.push(u)}else a.push(e)}}),a.join("")},getHtmlParser:function(){var e=this.htmlParser;return e||(e=this.htmlParser=new t.HtmlParser),e},getTagBuilder:function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new t.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},processTextNode:function(t){var e=this;return t.replace(this.matcherRegex,function(t,r,i,n,s,a,o,c,l){var u=e.processCandidateMatch(t,r,i,n,s,a,o,c,l);if(u){var h=e.createMatchReturnVal(u.match,u.matchStr);return u.prefixStr+h+u.suffixStr}return t})},processCandidateMatch:function(e,r,i,n,s,a,o,c,l){var u,h=c||l,g="",f="";if(r&&!this.twitter||s&&!this.email||a&&!this.urls||!this.matchValidator.isValidMatch(a,o,h))return null;if(this.matchHasUnbalancedClosingParen(e)&&(e=e.substr(0,e.length-1),f=")"),s)u=new t.match.Email({matchedText:e,email:s});else if(r)i&&(g=i,e=e.slice(1)),u=new t.match.Twitter({matchedText:e,twitterHandle:n});else{if(h){var m=h.match(this.charBeforeProtocolRelMatchRegex)[1]||"";m&&(g=m,e=e.slice(1))}u=new t.match.Url({matchedText:e,url:e,protocolUrlMatch:!!o,protocolRelativeMatch:!!h,stripPrefix:this.stripPrefix})}return{prefixStr:g,suffixStr:f,matchStr:e,match:u}},matchHasUnbalancedClosingParen:function(t){var e=t.charAt(t.length-1);if(")"===e){var r=t.match(/\(/g),i=t.match(/\)/g),n=r&&r.length||0,s=i&&i.length||0;if(s>n)return!0}return!1},createMatchReturnVal:function(e,r){var i;if(this.replaceFn&&(i=this.replaceFn.call(this,this,e)),"string"==typeof i)return i;if(i===!1)return r;if(i instanceof t.HtmlTag)return i.toString();var n=this.getTagBuilder(),s=n.build(e);return s.toString()}},t.link=function(e,r){var i=new t(r);return i.link(e)},t.match={},t.Util={abstractMethod:function(){throw"abstract"},assign:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},extend:function(e,r){var i=e.prototype,n=function(){};n.prototype=i;var s;s=r.hasOwnProperty("constructor")?r.constructor:function(){i.constructor.apply(this,arguments)};var a=s.prototype=new n;return a.constructor=s,a.superclass=i,delete r.constructor,t.Util.assign(a,r),s},ellipsis:function(t,e,r){return t.length>e&&(r=null==r?"..":r,t=t.substring(0,e-r.length)+r),t},indexOf:function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var r=0,i=t.length;i>r;r++)if(t[r]===e)return r;return-1},splitAndCapture:function(t,e){if(!e.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var r,i=[],n=0;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(r[0]),n=r.index+r[0].length;return i.push(t.substring(n)),i}},t.HtmlParser=t.Util.extend(Object,{htmlRegex:function(){var t=/[0-9a-zA-Z][0-9a-zA-Z:]*/,e=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,r=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,i=e.source+"(?:\\s*=\\s*"+r.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",i,"|",r.source+")",")*",">",")","|","(?:","<(/)?","("+t.source+")","(?:","\\s+",i,")*","\\s*/?",">",")"].join(""),"gi")}(),parse:function(t,e){e=e||{};for(var r,i=e.processHtmlNode||function(){},n=e.processTextNode||function(){},s=this.htmlRegex,a=0;null!==(r=s.exec(t));){var o=r[0],c=r[1]||r[3],l=!!r[2],u=t.substring(a,r.index);u&&n(u),i(o,c.toLowerCase(),l),a=r.index+o.length}if(a<t.length){var h=t.substring(a);h&&n(h)}}}),t.HtmlTag=t.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(e){t.Util.assign(this,e),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(t){return this.tagName=t,this},getTagName:function(){return this.tagName||""},setAttr:function(t,e){var r=this.getAttrs();return r[t]=e,this},getAttr:function(t){return this.getAttrs()[t]},setAttrs:function(e){var r=this.getAttrs();return t.Util.assign(r,e),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(t){return this.setAttr("class",t)},addClass:function(e){for(var r,i=this.getClass(),n=this.whitespaceRegex,s=t.Util.indexOf,a=i?i.split(n):[],o=e.split(n);r=o.shift();)-1===s(a,r)&&a.push(r);return this.getAttrs()["class"]=a.join(" "),this},removeClass:function(e){for(var r,i=this.getClass(),n=this.whitespaceRegex,s=t.Util.indexOf,a=i?i.split(n):[],o=e.split(n);a.length&&(r=o.shift());){var c=s(a,r);-1!==c&&a.splice(c,1)}return this.getAttrs()["class"]=a.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(t){return-1!==(" "+this.getClass()+" ").indexOf(" "+t+" ")},setInnerHtml:function(t){return this.innerHtml=t,this},getInnerHtml:function(){return this.innerHtml||""},toString:function(){var t=this.getTagName(),e=this.buildAttrsStr();return e=e?" "+e:"",["<",t,e,">",this.getInnerHtml(),"</",t,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var t=this.getAttrs(),e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+'="'+t[r]+'"');return e.join(" ")}}),t.MatchValidator=t.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(t,e,r){return e&&!this.isValidUriScheme(e)||this.urlMatchDoesNotHaveProtocolOrDot(t,e)||this.urlMatchDoesNotHaveAtLeastOneWordChar(t,e)||this.isInvalidProtocolRelativeMatch(r)?!1:!0},isValidUriScheme:function(t){var e=t.match(this.uriSchemeRegex)[0];return"javascript:"!==e&&"vbscript:"!==e},urlMatchDoesNotHaveProtocolOrDot:function(t,e){return!(!t||e&&this.hasFullProtocolRegex.test(e)||-1!==t.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(t,e){return t&&e?!this.hasWordCharAfterProtocolRegex.test(t):!1},isInvalidProtocolRelativeMatch:function(t){return!!t&&this.invalidProtocolRelMatchRegex.test(t)}}),t.AnchorTagBuilder=t.Util.extend(Object,{constructor:function(e){t.Util.assign(this,e)},build:function(e){var r=new t.HtmlTag({tagName:"a",attrs:this.createAttrs(e.getType(),e.getAnchorHref()),innerHtml:this.processAnchorText(e.getAnchorText())});return r},createAttrs:function(t,e){var r={href:e},i=this.createCssClass(t);return i&&(r["class"]=i),this.newWindow&&(r.target="_blank"),r},createCssClass:function(t){var e=this.className;return e?e+" "+e+"-"+t:""},processAnchorText:function(t){return t=this.doTruncate(t)},doTruncate:function(e){return t.Util.ellipsis(e,this.truncate||Number.POSITIVE_INFINITY)}}),t.match.Match=t.Util.extend(Object,{constructor:function(e){t.Util.assign(this,e)},getType:t.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:t.Util.abstractMethod,getAnchorText:t.Util.abstractMethod}),t.match.Email=t.Util.extend(t.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),t.match.Twitter=t.Util.extend(t.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),t.match.Url=t.Util.extend(t.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var t=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(t=this.url="http://"+t,this.protocolPrepended=!0),t},getAnchorHref:function(){var t=this.getUrl();return t.replace(/&amp;/g,"&")},getAnchorText:function(){var t=this.getUrl();return this.protocolRelativeMatch&&(t=this.stripProtocolRelativePrefix(t)),this.stripPrefix&&(t=this.stripUrlPrefix(t)),t=this.removeTrailingSlash(t)},stripUrlPrefix:function(t){return t.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(t){return t.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(t){return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t}}),t});


},{}],133:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){{var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,c,l,d;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,c=o.length;c>h;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;d>l;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;o>a;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,u,c,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(u)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,u=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n)?!1:(u&&u(h,t,n),void h.trigger("sync",h,t,n))},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;r>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,u,c,l=e.at,f=this.model,p=this.comparator&&null==l&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!p&&b&&x?[]:!1;for(s=0,r=t.length;r>s;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=u.parse(h,e)),u.set(h,e),p&&!c&&u.hasChanged(v)&&(c=!0)),t[s]=u;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;m.push(o),this._addReference(o,e)}o=u||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;r>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(c=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;r>s;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;r>s;s++)this.models.push(k[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;r>s;s++)(o=m[s]).trigger("add",o,this,e);(c||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});


},{"underscore":159}],134:[function(require,module,exports){
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var r=e-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var r,n=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&n-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=n,r=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=r-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=r,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(n,r,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,i._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,r=this,n=t.files[0],s=t.multipart||!e.support.xhrFileUpload,o="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",n)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(r,n){i.push({name:"array"===e.type(t.paramName)&&t.paramName[r]||o,value:n})})):(r._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(o,t.blob,n.name):e.each(t.files,function(n,s){(r._isInstanceOf("File",s)||r._isInstanceOf("Blob",s))&&i.append("array"===e.type(t.paramName)&&t.paramName[n]||o,s,s.uploadName||s.name)})),t.data=i):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)r.push(i),n-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,r){var n=e.Deferred(),s=n.promise();return i=i||this.options.context||s,t===!0?n.resolveWith(i,r):t===!1&&n.rejectWith(i,r),s.abort=n.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,i){var r=this,n=function(t){return e.Deferred().resolveWith(r,t).promise()};i.process=function(t,s){return(t||s)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():n(arguments)}).pipe(t,s)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===r._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),r=i&&i.length>1&&parseInt(i[1],10);return r&&r+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var r,n,s=this,o=t.files[0],a=o.size,l=t.uploadedBytes,p=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>p)&&!t.data?i?!0:l>=a?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(n=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(o,l,l+p,o.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,s._initXHRData(i),s._initProgressListener(i),r=(s._trigger("chunksend",null,i)!==!1&&e.ajax(i)||s._getXHRPromise(!1,i.context)).done(function(r,o,p){l=s._getUploadedBytes(p)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=r,i.textStatus=o,i.jqXHR=p,s._trigger("chunkdone",null,i),s._trigger("chunkalways",null,i),a>l?n():d.resolveWith(i.context,[r,o,p])}).fail(function(e,t,r){i.jqXHR=e,i.textStatus=t,i.errorThrown=r,s._trigger("chunkfail",null,i),s._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,r])})},this._enhancePromise(h),h.abort=function(){return r.abort()},n(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,r,n){var s=n._progress.total,o=n._response;n._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),n),o.result=n.result=t,o.textStatus=n.textStatus=i,o.jqXHR=n.jqXHR=r,this._trigger("done",null,n)},_onFail:function(e,t,i,r){var n=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),n.jqXHR=r.jqXHR=e,n.textStatus=r.textStatus=t,n.errorThrown=r.errorThrown=i,this._trigger("fail",null,r)},_onAlways:function(e,t,i,r){this._trigger("always",null,r)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r,n,s,o,a=this,l=a._getAJAXSettings(i),p=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,r=r||((n||a._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&a._getXHRPromise(!1,l.context,n)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var r=a._slots.shift();r;){if("pending"===a._getDeferredState(r)){r.resolve();break}r=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),o=s.pipe(p)):(this._sequence=this._sequence.pipe(p,p),o=this._sequence),o.abort=function(){return n=[void 0,"abort","abort"],r?r.abort():(s&&s.rejectWith(l.context,n),p())},this._enhancePromise(o)):p()},_onAdd:function(t,i){var r,n,s,o,a=this,l=!0,p=e.extend({},this.options,i),u=i.files,d=u.length,h=p.limitMultiFileUploads,c=p.limitMultiFileUploadSize,f=p.limitMultiFileUploadSizeOverhead,g=0,_=this._getParamName(p),m=0;if(!c||d&&void 0!==u[0].size||(c=void 0),(p.singleFileUploads||h||c)&&this._isXHRUpload(p))if(p.singleFileUploads||c||!h)if(!p.singleFileUploads&&c)for(s=[],r=[],o=0;d>o;o+=1)g+=u[o].size+f,(o+1===d||g+u[o+1].size+f>c||h&&o+1-m>=h)&&(s.push(u.slice(m,o+1)),n=_.slice(m,o+1),n.length||(n=_),r.push(n),m=o+1,g=0);else r=_;else for(s=[],r=[],o=0;d>o;o+=h)s.push(u.slice(o,o+h)),n=_.slice(o,o+h),n.length||(n=_),r.push(n);else s=[u],r=[_];return i.originalFiles=u,e.each(s||u,function(n,o){var p=e.extend({},i);return p.files=s?o:[o],p.paramName=r[n],a._initResponseObject(p),a._initProgressObject(p),a._addConvenienceMethods(t,p),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),p)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?i[0]:r}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r,n=this,s=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,s.resolve(t._file)):t.file(function(e){e.relativePath=i,s.resolve(e)},o):t.isDirectory?(r=t.createReader(),r.readEntries(function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){s.resolve(e)}).fail(o)},o)):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,r,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(r=t.prop("value"),!r)return e.Deferred().resolve([]).promise();i=[{name:r.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(n){r.files=n,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),i._trigger("change",e.Event("change",{delegatedEvent:t}),r)!==!1&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,r=t.dataTransfer,n={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){n.files=r,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),i.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,r=e(this.element[0].cloneNode(!1));e.each(r.data(),function(e,n){var s="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r.attr(s)&&(t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,r,n=this,s=e.Deferred(),o=s.promise();return o.abort=function(){return r=!0,i?i.abort():(s.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){if(!r){if(!e.length)return void s.reject();t.files=e,i=n._onSend(null,t).then(function(e,t,i){s.resolve(e,t,i)},function(e,t,i){s.reject(e,t,i)})}}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})});


},{}],135:[function(require,module,exports){
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(r){if(r.async){var n,a,o,i=r.initialIframeSrc||"javascript:false;";return{send:function(p,m){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",r.formAcceptCharset),o=/\?/.test(r.url)?"&":"?","DELETE"===r.type?(r.url=r.url+o+"_method=DELETE",r.type="POST"):"PUT"===r.type?(r.url=r.url+o+"_method=PUT",r.type="POST"):"PATCH"===r.type&&(r.url=r.url+o+"_method=PATCH",r.type="POST"),t+=1,a=e('<iframe src="'+i+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(r.paramName)?r.paramName:[r.paramName];a.unbind("load").bind("load",function(){var t;try{if(t=a.contents(),!t.length||!t[0].firstChild)throw new Error}catch(r){t=void 0}m(200,"success",{iframe:t}),e('<iframe src="'+i+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",a.prop("name")).prop("action",r.url).prop("method",r.type),r.formData&&e.each(r.formData,function(t,r){e('<input type="hidden"/>').prop("name",r.name).val(r.value).appendTo(n)}),r.fileInput&&r.fileInput.length&&"POST"===r.type&&(t=r.fileInput.clone(),r.fileInput.after(function(e){return t[e]}),r.paramName&&r.fileInput.each(function(t){e(this).prop("name",o[t]||r.paramName)}),n.append(r.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),r.fileInput.removeAttr("form")),n.submit(),t&&t.length&&r.fileInput.each(function(r,n){var a=e(t[r]);e(n).prop("name",a.prop("name")).attr("form",a.attr("form")),a.replaceWith(n)})}),n.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",i),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var r=t&&t[0];return r&&e.isXMLDoc(r)?r:e.parseXML(r.XMLDocument&&r.XMLDocument.xml||e(r.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})});


},{}],136:[function(require,module,exports){
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}s(e)},t.widget=function(e,i,n){var s,o,a,r,u={},d=e.split(".")[0];e=e.split(".")[1],s=d+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[d]=t[d]||{},o=t[d][e],a=t[d][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(u[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(u[e]=n)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},u,{constructor:a,namespace:d,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,u=a.length;u>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,u=n.call(arguments,1),d=this;return a=!r&&u.length?t.widget.extend.apply(null,[a].concat(u)):a,this.each(r?function(){var n,s=t.data(this,o);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,u),n!==s&&n!==e?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new s(a,this))}),d}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=n}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var u=n.match(/^(\w+)\s*(.*)$/),d=u[1]+o.eventNamespace,h=u[2];h?s.delegate(h,d,r):i.bind(d,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})});


},{}],137:[function(require,module,exports){
!function(e){if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){if("undefined"==typeof t)throw alert("momentjs is requried"),new Error("momentjs is required");var i=0,a=t,n=function(t,n){var o={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,minuteStepping:1,startDate:new a({y:1970}),endDate:(new a).add(50,"y"),collapse:!0,language:a.lang(),defaultDate:"",disabledDates:[],enabledDates:!1,icons:{},useStrict:!1,direction:"auto"},s={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},d=this,r=function(){var r,p,l,m=!1;if(d.options=e.extend({},o,n),d.options.icons=e.extend({},s,d.options.icons),d.element=e(t),c(),!d.options.pickTime&&!d.options.pickDate)throw new Error("Must choose at least one picker");if(d.id=i++,a.lang(d.options.language),d.date=a(),d.unset=!1,d.isInput=d.element.is("input"),d.component=!1,d.element.hasClass("input-group")&&(d.component=d.element.find(0==d.element.find(".datepickerbutton").size()?"[class^='input-group-']":".datepickerbutton")),d.format=d.options.format,l=a()._lang._longDateFormat,d.format||(d.format=d.isInput?d.element.data("format"):d.element.find("input").data("format"),d.format||(d.format=d.options.pickDate?l.L:"",d.options.pickDate&&d.options.pickTime&&(d.format+=" "),d.format+=d.options.pickTime?l.LT:"",d.options.useSeconds&&(~l.LT.indexOf(" A")?d.format=d.format.split(" A")[0]+":ss A":d.format+=":ss"))),d.options.use24hours=d.format.toLowerCase().indexOf("a")<1,d.component&&(m=d.component.find("span")),d.options.pickTime&&m&&m.addClass(d.options.icons.time),d.options.pickDate&&m&&(m.removeClass(d.options.icons.time),m.addClass(d.options.icons.date)),d.widget=e(A(d.options.pickDate,d.options.pickTime,d.options.collapse)).appendTo("body"),d.minViewMode=d.options.minViewMode||d.element.data("date-minviewmode")||0,"string"==typeof d.minViewMode)switch(d.minViewMode){case"months":d.minViewMode=1;break;case"years":d.minViewMode=2;break;default:d.minViewMode=0}if(d.viewMode=d.options.viewMode||d.element.data("date-viewmode")||0,"string"==typeof d.viewMode)switch(d.viewMode){case"months":d.viewMode=1;break;case"years":d.viewMode=2;break;default:d.viewMode=0}for(r=0;r<d.options.disabledDates.length;r++)p=d.options.disabledDates[r],p=a(p),p.isValid()||(p=a(d.options.startDate).subtract(1,"day")),d.options.disabledDates[r]=p.format("L");for(r=0;r<d.options.enabledDates.length;r++)p=d.options.enabledDates[r],p=a(p),p.isValid()||(p=a(d.options.startDate).subtract(1,"day")),d.options.enabledDates[r]=p.format("L");d.startViewMode=d.viewMode,d.setStartDate(d.options.startDate||d.element.data("date-startdate")),d.setEndDate(d.options.endDate||d.element.data("date-enddate")),f(),h(),w(),v(),k(),u(),x(),C(),""!==d.options.defaultDate&&d.setValue(d.options.defaultDate)},c=function(){var e=d.element.data();void 0!==e.pickdate&&(d.options.pickDate=e.pickdate),void 0!==e.picktime&&(d.options.pickTime=e.picktime),void 0!==e.useminutes&&(d.options.useMinutes=e.useminutes),void 0!==e.useseconds&&(d.options.useSeconds=e.useseconds),void 0!==e.minutestepping&&(d.options.minuteStepping=e.minutestepping),void 0!==e.startdate&&(d.options.startDate=e.startdate),void 0!==e.enddate&&(d.options.endDate=e.enddate),void 0!==e.collapse&&(d.options.collapse=e.collapse),void 0!==e.language&&(d.options.language=e.language),void 0!==e.defaultdate&&(d.options.defaultDate=e.defaultdate),void 0!==e.disableddates&&(d.options.disabledDates=e.disableddates),void 0!==e.enableddates&&(d.options.enabledDates=e.enableddates),void 0!==e.icons&&(d.options.icons=e.icons),void 0!==e.usestrict&&(d.options.useStrict=e.usestrict)},p=function(){var t="absolute",i=d.component?d.component.offset():d.element.offset(),a=e(window);d.width=d.component?d.component.outerWidth():d.element.outerWidth(),i.top=i.top+d.element.outerHeight(),void 0!==d.options.width&&d.widget.width(d.options.width),"left"===d.options.orientation&&(d.widget.addClass("left-oriented"),i.left=i.left-d.widget.width()+20),I()&&(t="fixed",i.top-=a.scrollTop(),i.left-=a.scrollLeft()),a.width()<i.left+d.widget.outerWidth()?(i.right=a.width()-i.left-d.width,i.left="auto",d.widget.addClass("pull-right")):(i.right="auto",d.widget.removeClass("pull-right")),d.widget.css({position:t,top:i.top,left:i.left,right:i.right})},l=function(e,t){d.element.trigger({type:"change.dp",date:a(d.date),oldDate:a(e)}),"change"!==t&&d.element.change()},m=function(e){d.element.trigger({type:"error.dp",date:a(e)})},u=function(e){a.lang(d.options.language);var t=e;t||(t=d.isInput?d.element.val():d.element.find("input").val(),t&&(d.date=a(t,d.format,d.options.useStrict)),d.date||(d.date=a())),d.viewDate=a(d.date).startOf("month"),g(),b()},f=function(){a.lang(d.options.language);var t,i=e("<tr>"),n=a.weekdaysMin();if(0==a()._lang._week.dow)for(t=0;7>t;t++)i.append('<th class="dow">'+n[t]+"</th>");else for(t=1;8>t;t++)i.append(7==t?'<th class="dow">'+n[0]+"</th>":'<th class="dow">'+n[t]+"</th>");d.widget.find(".datepicker-days thead").append(i)},h=function(){a.lang(d.options.language);for(var e="",t=0,i=a.monthsShort();12>t;)e+='<span class="month">'+i[t++]+"</span>";d.widget.find(".datepicker-months td").append(e)},g=function(){a.lang(d.options.language);var t,i,n,o,s,r,c,p,l=d.viewDate.year(),m=d.viewDate.month(),u=d.options.startDate.year(),f=d.options.startDate.month(),h=d.options.endDate.year(),g=d.options.endDate.month(),w=[],v=a.months();for(d.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-days th:eq(1)").text(v[m]+" "+l),t=a(d.viewDate).subtract("months",1),r=t.daysInMonth(),t.date(r).startOf("week"),(l==u&&f>=m||u>l)&&d.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(l==h&&m>=g||l>h)&&d.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),i=a(t).add(42,"d");t.isBefore(i);)t.weekday()===a().startOf("week").weekday()&&(n=e("<tr>"),w.push(n)),o="",t.year()<l||t.year()==l&&t.month()<m?o+=" old":(t.year()>l||t.year()==l&&t.month()>m)&&(o+=" new"),t.isSame(a({y:d.date.year(),M:d.date.month(),d:d.date.date()}))&&(o+=" active"),(j(t)||!N(t))&&(o+=" disabled"),n.append('<td class="day'+o+'">'+t.date()+"</td>"),t.add(1,"d");for(d.widget.find(".datepicker-days tbody").empty().append(w),p=a().year(),v=d.widget.find(".datepicker-months").find("th:eq(1)").text(l).end().find("span").removeClass("active"),p===l&&v.eq(a().month()).addClass("active"),u>p-1&&d.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),p+1>h&&d.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),s=0;12>s;s++)l==u&&f>s||u>l?e(v[s]).addClass("disabled"):(l==h&&s>g||l>h)&&e(v[s]).addClass("disabled");for(w="",l=10*parseInt(l/10,10),c=d.widget.find(".datepicker-years").find("th:eq(1)").text(l+"-"+(l+9)).end().find("td"),d.widget.find(".datepicker-years").find("th").removeClass("disabled"),u>l&&d.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),l+9>h&&d.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),l-=1,s=-1;11>s;s++)w+='<span class="year'+(-1===s||10===s?" old":"")+(p===l?" active":"")+(u>l||l>h?" disabled":"")+'">'+l+"</span>",l+=1;c.html(w)},w=function(){a.lang(d.options.language);var e,t,i,n=d.widget.find(".timepicker .timepicker-hours table"),o="";if(n.parent().hide(),d.options.use24hours)for(e=0,t=0;6>t;t+=1){for(o+="<tr>",i=0;4>i;i+=1)o+='<td class="hour">'+E(e.toString())+"</td>",e++;o+="</tr>"}else for(e=1,t=0;3>t;t+=1){for(o+="<tr>",i=0;4>i;i+=1)o+='<td class="hour">'+E(e.toString())+"</td>",e++;o+="</tr>"}n.html(o)},v=function(){var e,t,i=d.widget.find(".timepicker .timepicker-minutes table"),a="",n=0;for(i.parent().hide(),e=0;5>e;e++){for(a+="<tr>",t=0;4>t;t+=1)a+='<td class="minute">'+E(n.toString())+"</td>",n+=3;a+="</tr>"}i.html(a)},k=function(){var e,t,i=d.widget.find(".timepicker .timepicker-seconds table"),a="",n=0;for(i.parent().hide(),e=0;5>e;e++){for(a+="<tr>",t=0;4>t;t+=1)a+='<td class="second">'+E(n.toString())+"</td>",n+=3;a+="</tr>"}i.html(a)},b=function(){if(d.date){var e=d.widget.find(".timepicker span[data-time-component]"),t=d.date.hours(),i="AM";d.options.use24hours||(t>=12&&(i="PM"),0===t?t=12:12!=t&&(t%=12),d.widget.find(".timepicker [data-action=togglePeriod]").text(i)),e.filter("[data-time-component=hours]").text(E(t)),e.filter("[data-time-component=minutes]").text(E(d.date.minutes())),e.filter("[data-time-component=seconds]").text(E(d.date.second()))}},y=function(t){t.stopPropagation(),t.preventDefault(),d.unset=!1;var i,n,o,s,r=e(t.target).closest("span, td, th"),c=a(d.date);if(1===r.length&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":x(1);break;case"prev":case"next":o=F.modes[d.viewMode].navStep,"prev"===r[0].className&&(o=-1*o),d.viewDate.add(o,F.modes[d.viewMode].navFnc),g()}break;case"span":r.is(".month")?(i=r.parent().find("span").index(r),d.viewDate.month(i)):(n=parseInt(r.text(),10)||0,d.viewDate.year(n)),0!==d.viewMode&&(d.date=a({y:d.viewDate.year(),M:d.viewDate.month(),d:d.viewDate.date(),h:d.date.hours(),m:d.date.minutes()}),l(c,t.type)),x(-1),g();break;case"td":r.is(".day")&&(s=parseInt(r.text(),10)||1,i=d.viewDate.month(),n=d.viewDate.year(),r.is(".old")?0===i?(i=11,n-=1):i-=1:r.is(".new")&&(11==i?(i=0,n+=1):i+=1),d.date=a({y:n,M:i,d:s,h:d.date.hours(),m:d.date.minutes()}),d.viewDate=a({y:n,M:i,d:Math.min(28,s)}),g(),H(),l(c,t.type))}},D={incrementHours:function(){L("add","hours",1)},incrementMinutes:function(){L("add","minutes",d.options.minuteStepping)},incrementSeconds:function(){L("add","seconds",1)},decrementHours:function(){L("subtract","hours",1)},decrementMinutes:function(){L("subtract","minutes",d.options.minuteStepping)},decrementSeconds:function(){L("subtract","seconds",1)},togglePeriod:function(){var e=d.date.hours();e>=12?e-=12:e+=12,d.date.hours(e)},showPicker:function(){d.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),d.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){d.date.hours(parseInt(e(t.target).text(),10)),D.showPicker.call(d)},selectMinute:function(t){d.date.minutes(parseInt(e(t.target).text(),10)),D.showPicker.call(d)},selectSecond:function(t){d.date.seconds(parseInt(e(t.target).text(),10)),D.showPicker.call(d)}},M=function(t){var i=a(d.date),n=e(t.currentTarget).data("action"),o=D[n].apply(d,arguments);return S(t),d.date||(d.date=a({y:1970})),H(),b(),l(i,t.type),o},S=function(e){e.stopPropagation(),e.preventDefault()},T=function(t){a.lang(d.options.language);var i=e(t.target),n=a(d.date),o=a(i.val(),d.format,d.options.useStrict);o.isValid()&&!j(o)&&N(o)?(u(),d.setValue(o),l(n,t.type),H()):(d.viewDate=n,i.val(a(n).format(d.format)),l(n,t.type),m(o),d.unset=!0)},x=function(e){e&&(d.viewMode=Math.max(d.minViewMode,Math.min(2,d.viewMode+e))),d.widget.find(".datepicker > div").hide().filter(".datepicker-"+F.modes[d.viewMode].clsName).show()},C=function(){var t,i,a,n,o;d.widget.on("click",".datepicker *",e.proxy(y,this)),d.widget.on("click","[data-action]",e.proxy(M,this)),d.widget.on("mousedown",e.proxy(S,this)),d.options.pickDate&&d.options.pickTime&&d.widget.on("click.togglePicker",".accordion-toggle",function(s){if(s.stopPropagation(),t=e(this),i=t.closest("ul"),a=i.find(".in"),n=i.find(".collapse:not(.in)"),a&&a.length){if(o=a.data("collapse"),o&&o.transitioning)return;a.collapse("hide"),n.collapse("show"),t.find("span").toggleClass(d.options.icons.time+" "+d.options.icons.date),d.element.find(".input-group-addon span").toggleClass(d.options.icons.time+" "+d.options.icons.date)}}),d.isInput?d.element.on({focus:e.proxy(d.show,this),change:e.proxy(T,this),blur:e.proxy(d.hide,this)}):(d.element.on({change:e.proxy(T,this)},"input"),d.component?d.component.on("click",e.proxy(d.show,this)):d.element.on("click",e.proxy(d.show,this)))},q=function(){e(window).on("resize.datetimepicker"+d.id,e.proxy(p,this)),d.isInput||e(document).on("mousedown.datetimepicker"+d.id,e.proxy(d.hide,this))},V=function(){d.widget.off("click",".datepicker *",d.click),d.widget.off("click","[data-action]"),d.widget.off("mousedown",d.stopEvent),d.options.pickDate&&d.options.pickTime&&d.widget.off("click.togglePicker"),d.isInput?d.element.off({focus:d.show,change:d.change}):(d.element.off({change:d.change},"input"),d.component?d.component.off("click",d.show):d.element.off("click",d.show))},P=function(){e(window).off("resize.datetimepicker"+d.id),d.isInput||e(document).off("mousedown.datetimepicker"+d.id)},I=function(){if(d.element){var t,i=d.element.parents(),a=!1;for(t=0;t<i.length;t++)if("fixed"==e(i[t]).css("position")){a=!0;break}return a}return!1},H=function(){a.lang(d.options.language);var e,t="";d.unset||(t=a(d.date).format(d.format)),d.isInput?d.element.val(t):(d.component&&(e=d.element.find("input"),e.val(t)),d.element.data("date",t)),d.options.pickTime||d.hide()},L=function(e,t,i){a.lang(d.options.language);var n;return"add"==e?(n=a(d.date),23==n.hours()&&n.add(i,t),n.add(i,t)):n=a(d.date).subtract(i,t),j(a(n.subtract(i,t)))||j(n)?void m(n.format(d.format)):("add"==e?d.date.add(i,t):d.date.subtract(i,t),void(d.unset=!1))},j=function(e){if(a.lang(d.options.language),e.isAfter(d.options.endDate)||e.isBefore(d.options.startDate))return!0;var t,i=d.options.disabledDates;for(t in i)if(i[t]==a(e).format("L"))return!0;return!1},N=function(e){a.lang(d.options.language);var t,i=d.options.enabledDates;if(i.length){for(t in i)if(i[t]==a(e).format("L"))return!0;return!1}return i===!1?!0:!1},E=function(e){return e=e.toString(),e.length>=2?e:"0"+e},A=function(e,t,i){return e&&t?'<div class="bootstrap-datetimepicker-widget dropdown-menu" style="z-index:9999 !important;"><ul class="list-unstyled"><li'+(i?' class="collapse in"':"")+'><div class="datepicker">'+F.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+d.options.icons.time+'"></span></a></li><li'+(i?' class="collapse"':"")+'><div class="timepicker">'+O.getTemplate()+"</div></li></ul></div>":t?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+O.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+F.template+"</div></div>"},F={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},O={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};F.template='<div class="datepicker-days"><table class="table-condensed">'+F.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+F.headTemplate+F.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+F.headTemplate+F.contTemplate+"</table></div>",O.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+d.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+d.options.icons.up+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+d.options.icons.up+'"></span></a></td>':"")+(d.options.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+O.hourTemplate+'</td> <td class="separator">:</td><td>'+(d.options.useMinutes?O.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(d.options.useSeconds?'<td class="separator">:</td><td>'+O.secondTemplate+"</td>":"")+(d.options.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+d.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+d.options.icons.down+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+d.options.icons.down+'"></span></a></td>':"")+(d.options.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(d.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},d.destroy=function(){V(),P(),d.widget.remove(),d.element.removeData("DateTimePicker"),d.component&&d.component.removeData("DateTimePicker")},d.show=function(e){d.widget.show(),d.height=d.component?d.component.outerHeight():d.element.outerHeight(),p(),d.element.trigger({type:"show.dp",date:a(d.date)}),q(),e&&S(e)},d.disable=function(){var e=d.element.find("input");e.prop("disabled")||(e.prop("disabled",!0),V())},d.enable=function(){var e=d.element.find("input");e.prop("disabled")&&(e.prop("disabled",!1),C())},d.hide=function(t){if(!t||!e(t.target).is(d.element.attr("id"))){var i,n,o=d.widget.find(".collapse");for(i=0;i<o.length;i++)if(n=o.eq(i).data("collapse"),n&&n.transitioning)return;d.widget.hide(),d.viewMode=d.startViewMode,x(),d.element.trigger({type:"hide.dp",date:a(d.date)}),P()}},d.setValue=function(e){a.lang(d.options.language),d.unset=e?!1:!0,a.isMoment(e)||(e=a(e)),e.isValid()?(d.date=e,H(),d.viewDate=a({y:d.date.year(),M:d.date.month()}),g(),b()):m(e)},d.getDate=function(){return d.unset?null:d.date},d.setDate=function(e){e=a(e),d.setValue(e?e:null)},d.setEnabledDates=function(e){d.options.enabledDates=e?e:!1,d.viewDate&&u()},d.setEndDate=function(e){void 0!=e&&(d.options.endDate=a(e),d.viewDate&&u())},d.setStartDate=function(e){void 0!=e&&(d.options.startDate=a(e),d.viewDate&&u())},r()};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this),a=i.data("DateTimePicker");a||i.data("DateTimePicker",new n(this,t))})}});


},{}],138:[function(require,module,exports){
require("../../js/transition.js"),require("../../js/alert.js"),require("../../js/button.js"),require("../../js/carousel.js"),require("../../js/collapse.js"),require("../../js/dropdown.js"),require("../../js/modal.js"),require("../../js/tooltip.js"),require("../../js/popover.js"),require("../../js/scrollspy.js"),require("../../js/tab.js"),require("../../js/affix.js");


},{"../../js/affix.js":139,"../../js/alert.js":140,"../../js/button.js":141,"../../js/carousel.js":142,"../../js/collapse.js":143,"../../js/dropdown.js":144,"../../js/modal.js":145,"../../js/popover.js":146,"../../js/scrollspy.js":147,"../../js/tab.js":148,"../../js/tooltip.js":149,"../../js/transition.js":150}],139:[function(require,module,exports){
+function(t){"use strict";function i(i){return this.each(function(){var o=t(this),f=o.data("bs.affix"),n="object"==typeof i&&i;f||o.data("bs.affix",f=new e(this,n)),"string"==typeof i&&f[i]()})}var e=function(i,o){this.options=t.extend({},e.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(i),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};e.VERSION="3.3.4",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,i,e,o){var f=this.$target.scrollTop(),n=this.$element.offset(),s=this.$target.height();if(null!=e&&"top"==this.affixed)return e>f?"top":!1;if("bottom"==this.affixed)return null!=e?f+this.unpin<=n.top?!1:"bottom":t-o>=f+s?!1:"bottom";var a=null==this.affixed,h=a?f:n.top,r=a?s:i;return null!=e&&e>=f?"top":null!=o&&h+r>=t-o?"bottom":!1},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=this.$element.height(),o=this.options.offset,f=o.top,n=o.bottom,s=t(document.body).height();"object"!=typeof o&&(n=f=o),"function"==typeof f&&(f=o.top(this.$element)),"function"==typeof n&&(n=o.bottom(this.$element));var a=this.getState(s,i,f,n);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var h="affix"+(a?"-"+a:""),r=t.Event(h+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(h).trigger(h.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-i-n})}};var o=t.fn.affix;t.fn.affix=i,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),o=e.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),i.call(e,o)})})}(jQuery);


},{}],140:[function(require,module,exports){
+function(t){"use strict";function e(e){return this.each(function(){var a=t(this),n=a.data("bs.alert");n||a.data("bs.alert",n=new r(this)),"string"==typeof e&&n[e].call(a)})}var a='[data-dismiss="alert"]',r=function(e){t(e).on("click",a,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(e){function a(){o.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=t(s);e&&e.preventDefault(),o.length||(o=n.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(r.TRANSITION_DURATION):a())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",a,r.prototype.close)}(jQuery);


},{}],141:[function(require,module,exports){
+function(t){"use strict";function e(e){return this.each(function(){var s=t(this),a=s.data("bs.button"),o="object"==typeof e&&e;a||s.data("bs.button",a=new n(this,o)),"toggle"==e?a.toggle():e&&a.setState(e)})}var n=function(e,s){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,s),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",s=this.$element,a=s.is("input")?"val":"html",o=s.data();e+="Text",null==o.resetText&&s.data("resetText",s[a]()),setTimeout(t.proxy(function(){s[a](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,s.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,s.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var s=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=s,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var s=t(n.target);s.hasClass("btn")||(s=s.closest(".btn")),e.call(s,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);


},{}],142:[function(require,module,exports){
+function(t){"use strict";function e(e){return this.each(function(){var s=t(this),n=s.data("bs.carousel"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e),r="string"==typeof e?e:a.slide;n||s.data("bs.carousel",n=new i(this,a)),"number"==typeof e?n.to(e):r?n[r]():a.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),s="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(s&&!this.options.wrap)return e;var n="prev"==t?-1:1,a=(i+n)%this.$items.length;return this.$items.eq(a)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,s){var n=this.$element.find(".item.active"),a=s||this.getItemForDirection(e,n),r=this.interval,o="next"==e?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var h=a[0],c=t.Event("slide.bs.carousel",{relatedTarget:h,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(a)]);d&&d.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:h,direction:o});return t.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),a[0].offsetWidth,n.addClass(o),a.addClass(o),n.one("bsTransitionEnd",function(){a.removeClass([e,o].join(" ")).addClass("active"),n.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(u)),r&&this.cycle(),this}};var s=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=s,this};var n=function(i){var s,n=t(this),a=t(n.attr("data-target")||(s=n.attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var r=t.extend({},a.data(),n.data()),o=n.attr("data-slide-to");o&&(r.interval=!1),e.call(a,r),o&&a.data("bs.carousel").to(o),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery);


},{}],143:[function(require,module,exports){
+function(t){"use strict";function e(e){var a,s=e.attr("data-target")||(a=e.attr("href"))&&a.replace(/.*(?=#[^\s]+$)/,"");return t(s)}function a(e){return this.each(function(){var a=t(this),i=a.data("bs.collapse"),n=t.extend({},s.DEFAULTS,a.data(),"object"==typeof e&&e);!i&&n.toggle&&/show|hide/.test(e)&&(n.toggle=!1),i||a.data("bs.collapse",i=new s(this,n)),"string"==typeof e&&i[e]()})}var s=function(e,a){this.$element=t(e),this.options=t.extend({},s.DEFAULTS,a),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};s.VERSION="3.3.4",s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0},s.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},s.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){i&&i.length&&(a.call(i,"hide"),e||i.data("bs.collapse",null));var l=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[l](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[l](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return o.call(this);var r=t.camelCase(["scroll",l].join("-"));this.$element.one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(s.TRANSITION_DURATION)[l](this.$element[0][r])}}}},s.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[a](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(s.TRANSITION_DURATION):i.call(this)}}},s.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},s.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(a,s){var i=t(s);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},s.prototype.addAriaAndCollapsedClass=function(t,e){var a=t.hasClass("in");t.attr("aria-expanded",a),e.toggleClass("collapsed",!a).attr("aria-expanded",a)};var i=t.fn.collapse;t.fn.collapse=a,t.fn.collapse.Constructor=s,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(s){var i=t(this);i.attr("data-target")||s.preventDefault();var n=e(i),l=n.data("bs.collapse"),o=l?"toggle":i.data();a.call(n,o)})}(jQuery);


},{}],144:[function(require,module,exports){
+function(t){"use strict";function o(o){o&&3===o.which||(t(r).remove(),t(a).each(function(){var n=t(this),r=e(n),a={relatedTarget:this};r.hasClass("open")&&(r.trigger(o=t.Event("hide.bs.dropdown",a)),o.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",a)))}))}function e(o){var e=o.attr("data-target");e||(e=o.attr("href"),e=e&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&t(e);return n&&n.length?n:o.parent()}function n(o){return this.each(function(){var e=t(this),n=e.data("bs.dropdown");n||e.data("bs.dropdown",n=new d(this)),"string"==typeof o&&n[o].call(e)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',d=function(o){t(o).on("click.bs.dropdown",this.toggle)};d.VERSION="3.3.4",d.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var a=e(r),d=a.hasClass("open");if(o(),!d){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",o);var i={relatedTarget:this};if(a.trigger(n=t.Event("show.bs.dropdown",i)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger("shown.bs.dropdown",i)}return!1}},d.prototype.keydown=function(o){if(/(38|40|27|32)/.test(o.which)&&!/input|textarea/i.test(o.target.tagName)){var n=t(this);if(o.preventDefault(),o.stopPropagation(),!n.is(".disabled, :disabled")){var r=e(n),d=r.hasClass("open");if(!d&&27!=o.which||d&&27==o.which)return 27==o.which&&r.find(a).trigger("focus"),n.trigger("click");var i=" li:not(.disabled):visible a",s=r.find('[role="menu"]'+i+', [role="listbox"]'+i);if(s.length){var p=s.index(o.target);38==o.which&&p>0&&p--,40==o.which&&p<s.length-1&&p++,~p||(p=0),s.eq(p).trigger("focus")}}}};var i=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=d,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=i,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,d.prototype.toggle).on("keydown.bs.dropdown.data-api",a,d.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',d.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',d.prototype.keydown)}(jQuery);


},{}],145:[function(require,module,exports){
+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,a)),"string"==typeof e?n[e](o):a.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),s&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});s?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(n)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,a,this)})}(jQuery);


},{}],146:[function(require,module,exports){
+function(t){"use strict";function o(o){return this.each(function(){var n=t(this),r=n.data("bs.popover"),i="object"==typeof o&&o;(r||!/destroy|hide/.test(o))&&(r||n.data("bs.popover",r=new e(this,i)),"string"==typeof o&&r[o]())})}var e=function(t,o){this.init("popover",t,o)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.4",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),o=this.getTitle(),e=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](o),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof e?"html":"append":"text"](e),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,o=this.options;return t.attr("data-content")||("function"==typeof o.content?o.content.call(t[0]):o.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=o,t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery);


},{}],147:[function(require,module,exports){
+function(t){"use strict";function s(e,i){this.$body=t(document.body),this.$scrollElement=t(t(e).is(document.body)?window:e),this.options=t.extend({},s.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function e(e){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),r="object"==typeof e&&e;o||i.data("bs.scrollspy",o=new s(this,r)),"string"==typeof e&&o[e]()})}s.VERSION="3.3.4",s.DEFAULTS={offset:10},s.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},s.prototype.refresh=function(){var s=this,e="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var s=t(this),o=s.data("target")||s.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[e]().top+i,o]]||null}).sort(function(t,s){return t[0]-s[0]}).each(function(){s.offsets.push(this[0]),s.targets.push(this[1])})},s.prototype.process=function(){var t,s=this.$scrollElement.scrollTop()+this.options.offset,e=this.getScrollHeight(),i=this.options.offset+e-this.$scrollElement.height(),o=this.offsets,r=this.targets,l=this.activeTarget;if(this.scrollHeight!=e&&this.refresh(),s>=i)return l!=(t=r[r.length-1])&&this.activate(t);if(l&&s<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)l!=r[t]&&s>=o[t]&&(void 0===o[t+1]||s<o[t+1])&&this.activate(r[t])},s.prototype.activate=function(s){this.activeTarget=s,this.clear();var e=this.selector+'[data-target="'+s+'"],'+this.selector+'[href="'+s+'"]',i=t(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},s.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=e,t.fn.scrollspy.Constructor=s,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var s=t(this);e.call(s,s.data())})})}(jQuery);


},{}],148:[function(require,module,exports){
+function(t){"use strict";function a(a){return this.each(function(){var n=t(this),i=n.data("bs.tab");i||n.data("bs.tab",i=new e(this)),"string"==typeof a&&i[a]()})}var e=function(a){this.element=t(a)};e.VERSION="3.3.4",e.TRANSITION_DURATION=150,e.prototype.show=function(){var a=this.element,e=a.closest("ul:not(.dropdown-menu)"),n=a.data("target");if(n||(n=a.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var i=e.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:a[0]}),s=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(r),a.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var d=t(n);this.activate(a.closest("li"),e),this.activate(d,d.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:a[0]}),a.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},e.prototype.activate=function(a,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),a.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),d?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu").length&&a.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=n.find("> .active"),d=i&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&d?s.one("bsTransitionEnd",r).emulateTransitionEnd(e.TRANSITION_DURATION):r(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=a,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var i=function(e){e.preventDefault(),a.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);


},{}],149:[function(require,module,exports){
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.tooltip"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||i.data("bs.tooltip",n=new o(this,s)),"string"==typeof e&&n[e]())})}var o=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};o.VERSION="3.3.4",o.TRANSITION_DURATION=150,o.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},o.prototype.init=function(e,o,i){if(this.enabled=!0,this.type=e,this.$element=t(o),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var r=n[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},o.prototype.getDelegateOptions=function(){var e={},o=this.getDefaults();return this._options&&t.each(this._options,function(t,i){o[t]!=i&&(e[t]=i)}),e},o.prototype.enter=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o&&o.$tip&&o.$tip.is(":visible")?void(o.hoverState="in"):(o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="in",o.options.delay&&o.options.delay.show?void(o.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show)):o.show())},o.prototype.leave=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),clearTimeout(o.timeout),o.hoverState="out",o.options.delay&&o.options.delay.hide?void(o.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide)):o.hide()},o.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,p=l.test(a);p&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),f=s[0].offsetWidth,c=s[0].offsetHeight;if(p){var u=a,d=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(d);a="bottom"==a&&h.bottom+c>g.bottom?"top":"top"==a&&h.top-c<g.top?"bottom":"right"==a&&h.right+f>g.width?"left":"left"==a&&h.left-f<g.left?"right":a,s.removeClass(u).addClass(a)}var m=this.getCalculatedOffset(a,h,f,c);this.applyPlacement(m,a);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(o.TRANSITION_DURATION):v()}},o.prototype.applyPlacement=function(e,o){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,p=i[0].offsetHeight;"top"==o&&p!=s&&(e.top=e.top+s-p);var h=this.getViewportAdjustedDelta(o,e,l,p);h.left?e.left+=h.left:e.top+=h.top;var f=/top|bottom/.test(o),c=f?2*h.left-n+l:2*h.top-s+p,u=f?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(c,i[0][u],f)},o.prototype.replaceArrow=function(t,e,o){this.arrow().css(o?"left":"top",50*(1-t/e)+"%").css(o?"top":"left","")},o.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},o.prototype.hide=function(e){function i(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i(),this.hoverState=null,this)},o.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},o.prototype.hasContent=function(){return this.getTitle()},o.prototype.getPosition=function(e){e=e||this.$element;var o=e[0],i="BODY"==o.tagName,n=o.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=i?{top:0,left:0}:e.offset(),r={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,r,a,s)},o.prototype.getCalculatedOffset=function(t,e,o,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-o/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-o/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-o}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},o.prototype.getViewportAdjustedDelta=function(t,e,o,i){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+i;a<r.top?n.top=r.top-a:l>r.top+r.height&&(n.top=r.top+r.height-l)}else{var p=e.left-s,h=e.left+s+o;p<r.left?n.left=r.left-p:h>r.width&&(n.left=r.left+r.width-h)}return n},o.prototype.getTitle=function(){var t,e=this.$element,o=this.options;return t=e.attr("data-original-title")||("function"==typeof o.title?o.title.call(e[0]):o.title)},o.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},o.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.toggleEnabled=function(){this.enabled=!this.enabled},o.prototype.toggle=function(e){var o=this;e&&(o=t(e.currentTarget).data("bs."+this.type),o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o))),o.tip().hasClass("in")?o.leave(o):o.enter(o)},o.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=o,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery);


},{}],150:[function(require,module,exports){
+function(n){"use strict";function t(){var n=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==n.style[i])return{end:t[i]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,r=this;n(this).one("bsTransitionEnd",function(){i=!0});var e=function(){i||n(r).trigger(n.support.transition.end)};return setTimeout(e,t),this},n(function(){n.support.transition=t(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){return n(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);


},{}],151:[function(require,module,exports){
function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r<o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};


},{}],152:[function(require,module,exports){
!function(e){function n(e,n){if(!n||"function"==typeof n)return e;for(var t in n)e[t]=n[t];return e}function t(e,n){for(var r in n)r in e?t(e[r],n[r]):e[r]=n[r];return e}function r(e,n,t){var r,a=0,o=e.length,i=void 0===o||"[object Array]"!==Object.prototype.toString.apply(e)||"function"==typeof e;if(t)if(i){for(r in e)if(n.apply(e[r],t)===!1)break}else for(;o>a&&n.apply(e[a++],t)!==!1;);else if(i){for(r in e)if(n.call(e[r],r,e[r])===!1)break}else for(;o>a&&n.call(e[a],a,e[a++])!==!1;);return e}function a(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return B[e]}):e}function o(e){var n=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(n){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(new Error)},t=function(e){if("string"==typeof e)return e;var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},r=function(e){e=e.replace(/\r\n/g,"\n");for(var n="",t=0;t<e.length;t++){var r=e.charCodeAt(t);128>r?n+=String.fromCharCode(r):r>127&&2048>r?(n+=String.fromCharCode(r>>6|192),n+=String.fromCharCode(63&r|128)):(n+=String.fromCharCode(r>>12|224),n+=String.fromCharCode(r>>6&63|128),n+=String.fromCharCode(63&r|128))}return n},a=function(e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=r(e);var t,a,o,i,s,u,l,f="",c=0;do t=e.charCodeAt(c++),a=e.charCodeAt(c++),o=e.charCodeAt(c++),i=t>>2,s=(3&t)<<4|a>>4,u=(15&a)<<2|o>>6,l=63&o,isNaN(a)?u=l=64:isNaN(o)&&(l=64),f+=n.charAt(i)+n.charAt(s)+n.charAt(u)+n.charAt(l),t=a=o="",i=s=u=l="";while(c<e.length);return f},o=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e},i=function(e,r,a,s){"function"==typeof a&&(s=a,a={}),a.cache=a.cache||!1,a.data=a.data||{},a.headers=a.headers||{},a.jsonp=a.jsonp||!1,a.async=void 0===a.async?!0:a.async;var u,l=o({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},i.headers,a.headers);if(u="application/json"===l["content-type"]?JSON.stringify(a.data):t(a.data),"GET"===e){var f=[];if(u&&(f.push(u),u=null),a.cache||f.push("_="+(new Date).getTime()),a.jsonp&&(f.push("callback="+a.jsonp),f.push("jsonp="+a.jsonp)),f=f.join("&"),f.length>1&&(r+=r.indexOf("?")>-1?"&"+f:"?"+f),a.jsonp){var c=document.getElementsByTagName("head")[0],p=document.createElement("script");return p.type="text/javascript",p.src=r,void c.appendChild(p)}}n(function(n,t){if(n)return s(n);t.open(e,r,a.async);for(var o in l)l.hasOwnProperty(o)&&t.setRequestHeader(o,l[o]);t.onreadystatechange=function(){if(4===t.readyState){var e=t.responseText||"";if(!s)return;s(t.status,{text:function(){return e},json:function(){try{return JSON.parse(e)}catch(n){return q.error("Can not parse JSON. URL: "+r),{}}}})}},t.send(u)})},s={authBasic:function(e,n){i.headers.Authorization="Basic "+a(e+":"+n)},connect:function(e,n,t){return i("CONNECT",e,n,t)},del:function(e,n,t){return i("DELETE",e,n,t)},get:function(e,n,t){return i("GET",e,n,t)},head:function(e,n,t){return i("HEAD",e,n,t)},headers:function(e){i.headers=e||{}},isAllowed:function(e,n,t){this.options(e,function(e,r){t(-1!==r.text().indexOf(n))})},options:function(e,n,t){return i("OPTIONS",e,n,t)},patch:function(e,n,t){return i("PATCH",e,n,t)},post:function(e,n,t){return i("POST",e,n,t)},put:function(e,n,t){return i("PUT",e,n,t)},trace:function(e,n,t){return i("TRACE",e,n,t)}},u=e.type?e.type.toLowerCase():"get";s[u](e.url,e,function(n,t){200===n||0===n&&t.text()?e.success(t.json(),n,null):e.error(t.text(),n,null)})}function i(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},q.extend(K,e),delete K.fixLng,K.functions&&(delete K.functions,q.extend(q,e.functions)),"string"==typeof K.ns&&(K.ns={namespaces:[K.ns],defaultNs:K.ns}),"string"==typeof K.fallbackNS&&(K.fallbackNS=[K.fallbackNS]),("string"==typeof K.fallbackLng||"boolean"==typeof K.fallbackLng)&&(K.fallbackLng=[K.fallbackLng]),K.interpolationPrefixEscaped=q.regexEscape(K.interpolationPrefix),K.interpolationSuffixEscaped=q.regexEscape(K.interpolationSuffix),K.lng||(K.lng=q.detectLanguage()),V=q.toLanguages(K.lng),E=V[0],q.log("currentLng set to: "+E),K.useCookie&&q.cookie.read(K.cookieName)!==E&&q.cookie.create(K.cookieName,E,K.cookieExpirationTime,K.cookieDomain),K.detectLngFromLocalStorage&&"undefined"!=typeof document&&window.localStorage&&q.localStorage.setItem("i18next_lng",E);var t=j;e.fixLng&&(t=function(e,n){return n=n||{},n.lng=n.lng||t.lng,j(e,n)},t.lng=E),X.setCurrentLng(E),M&&K.setJqueryExt&&b();var r;if(M&&M.Deferred&&(r=M.Deferred()),!K.resStore){var a=q.toLanguages(K.lng);"string"==typeof K.preload&&(K.preload=[K.preload]);for(var o=0,i=K.preload.length;i>o;o++)for(var s=q.toLanguages(K.preload[o]),u=0,l=s.length;l>u;u++)a.indexOf(s[u])<0&&a.push(s[u]);return F.sync.load(a,K,function(e,a){R=a,D=!0,n&&n(t),r&&r.resolve(t)}),r?r.promise():void 0}return R=K.resStore,D=!0,n&&n(t),r&&r.resolve(t),r?r.promise():void 0}function s(e,n){"string"==typeof e&&(e=[e]);for(var t=0,r=e.length;r>t;t++)K.preload.indexOf(e[t])<0&&K.preload.push(e[t]);return i(n)}function u(e,n,t,r){"string"!=typeof n?(t=n,n=K.ns.defaultNs):K.ns.namespaces.indexOf(n)<0&&K.ns.namespaces.push(n),R[e]=R[e]||{},R[e][n]=R[e][n]||{},r?q.deepExtend(R[e][n],t):q.extend(R[e][n],t),K.useLocalStorage&&H._storeLocal(R)}function l(e,n){"string"!=typeof n&&(n=K.ns.defaultNs),R[e]=R[e]||{};var t=R[e][n]||{},r=!1;for(var a in t)t.hasOwnProperty(a)&&(r=!0);return r}function f(e,n){return"string"!=typeof n&&(n=K.ns.defaultNs),R[e]=R[e]||{},q.extend({},R[e][n])}function c(e,n){"string"!=typeof n&&(n=K.ns.defaultNs),R[e]=R[e]||{},R[e][n]={},K.useLocalStorage&&H._storeLocal(R)}function p(e,n,t,r){"string"!=typeof n?(resource=n,n=K.ns.defaultNs):K.ns.namespaces.indexOf(n)<0&&K.ns.namespaces.push(n),R[e]=R[e]||{},R[e][n]=R[e][n]||{};for(var a=t.split(K.keyseparator),o=0,i=R[e][n];a[o];)o==a.length-1?i[a[o]]=r:(null==i[a[o]]&&(i[a[o]]={}),i=i[a[o]]),o++;K.useLocalStorage&&H._storeLocal(R)}function g(e,n,t){"string"!=typeof n?(resource=n,n=K.ns.defaultNs):K.ns.namespaces.indexOf(n)<0&&K.ns.namespaces.push(n);for(var r in t)"string"==typeof t[r]&&p(e,n,r,t[r])}function d(e){K.ns.defaultNs=e}function h(e,n){m([e],n)}function m(e,n){var t={dynamicLoad:K.dynamicLoad,resGetPath:K.resGetPath,getAsync:K.getAsync,customLoad:K.customLoad,ns:{namespaces:e,defaultNs:""}},r=q.toLanguages(K.lng);"string"==typeof K.preload&&(K.preload=[K.preload]);for(var a=0,o=K.preload.length;o>a;a++)for(var i=q.toLanguages(K.preload[a]),s=0,u=i.length;u>s;s++)r.indexOf(i[s])<0&&r.push(i[s]);for(var l=[],f=0,c=r.length;c>f;f++){var p=!1,g=R[r[f]];if(g)for(var d=0,h=e.length;h>d;d++)g[e[d]]||(p=!0);else p=!0;p&&l.push(r[f])}l.length?F.sync._fetch(l,t,function(t,r){var a=e.length*l.length;q.each(e,function(e,t){K.ns.namespaces.indexOf(t)<0&&K.ns.namespaces.push(t),q.each(l,function(e,o){R[o]=R[o]||{},R[o][t]=r[o][t],a--,0===a&&n&&(K.useLocalStorage&&F.sync._storeLocal(R),n())})})}):n&&n()}function y(e,n,t){return"function"==typeof n?(t=n,n={}):n||(n={}),n.lng=e,i(n,t)}function v(){return E}function x(e){R={},y(E,e)}function b(){function e(e,n,t){if(0!==n.length){var r="text";if(0===n.indexOf("[")){var a=n.split("]");n=a[1],r=a[0].substr(1,a[0].length-1)}n.indexOf(";")===n.length-1&&(n=n.substr(0,n.length-2));var o;if("html"===r)o=K.defaultValueFromContent?M.extend({defaultValue:e.html()},t):t,e.html(M.t(n,o));else if("text"===r)o=K.defaultValueFromContent?M.extend({defaultValue:e.text()},t):t,e.text(M.t(n,o));else if("prepend"===r)o=K.defaultValueFromContent?M.extend({defaultValue:e.html()},t):t,e.prepend(M.t(n,o));else if("append"===r)o=K.defaultValueFromContent?M.extend({defaultValue:e.html()},t):t,e.append(M.t(n,o));else if(0===r.indexOf("data-")){var i=r.substr("data-".length);o=K.defaultValueFromContent?M.extend({defaultValue:e.data(i)},t):t;var s=M.t(n,o);e.data(i,s),e.attr(r,s)}else o=K.defaultValueFromContent?M.extend({defaultValue:e.attr(r)},t):t,e.attr(r,M.t(n,o))}}function n(n,t){var r=n.attr(K.selectorAttr);if(r||"undefined"==typeof r||r===!1||(r=n.text()||n.val()),r){var a=n,o=n.data("i18n-target");if(o&&(a=n.find(o)||n),t||K.useDataAttrOptions!==!0||(t=n.data("i18n-options")),t=t||{},r.indexOf(";")>=0){var i=r.split(";");M.each(i,function(n,r){""!==r&&e(a,r,t)})}else e(a,r,t);K.useDataAttrOptions===!0&&n.data("i18n-options",t)}}M.t=M.t||j,M.fn.i18n=function(e){return this.each(function(){n(M(this),e);var t=M(this).find("["+K.selectorAttr+"]");t.each(function(){n(M(this),e)})})}}function k(e,n,t,r){if(!e)return e;if(r=r||n,e.indexOf(r.interpolationPrefix||K.interpolationPrefix)<0)return e;var a=r.interpolationPrefix?q.regexEscape(r.interpolationPrefix):K.interpolationPrefixEscaped,o=r.interpolationSuffix?q.regexEscape(r.interpolationSuffix):K.interpolationSuffixEscaped,i="HTML"+o,s=n.replace&&"object"==typeof n.replace?n.replace:n;return q.each(s,function(n,s){var u=t?t+K.keyseparator+n:n;"object"==typeof s&&null!==s?e=k(e,s,u,r):r.escapeInterpolation||K.escapeInterpolation?(e=e.replace(new RegExp([a,u,i].join(""),"g"),q.regexReplacementEscape(s)),e=e.replace(new RegExp([a,u,o].join(""),"g"),q.regexReplacementEscape(q.escape(s)))):e=e.replace(new RegExp([a,u,o].join(""),"g"),q.regexReplacementEscape(s))}),e}function L(e,n){var t=",",r="{",a="}",o=q.extend({},n);for(delete o.postProcess;-1!=e.indexOf(K.reusePrefix)&&(I++,!(I>K.maxRecursion));){var i=e.lastIndexOf(K.reusePrefix),s=e.indexOf(K.reuseSuffix,i)+K.reuseSuffix.length,u=e.substring(i,s),l=u.replace(K.reusePrefix,"").replace(K.reuseSuffix,"");if(i>=s)return q.error("there is an missing closing in following translation value",e),"";if(-1!=l.indexOf(t)){var f=l.indexOf(t);if(-1!=l.indexOf(r,f)&&-1!=l.indexOf(a,f)){var c=l.indexOf(r,f),p=l.indexOf(a,c)+a.length;try{o=q.extend(o,JSON.parse(l.substring(c,p))),l=l.substring(0,f)}catch(g){}}}var d=_(l,o);e=e.replace(u,q.regexReplacementEscape(d))}return e}function S(e){return e.context&&("string"==typeof e.context||"number"==typeof e.context)}function N(e){return void 0!==e.count&&"string"!=typeof e.count}function O(e){return void 0!==e.indefinite_article&&"string"!=typeof e.indefinite_article&&e.indefinite_article}function w(e,n){n=n||{};var t=P(e,n),r=T(e,n);return void 0!==r||r===t}function j(e,n){return n=n||{},D?(I=0,_.apply(null,arguments)):(q.log("i18next not finished initialization. you might have called t function before loading resources finished."),n.defaultValue||"")}function P(e,n){return void 0!==n.defaultValue?n.defaultValue:e}function C(){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return{postProcess:"sprintf",sprintf:e}}function _(e,n){if(n&&"object"!=typeof n?"sprintf"===K.shortcutFunction?n=C.apply(null,arguments):"defaultValue"===K.shortcutFunction&&(n={defaultValue:n}):n=n||{},"object"==typeof K.defaultVariables&&(n=q.extend({},K.defaultVariables,n)),void 0===e||null===e||""===e)return"";"number"==typeof e&&(e=String(e)),"string"==typeof e&&(e=[e]);var t=e[0];if(e.length>1)for(var r=0;r<e.length&&(t=e[r],!w(t,n));r++);var a,o=P(t,n),i=T(t,n),s=n.lng?q.toLanguages(n.lng,n.fallbackLng):V,u=n.ns||K.ns.defaultNs;t.indexOf(K.nsseparator)>-1&&(a=t.split(K.nsseparator),u=a[0],t=a[1]),void 0===i&&K.sendMissing&&"function"==typeof K.missingKeyHandler&&(n.lng?K.missingKeyHandler(s[0],u,t,o,s):K.missingKeyHandler(K.lng,u,t,o,s));var l;l="string"==typeof K.postProcess&&""!==K.postProcess?[K.postProcess]:"array"==typeof K.postProcess||"object"==typeof K.postProcess?K.postProcess:[],"string"==typeof n.postProcess&&""!==n.postProcess?l=l.concat([n.postProcess]):("array"==typeof n.postProcess||"object"==typeof n.postProcess)&&(l=l.concat(n.postProcess)),void 0!==i&&l.length&&l.forEach(function(e){W[e]&&(i=W[e](i,t,n))});var f=o;if(o.indexOf(K.nsseparator)>-1&&(a=o.split(K.nsseparator),f=a[1]),f===t&&K.parseMissingKey&&(o=K.parseMissingKey(o)),void 0===i&&(o=k(o,n),o=L(o,n),l.length)){var c=P(t,n);l.forEach(function(e){W[e]&&(i=W[e](c,t,n))})}return void 0!==i?i:o}function T(e,n){n=n||{};var t,r,a=P(e,n),o=V;if(!R)return a;if("cimode"===o[0].toLowerCase())return a;if(n.lngs&&(o=n.lngs),n.lng&&(o=q.toLanguages(n.lng,n.fallbackLng),!R[o[0]])){var i=K.getAsync;K.getAsync=!1,F.sync.load(o,K,function(e,n){q.extend(R,n),K.getAsync=i})}var s=n.ns||K.ns.defaultNs;if(e.indexOf(K.nsseparator)>-1){var u=e.split(K.nsseparator);s=u[0],e=u[1]}if(S(n)){t=q.extend({},n),delete t.context,t.defaultValue=K.contextNotFound;var l=s+K.nsseparator+e+"_"+n.context;if(r=j(l,t),r!=K.contextNotFound)return k(r,{context:n.context})}if(N(n,o[0])){t=q.extend({lngs:[o[0]]},n),delete t.count,t._origLng=t._origLng||t.lng||o[0],delete t.lng,t.defaultValue=K.pluralNotFound;var f;if(X.needsPlural(o[0],n.count)){f=s+K.nsseparator+e+K.pluralSuffix;var c=X.get(o[0],n.count);c>=0?f=f+"_"+c:1===c&&(f=s+K.nsseparator+e)}else f=s+K.nsseparator+e;if(r=j(f,t),r!=K.pluralNotFound)return k(r,{count:n.count,interpolationPrefix:n.interpolationPrefix,interpolationSuffix:n.interpolationSuffix});if(!(o.length>1))return t.lng=t._origLng,delete t._origLng,r=j(s+K.nsseparator+e,t),k(r,{count:n.count,interpolationPrefix:n.interpolationPrefix,interpolationSuffix:n.interpolationSuffix});var p=o.slice();if(p.shift(),n=q.extend(n,{lngs:p}),n._origLng=t._origLng,delete n.lng,r=j(s+K.nsseparator+e,n),r!=K.pluralNotFound)return r}if(O(n)){var g=q.extend({},n);delete g.indefinite_article,g.defaultValue=K.indefiniteNotFound;var d=s+K.nsseparator+e+(n.count&&!N(n,o[0])||!n.count?K.indefiniteSuffix:"");if(r=j(d,g),r!=K.indefiniteNotFound)return r}for(var h,m=e.split(K.keyseparator),y=0,v=o.length;v>y&&void 0===h;y++){for(var x=o[y],b=0,w=R[x]&&R[x][s];m[b];)w=w&&w[m[b]],b++;if(void 0!==w){var C=Object.prototype.toString.apply(w);if("string"==typeof w)w=k(w,n),w=L(w,n);else if("[object Array]"!==C||K.returnObjectTrees||n.returnObjectTrees){if(null===w&&K.fallbackOnNull===!0)w=void 0;else if(null!==w)if(K.returnObjectTrees||n.returnObjectTrees){if("[object Number]"!==C&&"[object Function]"!==C&&"[object RegExp]"!==C){var A="[object Array]"===C?[]:{};q.each(w,function(t){A[t]=_(s+K.nsseparator+e+K.keyseparator+t,n)}),w=A}}else K.objectTreeKeyHandler&&"function"==typeof K.objectTreeKeyHandler?w=K.objectTreeKeyHandler(e,w,x,s,n):(w="key '"+s+":"+e+" ("+x+")' returned an object instead of string.",q.log(w))}else w=w.join("\n"),w=k(w,n),w=L(w,n);"string"==typeof w&&""===w.trim()&&K.fallbackOnEmpty===!0&&(w=void 0),h=w}}if(void 0===h&&!n.isFallbackLookup&&(K.fallbackToDefaultNS===!0||K.fallbackNS&&K.fallbackNS.length>0)){if(n.isFallbackLookup=!0,K.fallbackNS.length){for(var E=0,M=K.fallbackNS.length;M>E;E++)if(h=T(K.fallbackNS[E]+K.nsseparator+e,n),h||""===h&&K.fallbackOnEmpty===!1){var I=h.indexOf(K.nsseparator)>-1?h.split(K.nsseparator)[1]:h,D=a.indexOf(K.nsseparator)>-1?a.split(K.nsseparator)[1]:a;if(I!==D)break}}else h=T(e,n);n.isFallbackLookup=!1}return h}function A(){var e,n=K.lngWhitelist||[],t=[];if("undefined"!=typeof window&&!function(){for(var e=window.location.search.substring(1),n=e.split("&"),r=0;r<n.length;r++){var a=n[r].indexOf("=");if(a>0){var o=n[r].substring(0,a);o==K.detectLngQS&&t.push(n[r].substring(a+1))}}}(),K.useCookie&&"undefined"!=typeof document){var r=q.cookie.read(K.cookieName);r&&t.push(r)}if(K.detectLngFromLocalStorage&&"undefined"!=typeof window&&window.localStorage&&t.push(q.localStorage.getItem("i18next_lng")),"undefined"!=typeof navigator){if(navigator.languages)for(var a=0;a<navigator.languages.length;a++)t.push(navigator.languages[a]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return function(){for(var r=0;r<t.length;r++){var a=t[r];if(a.indexOf("-")>-1){var o=a.split("-");a=K.lowerCaseLng?o[0].toLowerCase()+"-"+o[1].toLowerCase():o[0].toLowerCase()+"-"+o[1].toUpperCase()}if(0===n.length||n.indexOf(a)>-1){e=a;break}}}(),e||(e=K.fallbackLng[0]),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=t)return-1;for(var a=r>=0?r:Math.max(t-Math.abs(r),0);t>a;a++)if(a in n&&n[a]===e)return a;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){"use strict";if(null==this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var r=t;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var a=r>=0?Math.min(r,t-1):t-Math.abs(r);a>=0;a--)if(a in n&&n[a]===e)return a;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var E,M=e.jQuery||e.Zepto,F={},R={},I=0,V=[],D=!1,H={};if("undefined"!=typeof module&&module.exports){if(module.exports=F,!M)try{M=require("jquery")}catch(z){}}else e.i18n=e.i18n||F;M&&(M.i18n=M.i18n||F),H={load:function(e,n,t){n.useLocalStorage?H._loadLocal(e,n,function(r,a){for(var o=[],i=0,s=e.length;s>i;i++)a[e[i]]||o.push(e[i]);o.length>0?H._fetch(o,n,function(e,n){q.extend(a,n),H._storeLocal(n),t(null,a)}):t(null,a)}):H._fetch(e,n,function(e,n){t(null,n)})},_loadLocal:function(e,n,t){var r={},a=(new Date).getTime();if(window.localStorage){var o=e.length;q.each(e,function(e,i){var s=q.localStorage.getItem("res_"+i);s&&(s=JSON.parse(s),s.i18nStamp&&s.i18nStamp+n.localStorageExpirationTime>a&&(r[i]=s)),o--,0===o&&t(null,r)})}},_storeLocal:function(e){if(window.localStorage)for(var n in e)e[n].i18nStamp=(new Date).getTime(),q.localStorage.setItem("res_"+n,JSON.stringify(e[n]))},_fetch:function(e,n,t){var r=n.ns,a={};if(n.dynamicLoad){var o=function(e,n){t(null,n)};if("function"==typeof n.customLoad)n.customLoad(e,r.namespaces,n,o);else{var i=k(n.resGetPath,{lng:e.join("+"),ns:r.namespaces.join("+")});q.ajax({url:i,success:function(e){q.log("loaded: "+i),o(null,e)},error:function(e,n,t){q.log("failed loading: "+i),o("failed loading resource.json error: "+t)},dataType:"json",async:n.getAsync})}}else{var s,u=r.namespaces.length*e.length;q.each(r.namespaces,function(r,o){q.each(e,function(e,r){var i=function(e,n){e&&(s=s||[],s.push(e)),a[r]=a[r]||{},a[r][o]=n,u--,0===u&&t(s,a)};"function"==typeof n.customLoad?n.customLoad(r,o,n,i):H._fetchOne(r,o,n,i)})})}},_fetchOne:function(e,n,t,r){var a=k(t.resGetPath,{lng:e,ns:n});q.ajax({url:a,success:function(e){q.log("loaded: "+a),r(null,e)},error:function(e,n,t){if(n&&200==n||e&&e.status&&200==e.status)q.error("There is a typo in: "+a);else if(n&&404==n||e&&e.status&&404==e.status)q.log("Does not exist: "+a);else{var o=n?n:e&&e.status?e.status:null;q.log(o+" when loading "+a)}r(t,{})},dataType:"json",async:t.getAsync})},postMissing:function(e,n,t,r,a){var o={};o[t]=r;var i=[];if("fallback"===K.sendMissingTo&&K.fallbackLng[0]!==!1)for(var s=0;s<K.fallbackLng.length;s++)i.push({lng:K.fallbackLng[s],url:k(K.resPostPath,{lng:K.fallbackLng[s],ns:n})});else if("current"===K.sendMissingTo||"fallback"===K.sendMissingTo&&K.fallbackLng[0]===!1)i.push({lng:e,url:k(K.resPostPath,{lng:e,ns:n})});else if("all"===K.sendMissingTo)for(var s=0,u=a.length;u>s;s++)i.push({lng:a[s],url:k(K.resPostPath,{lng:a[s],ns:n})});for(var l=0,f=i.length;f>l;l++){var c=i[l];q.ajax({url:c.url,type:K.sendType,data:o,success:function(){q.log("posted missing key '"+t+"' to: "+c.url);for(var e=t.split("."),a=0,o=R[c.lng][n];e[a];)o=o[e[a]]=a===e.length-1?r:o[e[a]]||{},a++},error:function(){q.log("failed posting missing key '"+t+"' to: "+c.url)},dataType:"json",async:K.postAsync})}},reload:x};var K={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",defaultVariables:!1,reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,missingKeyHandler:H.postMissing,shortcutFunction:"sprintf"},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},G={create:function(e,n,t,r){var a;if(t){var o=new Date;o.setTime(o.getTime()+60*t*1e3),a="; expires="+o.toGMTString()}else a="";r=r?"domain="+r+";":"",document.cookie=e+"="+n+a+";"+r+"path=/"},read:function(e){for(var n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var a=t[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return a.substring(n.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},U={create:function(){},read:function(){return null},remove:function(){}},q={extend:M?M.extend:n,deepExtend:t,each:M?M.each:r,ajax:M?M.ajax:"undefined"!=typeof document?o:function(){},cookie:"undefined"!=typeof document?G:U,detectLanguage:A,escape:a,log:function(e){K.debug&&"undefined"!=typeof console&&console.log(e)},error:function(e){"undefined"!=typeof console&&console.error(e)},getCountyIndexOfLng:function(e){var n=0;return("nb-NO"===e||"nn-NO"===e||"nb-no"===e||"nn-no"===e)&&(n=1),n},toLanguages:function(e){function n(e){var n=e;if("string"==typeof e&&e.indexOf("-")>-1){var t=e.split("-");n=K.lowerCaseLng?t[0].toLowerCase()+"-"+t[1].toLowerCase():t[0].toLowerCase()+"-"+t[1].toUpperCase()}else n=K.lowerCaseLng?e.toLowerCase():e;return n}var t=this.log,r=[],a=K.lngWhitelist||!1,o=function(e){!a||a.indexOf(e)>-1?r.push(e):t("rejecting non-whitelisted language: "+e)};if("string"==typeof e&&e.indexOf("-")>-1){var i=e.split("-");"unspecific"!==K.load&&o(n(e)),"current"!==K.load&&o(n(i[this.getCountyIndexOfLng(e)]))}else o(n(e));for(var s=0;s<K.fallbackLng.length;s++)-1===r.indexOf(K.fallbackLng[s])&&K.fallbackLng[s]&&r.push(n(K.fallbackLng[s]));return r},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(e){return"string"==typeof e?e.replace(/\$/g,"$$$$"):e},localStorage:{setItem:function(e,n){if(window.localStorage)try{window.localStorage.setItem(e,n)}catch(t){q.log('failed to set value for key "'+e+'" to localStorage.')}},getItem:function(e,n){if(window.localStorage)try{return window.localStorage.getItem(e,n)}catch(t){return void q.log('failed to get value for key "'+e+'" from localStorage.')}}}};q.applyReplacement=k;var J=[["ach","Acholi",[1,2],1],["af","Afrikaans",[1,2],2],["ak","Akan",[1,2],1],["am","Amharic",[1,2],1],["an","Aragonese",[1,2],2],["ar","Arabic",[0,1,2,3,11,100],5],["arn","Mapudungun",[1,2],1],["ast","Asturian",[1,2],2],["ay","Aymar",[1],3],["az","Azerbaijani",[1,2],2],["be","Belarusian",[1,2,5],4],["bg","Bulgarian",[1,2],2],["bn","Bengali",[1,2],2],["bo","Tibetan",[1],3],["br","Breton",[1,2],1],["bs","Bosnian",[1,2,5],4],["ca","Catalan",[1,2],2],["cgg","Chiga",[1],3],["cs","Czech",[1,2,5],6],["csb","Kashubian",[1,2,5],7],["cy","Welsh",[1,2,3,8],8],["da","Danish",[1,2],2],["de","German",[1,2],2],["dev","Development Fallback",[1,2],2],["dz","Dzongkha",[1],3],["el","Greek",[1,2],2],["en","English",[1,2],2],["eo","Esperanto",[1,2],2],["es","Spanish",[1,2],2],["es_ar","Argentinean Spanish",[1,2],2],["et","Estonian",[1,2],2],["eu","Basque",[1,2],2],["fa","Persian",[1],3],["fi","Finnish",[1,2],2],["fil","Filipino",[1,2],1],["fo","Faroese",[1,2],2],["fr","French",[1,2],9],["fur","Friulian",[1,2],2],["fy","Frisian",[1,2],2],["ga","Irish",[1,2,3,7,11],10],["gd","Scottish Gaelic",[1,2,3,20],11],["gl","Galician",[1,2],2],["gu","Gujarati",[1,2],2],["gun","Gun",[1,2],1],["ha","Hausa",[1,2],2],["he","Hebrew",[1,2],2],["hi","Hindi",[1,2],2],["hr","Croatian",[1,2,5],4],["hu","Hungarian",[1,2],2],["hy","Armenian",[1,2],2],["ia","Interlingua",[1,2],2],["id","Indonesian",[1],3],["is","Icelandic",[1,2],12],["it","Italian",[1,2],2],["ja","Japanese",[1],3],["jbo","Lojban",[1],3],["jv","Javanese",[0,1],13],["ka","Georgian",[1],3],["kk","Kazakh",[1],3],["km","Khmer",[1],3],["kn","Kannada",[1,2],2],["ko","Korean",[1],3],["ku","Kurdish",[1,2],2],["kw","Cornish",[1,2,3,4],14],["ky","Kyrgyz",[1],3],["lb","Letzeburgesch",[1,2],2],["ln","Lingala",[1,2],1],["lo","Lao",[1],3],["lt","Lithuanian",[1,2,10],15],["lv","Latvian",[1,2,0],16],["mai","Maithili",[1,2],2],["mfe","Mauritian Creole",[1,2],1],["mg","Malagasy",[1,2],1],["mi","Maori",[1,2],1],["mk","Macedonian",[1,2],17],["ml","Malayalam",[1,2],2],["mn","Mongolian",[1,2],2],["mnk","Mandinka",[0,1,2],18],["mr","Marathi",[1,2],2],["ms","Malay",[1],3],["mt","Maltese",[1,2,11,20],19],["nah","Nahuatl",[1,2],2],["nap","Neapolitan",[1,2],2],["nb","Norwegian Bokmal",[1,2],2],["ne","Nepali",[1,2],2],["nl","Dutch",[1,2],2],["nn","Norwegian Nynorsk",[1,2],2],["no","Norwegian",[1,2],2],["nso","Northern Sotho",[1,2],2],["oc","Occitan",[1,2],1],["or","Oriya",[2,1],2],["pa","Punjabi",[1,2],2],["pap","Papiamento",[1,2],2],["pl","Polish",[1,2,5],7],["pms","Piemontese",[1,2],2],["ps","Pashto",[1,2],2],["pt","Portuguese",[1,2],2],["pt_br","Brazilian Portuguese",[1,2],2],["rm","Romansh",[1,2],2],["ro","Romanian",[1,2,20],20],["ru","Russian",[1,2,5],4],["sah","Yakut",[1],3],["sco","Scots",[1,2],2],["se","Northern Sami",[1,2],2],["si","Sinhala",[1,2],2],["sk","Slovak",[1,2,5],6],["sl","Slovenian",[5,1,2,3],21],["so","Somali",[1,2],2],["son","Songhay",[1,2],2],["sq","Albanian",[1,2],2],["sr","Serbian",[1,2,5],4],["su","Sundanese",[1],3],["sv","Swedish",[1,2],2],["sw","Swahili",[1,2],2],["ta","Tamil",[1,2],2],["te","Telugu",[1,2],2],["tg","Tajik",[1,2],1],["th","Thai",[1],3],["ti","Tigrinya",[1,2],1],["tk","Turkmen",[1,2],2],["tr","Turkish",[1,2],1],["tt","Tatar",[1],3],["ug","Uyghur",[1],3],["uk","Ukrainian",[1,2,5],4],["ur","Urdu",[1,2],2],["uz","Uzbek",[1,2],1],["vi","Vietnamese",[1],3],["wa","Walloon",[1,2],1],["wo","Wolof",[1],3],["yo","Yoruba",[1,2],2],["zh","Chinese",[1],3]],$={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)}},X={rules:function(){var e,n={};for(e=J.length;e--;)n[J[e][0]]={name:J[e][1],numbers:J[e][2],plurals:$[J[e][3]]};return n}(),addRule:function(e,n){X.rules[e]=n},setCurrentLng:function(e){if(!X.currentRule||X.currentRule.lng!==e){var n=e.split("-");X.currentRule={lng:e,rule:X.rules[n[0]]}}},needsPlural:function(e,n){var t,r=e.split("-");return t=X.currentRule&&X.currentRule.lng===e?X.currentRule.rule:X.rules[r[q.getCountyIndexOfLng(e)]],t&&t.numbers.length<=1?!1:1!==this.get(e,n)},get:function(e,n){function t(n,t){var r;if(r=X.currentRule&&X.currentRule.lng===e?X.currentRule.rule:X.rules[n]){var a;a=r.plurals(r.noAbs?t:Math.abs(t));var o=r.numbers[a];return 2===r.numbers.length&&1===r.numbers[0]&&(2===o?o=-1:1===o&&(o=1)),o}return 1===t?"1":"-1"}var r=e.split("-");return t(r[q.getCountyIndexOfLng(e)],n)}},W={},Q=function(e,n){W[e]=n},Y=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function n(e,n){for(var t=[];n>0;t[--n]=e);return t.join("")}var t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return t.format=function(t,r){var a,o,i,s,u,l,f,c=1,p=t.length,g="",d=[];for(o=0;p>o;o++)if(g=e(t[o]),"string"===g)d.push(t[o]);else if("array"===g){if(s=t[o],s[2])for(a=r[c],i=0;i<s[2].length;i++){if(!a.hasOwnProperty(s[2][i]))throw Y('[sprintf] property "%s" does not exist',s[2][i]);a=a[s[2][i]]}else a=s[1]?r[s[1]]:r[c++];if(/[^s]/.test(s[8])&&"number"!=e(a))throw Y("[sprintf] expecting number but found %s",e(a));switch(s[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=s[7]?a.toExponential(s[7]):a.toExponential();break;case"f":a=s[7]?parseFloat(a).toFixed(s[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&s[7]?a.substring(0,s[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(s[8])&&s[3]&&a>=0?"+"+a:a,l=s[4]?"0"==s[4]?"0":s[4].charAt(1):" ",f=s[6]-String(a).length,u=s[6]?n(l,f):"",d.push(s[5]?a+u:u+a)}return d.join("")},t.cache={},t.parse=function(e){for(var n=e,t=[],r=[],a=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw"[sprintf] huh?";if(t[2]){a|=1;var o=[],i=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(i)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(i=i.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(i)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(i)))throw"[sprintf] huh?";o.push(s[1])}t[2]=o}else a|=2;if(3===a)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(t)}n=n.substring(t[0].length)}return r},t}(),Z=function(e,n){return n.unshift(e),Y.apply(null,n)};Q("sprintf",function(e,n,t){return t.sprintf?"[object Array]"===Object.prototype.toString.apply(t.sprintf)?Z(e,t.sprintf):"object"==typeof t.sprintf?Y(e,t.sprintf):e:e}),F.init=i,F.setLng=y,F.preload=s,F.addResourceBundle=u,F.hasResourceBundle=l,F.getResourceBundle=f,F.addResource=p,F.addResources=g,F.removeResourceBundle=c,F.loadNamespace=h,F.loadNamespaces=m,F.setDefaultNamespace=d,F.t=j,F.translate=j,F.exists=w,F.detectLanguage=q.detectLanguage,F.pluralExtensions=X,F.sync=H,F.functions=q,F.lng=v,F.addPostProcessor=Q,F.applyReplacement=q.applyReplacement,F.options=K}("undefined"==typeof exports?window:exports);


},{"jquery":"jquery"}],153:[function(require,module,exports){
(function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){var e,n,i,r,o,s,a,h,u,l=[].slice;i=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.listen()}return e.prototype.controller=function(t){return this.controllers[this.alias_maps[t]||t||this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,i;return n=(i=this.controllers)[t]||(i[t]=new o(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return null!=(e=t.controller())?e.view.hide():void 0}}(this)).on("blur.atwhoInner",function(t){return function(){var e;return(e=t.controller())?e.view.hide(e.get_opt("display_timeout")):void 0}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy();return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){return e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:t.noop();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),n.hide();break;case a.UP:e.preventDefault(),n.prev();break;case a.DOWN:e.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;e.preventDefault(),n.choose();break;default:t.noop()}},e}(),o=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.oDocument=this.$inputor[0].ownerDocument,this.oWindow=this.oDocument.defaultView||this.oDocument.parentWindow,this.id=this.$inputor[0].id||i(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new h(this),this.view=new u(this)}var i,r;return r=0,i=function(){return r+=1},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy()},n.prototype.call_default=function(){var e,n,i;i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[];try{return s[i].apply(this,e)}catch(r){return n=r,t.error(""+n+" Or maybe At.js doesn't have function "+i)}},n.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),i=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(i,e)},n.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||s[t]},n.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(n){return e=n,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var t,e,n,i,r,o;return e=this.content(),t=this.$inputor.caret("pos"),o=e.slice(0,t),i=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof i&&i.length<=this.get_opt("max_len",20)?(r=t-i.length,n=r+i.length,this.pos=r,i={text:i.toLowerCase(),head_pos:r,end_pos:n},this.trigger("matched",[this.at,i.text])):this.view.hide(),this.query=i},n.prototype.rect=function(){var t,e;if(t=this.$inputor.caret("offset",this.pos-1))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.oWindow.getSelection&&(this.range=this.oWindow.getSelection().getRangeAt(0)),this.oDocument.selection)?this.ie8_range=this.oDocument.selection.createRange():void 0},n.prototype.insert_content_for=function(e){var n,i,r;return i=e.data("value"),r=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!r?i:(n=t.extend({},e.data("item-data"),{"atwho-data-value":i,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,r,n))},n.prototype.insert=function(e,n){var i,r,o,s,a,h,u,l,c,p,d;return i=this.$inputor,"true"===i.attr("contentEditable")&&(o="atwho-view-flag atwho-view-flag-"+(this.get_opt("alias")||this.at),s=""+e+"<span contenteditable='false'>&nbsp;<span>",a="<span contenteditable='false' class='"+o+"'>"+s+"</span>",r=t(a,this.oDocument).data("atwho-data-item",n.data("item-data")),this.oDocument.selection&&(r=t("<span contenteditable='true'></span>",this.oDocument).html(r))),i.is("textarea, input")?(e=""+e,c=i.val(),p=c.slice(0,Math.max(this.query.head_pos-this.at.length,0)),d=""+p+e+" "+c.slice(this.query.end_pos||0),i.val(d),i.caret("pos",p.length+e.length+1)):(u=this.range)?(h=u.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,u.setStart(u.endContainer,Math.max(h,0)),u.setEnd(u.endContainer,u.endOffset),u.deleteContents(),u.insertNode(r[0]),u.collapse(!1),l=this.oWindow.getSelection(),l.removeAllRanges(),l.addRange(u)):(u=this.ie8_range)&&(u.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),u.pasteHTML(s),u.collapse(!1),u.select()),i.is(":focus")||i.focus(),i.change()},n.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},n}(),h=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,r;return n=this.fetch(),i=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,i)||[],r=this.context.callbacks("remote_filter"),n.length>0||!r&&0===n.length?e(n):r.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),u=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(){var t,e;return t=this.$el.find(".cur"),e=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,e,t),t),this.context.trigger("inserted",[t]),this.hide()},e.prototype.reposition=function(e){var n;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),n={left:e.left,top:e.bottom},this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.context.mark_range(),this.visible()||this.$el.show(),(t=this.context.rect())?this.reposition(t):void 0},e.prototype.hide=function(t){var e;return isNaN(t&&this.visible())?(this.context.reset_rect(),this.$el.hide()):(e=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(e,t))},e.prototype.render=function(e){var n,i,r,o,s,a,h;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),s=this.context.get_opt("tpl"),a=0,h=e.length;h>a;a++)r=e[a],r=t.extend({},r,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,s,r),n=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",r),i.append(n);return this.show(),i.find("li:first").addClass("cur")},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13},s={before_save:function(e){var n,i,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.isPlainObject(n)?n:{name:n});return o},matcher:function(t,e,n){var i,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=r.exec(e),i?i[2]||i[1]:null},filter:function(t,e,n){var i,r,o,s;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],~i[n].toLowerCase().indexOf(t)&&s.push(i);return s},remote_filter:null,sorter:function(t,e,n){var i,r,o,s;if(!t)return e;for(s=[],r=0,o=e.length;o>r;r++)i=e[r],i.atwho_order=i[n].toLowerCase().indexOf(t),i.atwho_order>-1&&s.push(i);return s.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n){return e[n]})}catch(i){return n=i,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},before_insert:function(t){return t}},n={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},getInsertedItemsWithIDs:function(e){var n,i,r;return(n=this.controller(e))?(e&&(e="-"+(n.get_opt("alias")||n.at)),i=[],r=t.map(this.$inputor.find("span.atwho-view-flag"+(e||"")),function(e){var n;return n=t(e).data("atwho-data-item"),i.indexOf(n.id)>-1?void 0:(n.id&&(i.push=n.id),n)}),[i,r]):[null,null]},getInsertedItems:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[1]},getInsertedIDs:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[0]},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},r={init:function(e){var n,r;return r=(n=t(this)).data("atwho"),r||n.data("atwho",r=new i(this)),r.reg(e.at,e),this}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(i){var o,s;return s=arguments,t("body").append(e),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e;return"object"!=typeof i&&i?n[i]?(e=t(this).data("atwho"))?o=n[i].apply(e,Array.prototype.slice.call(s,1)):void 0:t.error("Method "+i+" does not exist on jQuery.caret"):r.init.apply(this,s)}),o||this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span>${atwho-data-value}</span>",callbacks:s,search_key:"name",start_with_space:!0,limit:5,max_len:20,display_timeout:300}})}).call(this);


},{}],154:[function(require,module,exports){
(function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,o,n,r,i,s,a,c,p;return p="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=s.selection.createRange(),t=s.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,o;return(o=this.range())?(t=o.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(o.endContainer,o.endOffset),e=t.toString().length,t.detach(),e):s.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=s.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,o,n,r;if(c.getSelection&&(n=this.range())){if(n.endOffset-1<0)return null;e=n.cloneRange(),e.setStart(n.endContainer,n.endOffset-1),e.setEnd(n.endContainer,n.endOffset),r=e.getBoundingClientRect(),o={height:r.height,left:r.left+r.width,top:r.top},e.detach()}else s.selection&&(o=this.getOldIEOffset());return o&&!a&&(o.top+=t(c).scrollTop(),o.left+=t(c).scrollLeft()),o},e.prototype.range=function(){var t;return c.getSelection?(t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null):void 0},e}(),o=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,o,n,r,i,a;return e=this.domInputor,i=s.selection.createRange(),r=0,i&&i.parentElement()===e&&(n=e.value.replace(/\r\n/g,"\n"),o=n.length,a=e.createTextRange(),a.moveToBookmark(i.getBookmark()),t=e.createTextRange(),t.collapse(!1),r=a.compareEndPoints("StartToEnd",t)>-1?o:-a.moveStart("character",-o)),r},e.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,o;return e=this.domInputor,s.selection?(o=e.createTextRange(),o.move("character",t),o.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,o,n,r;return o=this.domInputor.createTextRange(),t||(t=this.getPos()),o.move("character",t),n=o.boundingLeft,r=o.boundingTop,e=o.boundingHeight,{left:n,top:r,height:e}},e.prototype.getOffset=function(e){var o,n,r;return o=this.$inputor,s.selection?(n=this.getIEOffset(e),n.top+=t(c).scrollTop()+o.scrollTop(),n.left+=t(c).scrollLeft()+o.scrollLeft(),n):(n=o.offset(),r=this.getPosition(e),n={left:n.left+r.left-o.scrollLeft(),top:n.top+r.top-o.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,o,r,i,s,a;return e=this.$inputor,r=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),i="<span>"+r(a)+"</span>",i+="<span id='caret'>|</span>",s=new n(e),o=s.create(i).rect()},e.prototype.getIEPosition=function(t){var e,o,n,r,i;return n=this.getIEOffset(t),o=this.$inputor.offset(),r=n.left-o.left,i=n.top-o.top,e=n.height,{left:r,top:i,height:e}},e}(),n=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],e.prototype.mirrorCss=function(){var e,o=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},t.each(this.css_attr,function(t,n){return e[n]=o.$inputor.css(n)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,o;return t=this.$mirror.find("#caret"),e=t.position(),o={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),o},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},i={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return s.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var o,n;return n=this.getOffset(e),a&&(o=t(a).offset(),n.top+=o.top,n.left+=o.left),n}},s=null,c=null,a=null,t.fn.caret=function(n){var p,f;s=this[0].ownerDocument,c=s.defaultView||s.parentWindow;try{a=c.frameElement}catch(l){f=l}return p=r.contentEditable(this)?new e(this):new o(this),i[n]?i[n].apply(p,Array.prototype.slice.call(arguments,1)):t.error("Method "+n+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=o,t.fn.caret.Utils=r,t.fn.caret.apis=i})}).call(this);


},{}],155:[function(require,module,exports){
(function (global){
(function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||a.defaults,this.rules=p.normal,this.options.gfm&&(this.rules=this.options.tables?p.tables:p.gfm)}function t(e,t){if(this.options=t||a.defaults,this.links=e,this.rules=u.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(e){this.options=e||{}}function r(e){this.tokens=[],this.token=null,this.options=e||a.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?String.fromCharCode("x"===t.charAt(1)?parseInt(t.substring(2),16):+t.substring(1)):""})}function l(e,t){return e=e.source,t=t||"",function n(r,s){return r?(s=s.source||s,s=s.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,s),n):new RegExp(e,t)}}function o(){}function h(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function a(t,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=h({},a.defaults,n||{});var l,o,p=n.highlight,u=0;try{l=e.lex(t,n)}catch(c){return i(c)}o=l.length;var g=function(e){if(e)return n.highlight=p,i(e);var t;try{t=r.parse(l,n)}catch(s){e=s}return n.highlight=p,e?i(e):i(null,t)};if(!p||p.length<3)return g();if(delete n.highlight,!o)return g();for(;u<l.length;u++)!function(e){return"code"!==e.type?--o||g():p(e.text,e.lang,function(t,n){return t?g(t):null==n||n===e.text?--o||g():(e.text=n,e.escaped=!0,void(--o||g()))})}(l[u])}else try{return n&&(n=h({},a.defaults,n)),r.parse(e.lex(t,n),n)}catch(c){if(c.message+="\nPlease report this to https://github.com/chjj/marked.",(n||a.defaults).silent)return"<p>An error occured:</p><pre>"+s(c.message+"",!0)+"</pre>";throw c}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=l(p.item,"gm")(/bull/g,p.bullet)(),p.list=l(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=l(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=l(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=l(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=h({},p),p.gfm=h({},p.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),p.gfm.paragraph=l(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=h({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=p,e.lex=function(t,n){var r=new e(n);return r.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var r,s,i,l,o,h,a,u,c,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),h={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},u=0;u<h.align.length;u++)h.align[u]=/^ *-+: *$/.test(h.align[u])?"right":/^ *:-+: *$/.test(h.align[u])?"center":/^ *:-+ *$/.test(h.align[u])?"left":null;for(u=0;u<h.cells.length;u++)h.cells[u]=h.cells[u].split(/ *\| */);this.tokens.push(h)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),l=i[2],this.tokens.push({type:"list_start",ordered:l.length>1}),i=i[0].match(this.rules.item),r=!1,c=i.length,u=0;c>u;u++)h=i[u],a=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(a-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+a+"}","gm"),"")),this.options.smartLists&&u!==c-1&&(o=p.bullet.exec(i[u+1])[0],l===o||l.length>1&&o.length>1||(e=i.slice(u+1).join("\n")+e,u=c-1)),s=r||/\n\n(?!\s*$)/.test(h),u!==c-1&&(r="\n"===h.charAt(h.length-1),s||(s=r)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(h,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]});else if(!n&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),h={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},u=0;u<h.align.length;u++)h.align[u]=/^ *-+: *$/.test(h.align[u])?"right":/^ *:-+: *$/.test(h.align[u])?"center":/^ *:-+ *$/.test(h.align[u])?"left":null;for(u=0;u<h.cells.length;u++)h.cells[u]=h.cells[u].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=l(u.link)("inside",u._inside)("href",u._href)(),u.reflink=l(u.reflink)("inside",u._inside)(),u.normal=h({},u),u.pedantic=h({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=h({},u.normal,{escape:l(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:l(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=h({},u.gfm,{br:l(u.br)("{2,}","*")(),text:l(u.gfm.text)("{2,}","*")()}),t.rules=u,t.output=function(e,n,r){var s=new t(n,r);return s.output(e)},t.prototype.output=function(e){for(var t,n,r,i,l="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(n=this.mangle(":"===i[1].charAt(6)?i[1].substring(7):i[1]),r=this.mangle("mailto:")+n):(n=s(i[1]),r=n),l+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),l+=this.options.sanitize?s(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,l+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(s(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),l+=s(this.smartypants(i[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=s(i[1]),r=n,l+=this.renderer.link(r,null,n);return l},t.prototype.outputLink=function(e,t){var n=s(t.href),r=t.title?s(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,s(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},t.prototype.mangle=function(e){for(var t,n="",r=e.length,s=0;r>s;s++)t=e.charCodeAt(s),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+s(t,!0)+'">'+(n?e:s(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:s(e,!0))+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},n.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(i(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(s){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),l+=">"+n+"</a>"},n.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},r.parse=function(e,t,n){var s=new r(t,n);return s.parse(e)},r.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,s,i="",l="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",s=0;s<t.length;s++)n+=this.renderer.tablecell(this.inline.output(t[s]),{header:!1,align:this.token.align[s]});l+=this.renderer.tablerow(n)}return this.renderer.table(i,l);case"blockquote_start":for(var l="";"blockquote_end"!==this.next().type;)l+=this.tok();return this.renderer.blockquote(l);case"list_start":for(var l="",o=this.token.ordered;"list_end"!==this.next().type;)l+=this.tok();return this.renderer.list(l,o);case"list_item_start":for(var l="";"list_item_end"!==this.next().type;)l+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(l);case"loose_item_start":for(var l="";"list_item_end"!==this.next().type;)l+=this.tok();return this.renderer.listitem(l);case"html":var h=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(h);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},o.exec=o,a.options=a.setOptions=function(e){return h(a.defaults,e),a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},a.Parser=r,a.parser=r.parse,a.Renderer=n,a.Lexer=e,a.lexer=e.lex,a.InlineLexer=t,a.inlineLexer=t.output,a.parse=a,"undefined"!=typeof module&&"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):this.marked=a}).call(function(){return this||("undefined"!=typeof window?window:global)}());


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],156:[function(require,module,exports){
(function(t){function e(t,e){return function(n){return u(t.call(this,n),e)}}function n(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function r(){}function s(t){w(t),i(this,t)}function a(t){var e=_(t),n=e.year||0,r=e.month||0,s=e.week||0,a=e.day||0,i=e.hour||0,o=e.minute||0,u=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*u+6e4*o+36e5*i,this._days=+a+7*s,this._months=+r+12*n,this._data={},this._bubble()}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function o(t){return 0>t?Math.ceil(t):Math.floor(t)}function u(t,e,n){for(var r=Math.abs(t)+"",s=t>=0;r.length<e;)r="0"+r;return(s?n?"+":"":"-")+r}function h(t,e,n,r){var s,a,i=e._milliseconds,o=e._days,u=e._months;i&&t._d.setTime(+t._d+i*n),(o||u)&&(s=t.minute(),a=t.hour()),o&&t.date(t.date()+o*n),u&&t.month(t.month()+u*n),i&&!r&&nt.updateOffset(t),(o||u)&&(t.minute(s),t.hour(a))}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function c(t,e,n){var r,s=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),i=0;for(r=0;s>r;r++)(n&&t[r]!==e[r]||!n&&y(t[r])!==y(e[r]))&&i++;return i+a}function l(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Et[t]||Nt[e]||e}return t}function _(t){var e,n,r={};for(n in t)t.hasOwnProperty(n)&&(e=l(n),e&&(r[e]=t[n]));return r}function m(e){var n,r;if(0===e.indexOf("week"))n=7,r="day";else{if(0!==e.indexOf("month"))return;n=12,r="month"}nt[e]=function(s,a){var i,o,u=nt.fn._lang[e],h=[];if("number"==typeof s&&(a=s,s=t),o=function(t){var e=nt().utc().set(r,t);return u.call(nt.fn._lang,e,s||"")},null!=a)return o(a);for(i=0;n>i;i++)h.push(o(i));return h}}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function g(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function p(t){return Y(t)?366:365}function Y(t){return t%4===0&&t%100!==0||t%400===0}function w(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ut]<0||t._a[ut]>11?ut:t._a[ht]<1||t._a[ht]>g(t._a[ot],t._a[ut])?ht:t._a[dt]<0||t._a[dt]>23?dt:t._a[ft]<0||t._a[ft]>59?ft:t._a[ct]<0||t._a[ct]>59?ct:t._a[lt]<0||t._a[lt]>999?lt:-1,t._pf._overflowDayOfYear&&(ot>e||e>ht)&&(e=ht),t._pf.overflow=e)}function M(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function D(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function v(t){return t?t.toLowerCase().replace("_","-"):t}function k(t,e){return e._isUTC?nt(t).zone(e._offset||0):nt(t).local()}function S(t,e){return e.abbr=t,_t[t]||(_t[t]=new r),_t[t].set(e),_t[t]}function b(t){delete _t[t]}function T(t){var e,n,r,s,a=0,i=function(t){if(!_t[t]&&mt)try{require("./lang/"+t)}catch(e){}return _t[t]};if(!t)return nt.fn._lang;if(!d(t)){if(n=i(t))return n;t=[t]}for(;a<t.length;){for(s=v(t[a]).split("-"),e=s.length,r=v(t[a+1]),r=r?r.split("-"):null;e>0;){if(n=i(s.slice(0,e).join("-")))return n;if(r&&r.length>=e&&c(s,r,!0)>=e-1)break;e--}a++}return nt.fn._lang}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,n,r=t.match(Yt);for(e=0,n=r.length;n>e;e++)r[e]=jt[r[e]]?jt[r[e]]:O(r[e]);return function(s){var a="";for(e=0;n>e;e++)a+=r[e]instanceof Function?r[e].call(s,t):r[e];return a}}function W(t,e){return t.isValid()?(e=F(e,t.lang()),$t[e]||($t[e]=G(e)),$t[e](t)):t.lang().invalidDate()}function F(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(wt.lastIndex=0;r>=0&&wt.test(t);)t=t.replace(wt,n),wt.lastIndex=0,r-=1;return t}function C(t,e){var n,r=e._strict;switch(t){case"DDDD":return Ct;case"YYYY":case"GGGG":case"gggg":return r?zt:vt;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?Lt:kt;case"S":if(r)return Wt;case"SS":if(r)return Ft;case"SSS":case"DDD":return r?Ct:Dt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return bt;case"a":case"A":return T(e._l)._meridiemParse;case"X":return Gt;case"Z":case"ZZ":return Tt;case"T":return Ot;case"SSSS":return St;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Ft:Mt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return r?Wt:Mt;default:return n=new RegExp(A(I(t.replace("\\","")),"i"))}}function z(t){t=t||"";var e=t.match(Tt)||[],n=e[e.length-1]||[],r=(n+"").match(It)||["-",0,0],s=+(60*r[1])+y(r[2]);return"+"===r[0]?-s:s}function L(t,e,n){var r,s=n._a;switch(t){case"M":case"MM":null!=e&&(s[ut]=y(e)-1);break;case"MMM":case"MMMM":r=T(n._l).monthsParse(e),null!=r?s[ut]=r:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[ht]=y(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=y(e));break;case"YY":s[ot]=y(e)+(y(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ot]=y(e);break;case"a":case"A":n._isPm=T(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[dt]=y(e);break;case"m":case"mm":s[ft]=y(e);break;case"s":case"ss":s[ct]=y(e);break;case"S":case"SS":case"SSS":case"SSSS":s[lt]=y(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=z(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function U(t){var e,n,r,s,a,i,o,u,h,d,f=[];if(!t._d){for(r=H(t),t._w&&null==t._a[ht]&&null==t._a[ut]&&(a=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[ot]?nt().weekYear():t._a[ot]},i=t._w,null!=i.GG||null!=i.W||null!=i.E?o=R(a(i.GG),i.W||1,i.E,4,1):(u=T(t._l),h=null!=i.d?J(i.d,u):null!=i.e?parseInt(i.e,10)+u._week.dow:0,d=parseInt(i.w,10)||1,null!=i.d&&h<u._week.dow&&d++,o=R(a(i.gg),d,h,u._week.doy,u._week.dow)),t._a[ot]=o.year,t._dayOfYear=o.dayOfYear),t._dayOfYear&&(s=null==t._a[ot]?r[ot]:t._a[ot],t._dayOfYear>p(s)&&(t._pf._overflowDayOfYear=!0),n=V(s,0,t._dayOfYear),t._a[ut]=n.getUTCMonth(),t._a[ht]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=f[e]=r[e];for(;7>e;e++)t._a[e]=f[e]=null==t._a[e]?2===e?1:0:t._a[e];f[dt]+=y((t._tzm||0)/60),f[ft]+=y((t._tzm||0)%60),t._d=(t._useUTC?V:$).apply(null,f)}}function P(t){var e;t._d||(e=_(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],U(t))}function H(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function x(t){t._a=[],t._pf.empty=!0;var e,n,r,s,a,i=T(t._l),o=""+t._i,u=o.length,h=0;for(r=F(t._f,i).match(Yt)||[],e=0;e<r.length;e++)s=r[e],n=(o.match(C(s,t))||[])[0],n&&(a=o.substr(0,o.indexOf(n)),a.length>0&&t._pf.unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),h+=n.length),jt[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),L(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=u-h,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[dt]<12&&(t._a[dt]+=12),t._isPm===!1&&12===t._a[dt]&&(t._a[dt]=0),U(t),w(t)}function I(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,s){return e||n||r||s})}function A(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t){var e,n,r,s,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)a=0,e=i({},t),M(e),e._f=t._f[s],x(e),D(e)&&(a+=e._pf.charsLeftOver,a+=10*e._pf.unusedTokens.length,e._pf.score=a,(null==r||r>a)&&(r=a,n=e));i(t,n||e)}function E(t){var e,n=t._i,r=Ut.exec(n);if(r){for(t._pf.iso=!0,e=4;e>0;e--)if(r[e]){t._f=Ht[e-1]+(r[6]||" ");break}for(e=0;4>e;e++)if(xt[e][1].exec(n)){t._f+=xt[e][0];break}n.match(Tt)&&(t._f+="Z"),x(t)}else t._d=new Date(n)}function N(e){var n=e._i,r=yt.exec(n);n===t?e._d=new Date:r?e._d=new Date(+r[1]):"string"==typeof n?E(e):d(n)?(e._a=n.slice(0),U(e)):f(n)?e._d=new Date(+n):"object"==typeof n?P(e):e._d=new Date(n)}function $(t,e,n,r,s,a,i){var o=new Date(t,e,n,r,s,a,i);return 1970>t&&o.setFullYear(t),o}function V(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function J(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function j(t,e,n,r,s){return s.relativeTime(e||1,!!n,t,r)}function q(t,e,n){var r=it(Math.abs(t)/1e3),s=it(r/60),a=it(s/60),i=it(a/24),o=it(i/365),u=45>r&&["s",r]||1===s&&["m"]||45>s&&["mm",s]||1===a&&["h"]||22>a&&["hh",a]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",it(i/30)]||1===o&&["y"]||["yy",o];return u[2]=e,u[3]=t>0,u[4]=n,j.apply({},u)}function X(t,e,n){var r,s=n-e,a=n-t.day();return a>s&&(a-=7),s-7>a&&(a+=7),r=nt(t).add("d",a),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function R(t,e,n,r,s){var a,i,o=new Date(u(t,6,!0)+"-01-01").getUTCDay();return n=null!=n?n:s,a=s-o+(o>r?7:0),i=7*(e-1)+(n-s)+a+1,{year:i>0?t:t-1,dayOfYear:i>0?i:p(t-1)+i}}function B(t){var e=t._i,n=t._f;return"undefined"==typeof t._pf&&M(t),null===e?nt.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),nt.isMoment(e)?(t=i({},e),t._d=new Date(+e._d)):n?d(n)?Z(t):x(t):N(t),new s(t))}function Q(t,e){nt.fn[t]=nt.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),nt.updateOffset(this),this):this._d["get"+n+e]()}}function K(t){nt.duration.fn[t]=function(){return this._data[t]}}function tt(t,e){nt.duration.fn["as"+t]=function(){return+this/e}}function et(t){var e=!1,n=nt;"undefined"==typeof ender&&(t?(at.moment=function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},i(at.moment,n)):at.moment=nt)}for(var nt,rt,st="2.5.0",at=this,it=Math.round,ot=0,ut=1,ht=2,dt=3,ft=4,ct=5,lt=6,_t={},mt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,yt=/^\/?Date\((\-?\d+)/i,gt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,pt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Mt=/\d\d?/,Dt=/\d{1,3}/,vt=/\d{1,4}/,kt=/[+\-]?\d{1,6}/,St=/\d+/,bt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Tt=/Z|[\+\-]\d\d:?\d\d/gi,Ot=/T/i,Gt=/[\+\-]?\d+(\.\d{1,3})?/,Wt=/\d/,Ft=/\d\d/,Ct=/\d{3}/,zt=/\d{4}/,Lt=/[+\-]?\d{6}/,Ut=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pt="YYYY-MM-DDTHH:mm:ssZ",Ht=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],xt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],It=/([\+\-]|\d\d)/gi,At="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Zt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Et={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Nt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},$t={},Vt="DDD w W M D d".split(" "),Jt="M D H h m s w W".split(" "),jt={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+u(Math.abs(t),6)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return u(y(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},SSSS:function(){return u(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(y(t/60),2)+":"+u(y(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(y(t/60),2)+u(y(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Vt.length;)rt=Vt.pop(),jt[rt+"o"]=n(jt[rt],rt);for(;Jt.length;)rt=Jt.pop(),jt[rt+rt]=e(jt[rt],2);for(jt.DDDD=e(jt.DDD,3),i(r.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,r;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=nt.utc([2e3,e]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(r.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=nt([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var s=this._relativeTime[n];return"function"==typeof s?s(t,e,n,r):s.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return X(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),nt=function(e,n,r,s){return"boolean"==typeof r&&(s=r,r=t),B({_i:e,_f:n,_l:r,_strict:s,_isUTC:!1})},nt.utc=function(e,n,r,s){var a;return"boolean"==typeof r&&(s=r,r=t),a=B({_useUTC:!0,_isUTC:!0,_l:r,_i:e,_f:n,_strict:s}).utc()},nt.unix=function(t){return nt(1e3*t)},nt.duration=function(t,e){var n,r,s,i=t,o=null;return nt.isDuration(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(i={},e?i[e]=t:i.milliseconds=t):(o=gt.exec(t))?(n="-"===o[1]?-1:1,i={y:0,d:y(o[ht])*n,h:y(o[dt])*n,m:y(o[ft])*n,s:y(o[ct])*n,ms:y(o[lt])*n}):(o=pt.exec(t))&&(n="-"===o[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},i={y:s(o[2]),M:s(o[3]),d:s(o[4]),h:s(o[5]),m:s(o[6]),s:s(o[7]),w:s(o[8])}),r=new a(i),nt.isDuration(t)&&t.hasOwnProperty("_lang")&&(r._lang=t._lang),r},nt.version=st,nt.defaultFormat=Pt,nt.updateOffset=function(){},nt.lang=function(t,e){var n;return t?(e?S(v(t),e):null===e?(b(t),t="en"):_t[t]||T(t),n=nt.duration.fn._lang=nt.fn._lang=T(t),n._abbr):nt.fn._lang._abbr},nt.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},nt.isMoment=function(t){return t instanceof s},nt.isDuration=function(t){return t instanceof a},rt=qt.length-1;rt>=0;--rt)m(qt[rt]);for(nt.normalizeUnits=function(t){return l(t)},nt.invalid=function(t){var e=nt.utc(0/0);return null!=t?i(e._pf,t):e._pf.userInvalidated=!0,e},nt.parseZone=function(t){return nt(t).parseZone()},i(nt.fn=s.prototype,{clone:function(){return nt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=nt(this).utc();return 0<t.year()&&t.year()<=9999?W(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return D(this)},isDSTShifted:function(){return this._a?this.isValid()&&c(this._a,(this._isUTC?nt.utc(this._a):nt(this._a)).toArray())>0:!1},parsingFlags:function(){return i({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=W(this,t||nt.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?nt.duration(+e,t):nt.duration(t,e),h(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?nt.duration(+e,t):nt.duration(t,e),h(this,n,-1),this},diff:function(t,e,n){var r,s,a=k(t,this),i=6e4*(this.zone()-a.zone());return e=l(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+a.daysInMonth()),s=12*(this.year()-a.year())+(this.month()-a.month()),s+=(this-nt(this).startOf("month")-(a-nt(a).startOf("month")))/r,s-=6e4*(this.zone()-nt(this).startOf("month").zone()-(a.zone()-nt(a).startOf("month").zone()))/r,"year"===e&&(s/=12)):(r=this-a,s="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-i)/864e5:"week"===e?(r-i)/6048e5:r),n?s:o(s)},from:function(t,e){return nt.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(nt(),t)},calendar:function(){var t=k(nt(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return Y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=J(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),nt.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=l(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=l(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+nt(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+nt(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+k(t,this).startOf(e)},min:function(t){return t=nt.apply(null,arguments),this>t?this:t},max:function(t){return t=nt.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=z(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&h(this,nt.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?nt(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return g(this.year(),this.month())},dayOfYear:function(t){var e=it((nt(this).startOf("day")-nt(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var e=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=X(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=X(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=l(t),this[t]()},set:function(t,e){return t=l(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),rt=0;rt<At.length;rt++)Q(At[rt].toLowerCase().replace(/s$/,""),At[rt]);Q("year","FullYear"),nt.fn.days=nt.fn.day,nt.fn.months=nt.fn.month,nt.fn.weeks=nt.fn.week,nt.fn.isoWeeks=nt.fn.isoWeek,nt.fn.toJSON=nt.fn.toISOString,i(nt.duration.fn=a.prototype,{_bubble:function(){var t,e,n,r,s=this._milliseconds,a=this._days,i=this._months,u=this._data;u.milliseconds=s%1e3,t=o(s/1e3),u.seconds=t%60,e=o(t/60),u.minutes=e%60,n=o(e/60),u.hours=n%24,a+=o(n/24),u.days=a%30,i+=o(a/30),u.months=i%12,r=o(i/12),u.years=r},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(t){var e=+this,n=q(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=nt.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=nt.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=l(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=l(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:nt.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),s=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||s||a?"T":"")+(r?r+"H":"")+(s?s+"M":"")+(a?a+"S":""):"P0D"}});for(rt in Zt)Zt.hasOwnProperty(rt)&&(tt(rt,Zt[rt]),K(rt.toLowerCase()));tt("Weeks",6048e5),nt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},nt.lang("en",{ordinal:function(t){var e=t%10,n=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),mt?(module.exports=nt,et(!0)):"function"==typeof define&&define.amd?define("moment",function(e,n,r){return r.config&&r.config()&&r.config().noGlobal!==!0&&et(r.config().noGlobal===t),nt}):et()}).call(this);


},{}],157:[function(require,module,exports){
!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var s=e([0]),i=-1,n=this.length;++i<n&&(s.context=s[0]=this[i])&&t.call(s[0],i,s)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function s(t){var s=e(document.createTextNode(""));t.before(s),s.before(t),s.remove()}function i(e){function t(e){return j[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(e,t){for(var s=0,i=t.length;i>s;s+=1)if(a(e,t[s]))return s;return-1}function o(){var t=e(z);t.appendTo(document.body);var s={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),s}function a(e,s){return e===s?!0:e===t||s===t?!1:null===e||null===s?!1:e.constructor===String?e+""==s+"":s.constructor===String?s+""==e+"":!1}function r(e,t,s){var i,n,o;if(null===e||e.length<1)return[];for(i=e.split(t),n=0,o=i.length;o>n;n+=1)i[n]=s(i[n]);return i}function c(e){return e.outerWidth(!1)-e.width()}function l(s){var i="keyup-change-value";s.on("keydown",function(){e.data(s,i)===t&&e.data(s,i,s.val())}),s.on("keyup",function(){var n=e.data(s,i);n!==t&&s.val()!==n&&(e.removeData(s,i),s.trigger("keyup-change"))})}function h(s){s.on("mousemove",function(s){var i=F;(i===t||i.x!==s.pageX||i.y!==s.pageY)&&e(s.target).trigger("mousemove-filtered",s)})}function u(e,s,i){i=i||t;var n;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function d(e,t){var s=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){n(e.target,t.get())>=0&&s(e)})}function p(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,s=e[0],i=e.val().length;e.focus();var n=s.offsetWidth>0||s.offsetHeight>0;n&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&(t=s.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var s=0,i=0;if("selectionStart"in t)s=t.selectionStart,i=t.selectionEnd-s;else if("selection"in document){t.focus();var n=document.selection.createRange();i=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),s=n.text.length-i}return{offset:s,length:i}}function g(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!M){var s=t[0].currentStyle||window.getComputedStyle(t[0],null);M=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"}),M.attr("class","select2-sizer"),e(document.body).append(M)}return M.text(t.val()),M.width()}function w(t,s,i){var n,o,a=[];n=e.trim(t.attr("class")),n&&(n=""+n,e(n.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&a.push(this)})),n=e.trim(s.attr("class")),n&&(n=""+n,e(n.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=i(this),o&&a.push(o))})),t.attr("class",a.join(" "))}function b(e,t,s,n){var o=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),a=t.length;return 0>o?void s.push(n(e)):(s.push(n(e.substring(0,o))),s.push("<span class='select2-match'>"),s.push(n(e.substring(o,o+a))),s.push("</span>"),void s.push(n(e.substring(o+a,e.length))))}function C(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function S(s){var i,n=null,o=s.quietMillis||100,a=s.url,r=this;return function(c){window.clearTimeout(i),i=window.setTimeout(function(){var i=s.data,o=a,l=s.transport||e.fn.select2.ajaxDefaults.transport,h={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||t,dataType:s.dataType||"json"},u=e.extend({},e.fn.select2.ajaxDefaults.params,h);i=i?i.call(r,c.term,c.page,c.context):null,o="function"==typeof o?o.call(r,c.term,c.page,c.context):o,n&&"function"==typeof n.abort&&n.abort(),s.params&&(e.isFunction(s.params)?e.extend(u,s.params.call(r)):e.extend(u,s.params)),e.extend(u,{url:o,dataType:s.dataType,data:i,success:function(e){var t=s.results(e,c.page,c);c.callback(t)},error:function(e,t,s){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:s};c.callback(i)}}),n=l.call(r,u)},o)}}function y(t){var s,i,n=t,o=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var a=n();return a.text&&(o=a.text,e.isFunction(o)||(s=a.text,o=function(e){return e[s]})),function(t){var s,i=t.term,a={results:[]};return""===i?void t.callback(n()):(s=function(n,a){var r,c;if(n=n[0],n.children){r={};for(c in n)n.hasOwnProperty(c)&&(r[c]=n[c]);r.children=[],e(n.children).each2(function(e,t){s(t,r.children)}),(r.children.length||t.matcher(i,o(r),n))&&a.push(r)}else t.matcher(i,o(n),n)&&a.push(n)},e(n().results).each2(function(e,t){s(t,a.results)}),void t.callback(a))}}function x(s){var i=e.isFunction(s);return function(n){var o=n.term,a={results:[]},r=i?s(n):s;e.isArray(r)&&(e(r).each(function(){var e=this.text!==t,s=e?this.text:this;(""===o||n.matcher(o,s))&&a.results.push(e?this:{id:this,text:this})}),n.callback(a))}}function E(t,s){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(s+" must be a string, function, or falsy value")}function T(t,s){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(s,i)}return t}function O(t){var s=0;return e.each(t,function(e,t){t.children?s+=O(t.children):s++}),s}function P(e,s,i,n){var o,r,c,l,h,u=e,d=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return t;for(;;){for(r=-1,c=0,l=n.tokenSeparators.length;l>c&&(h=n.tokenSeparators[c],r=e.indexOf(h),!(r>=0));c++);if(0>r)break;if(o=e.substring(0,r),e=e.substring(r+h.length),o.length>0&&(o=n.createSearchChoice.call(this,o,s),o!==t&&null!==o&&n.id(o)!==t&&null!==n.id(o))){for(d=!1,c=0,l=s.length;l>c;c++)if(a(n.id(o),n.id(s[c]))){d=!0;break}d||i(o)}}return u!==e?e:void 0}function I(){var t=this;e.each(arguments,function(e,s){t[s].remove(),t[s]=null})}function k(t,s){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}if(window.Select2===t){var A,R,D,H,M,L,N,F={x:0,y:0},U={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case U.LEFT:case U.RIGHT:case U.UP:case U.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case U.SHIFT:case U.CTRL:case U.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},z="<div class='select2-measure-scrollbar'></div>",j={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};L=e(document),H=function(){var e=1;return function(){return e++}}(),A=k(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(s){var i,n,a=".select2-results";this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==t&&null!==s.element.data("select2")&&s.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+H()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",s.element.attr("title")),this.body=e(document.body),w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",s.element.attr("style")),this.container.css(T(s.containerCss,this.opts.element)),this.container.addClass(T(s.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",g),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(s.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",g),this.results=i=this.container.find(a),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",g),h(this.results),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,s,n){var o=i.scrollTop();n>0&&0>=o-n?(i.scrollTop(0),g(e)):0>n&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),g(e))}),l(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",function(){n.addClass("select2-focused")}),n.on("blur",function(){n.removeClass("select2-focused")}),this.dropdown.on("mouseup",a,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==s.maximumInputLength&&this.search.attr("maxlength",s.maximumInputLength);var r=s.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var c=s.element.prop("readonly");c===t&&(c=!1),this.readonly(c),N=N||o(),this.autofocus=s.element.prop("autofocus"),s.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",s.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,s=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each(function(){i._sync&&this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,s!==t&&(s.container.remove(),s.liveRegion.remove(),s.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(s){var i,n,o,c,l=this;if(i=s.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=n=s.element),n&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),s=e.extend({},{populateResults:function(i,n,o){var a,r=this.opts.id,c=this.liveRegion;(a=function(i,n,h){var u,d,p,f,g,m,v,w,b,C;i=s.sortResults(i,n,o);var S=[];for(u=0,d=i.length;d>u;u+=1)p=i[u],g=p.disabled===!0,f=!g&&r(p)!==t,m=p.children&&p.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),g&&v.addClass("select2-disabled"),m&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(p)),v.attr("role","presentation"),w=e(document.createElement("div")),w.addClass("select2-result-label"),w.attr("id","select2-result-label-"+H()),w.attr("role","option"),C=s.formatResult(p,w,o,l.opts.escapeMarkup),C!==t&&(w.html(C),v.append(w)),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),a(p.children,b,h+1),v.append(b)),v.data("select2-data",p),S.push(v[0]);n.append(S),c.text(s.formatMatches(i.length))})(n,i,0)}},e.fn.select2.defaults,s),"function"!=typeof s.id&&(o=s.id,s.id=function(e){return e[o]}),e.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(n?(s.query=this.bind(function(e){var s,n,o,a={results:[],more:!1},r=e.term;o=function(t,s){var i;t.is("option")?e.matcher(r,t.text(),t)&&s.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2(function(e,t){o(t,i.children)}),i.children.length>0&&s.push(i))},s=i.children(),this.getPlaceholder()!==t&&s.length>0&&(n=this.getPlaceholderOption(),n&&(s=s.not(n))),s.each2(function(e,t){o(t,a.results)}),e.callback(a)}),s.id=function(e){return e.id}):"query"in s||("ajax"in s?(c=s.element.data("ajax-url"),c&&c.length>0&&(s.ajax.url=c),s.query=S.call(s.element,s.ajax)):"data"in s?s.query=y(s.data):"tags"in s&&(s.query=x(s.tags),s.createSearchChoice===t&&(s.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),s.initSelection===t&&(s.initSelection=function(t,i){var n=[];e(r(t.val(),s.separator,s.transformVal)).each(function(){var t={id:this,text:this},i=s.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return a(this.id,t.id)?(t=this,!1):void 0}),n.push(t)}),i(n)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");if("top"===s.createSearchChoicePosition)s.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===s.createSearchChoicePosition)s.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof s.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return s},monitorSource:function(){var s,i=this.opts.element,n=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var s=i.prop("readonly");s===t&&(s=!1),this.readonly(s),this.container&&(w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element)))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",n._sync)}),s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new s(function(t){e.each(t,n._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var s=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(s),!s.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,s,i,n,o,a=this.dropdown,r=this.container,c=r.offset(),l=r.outerHeight(!1),h=r.outerWidth(!1),u=a.outerHeight(!1),d=e(window),p=d.width(),f=d.height(),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+l,w=c.left,b=m>=v+u,C=c.top-u>=d.scrollTop(),S=a.outerWidth(!1),y=function(){return g>=w+S},x=function(){return c.left+g+r.outerWidth(!1)>S},E=a.hasClass("select2-drop-above");E?(s=!0,!C&&b&&(i=!0,s=!1)):(s=!1,!b&&C&&(i=!0,s=!0)),i&&(a.hide(),c=this.container.offset(),l=this.container.outerHeight(!1),h=this.container.outerWidth(!1),u=a.outerHeight(!1),g=d.scrollLeft()+p,m=d.scrollTop()+f,v=c.top+l,w=c.left,S=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),S=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:N.width),S>h?h=S:S=h,u=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),v-=t.top,w-=t.left),!y()&&x()&&(w=c.left+this.container.outerWidth(!1)-S),n={left:w,width:h},s?(n.top=c.top-u,n.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=e.extend(n,T(this.opts.dropdownCss,this.opts.element)),a.css(n)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),L.on("mousemove.select2Event",function(e){F.x=e.pageX,F.y=e.pageY}),!0):!1},opening:function(){var t,i=this.containerEventName,n="scroll."+i,o="resize."+i,a="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0===t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){s(t);var n,o=e("#select2-drop");o.length>0&&(n=o.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){e(this).on(o+" "+n+" "+a,function(){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,s="scroll."+t,i="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(s).off(i).off(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),L.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,s,i,n,o,a,r,c,l=this.results;if(s=this.highlight(),!(0>s)){if(0==s)return void l.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[s]),c=(i.offset()||{}).top||0,n=c+i.outerHeight(!0),s===t.length-1&&(r=l.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),o=l.offset().top+l.outerHeight(!1),n>o&&l.scrollTop(l.scrollTop()+(n-o)),a=c-l.offset().top,0>a&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<s.length;){i+=t;var n=e(s[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var s,i,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.removeHighlight(),s=e(o[t]),s.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",s.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(s.text()),i=s.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var s=e(t.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,s=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,o=this.search.val(),a=this.context;0!==s.length&&(e=s.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(s.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:a}),n.postprocessResults(e,!1,!1),e.more===!0?(s.detach().appendTo(t).html(n.opts.escapeMarkup(T(n.opts.formatLoadMore,n.opts.element,i+1))),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i,n.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(s){function i(){l.removeClass("select2-active"),d.positionDropdown(),d.liveRegion.text(h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?h.text():d.opts.formatMatches(h.find('.select2-result-selectable:not(".select2-selected")').length))}function n(e){h.html(e),i()}var o,r,c,l=this.search,h=this.results,u=this.opts,d=this,p=l.val(),f=e.data(this.container,"select2-last-term");if((s===!0||!f||!a(p,f))&&(e.data(this.container,"select2-last-term",p),s===!0||this.showSearchInput!==!1&&this.opened())){c=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(o=this.data(),e.isArray(o)&&o.length>=g&&E(u.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+T(u.formatSelectionTooBig,u.element,g)+"</li>");if(l.val().length<u.minimumInputLength)return n(E(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(u.formatInputTooShort,u.element,l.val(),u.minimumInputLength)+"</li>":""),void(s&&this.showSearch&&this.showSearch(!0));if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return void n(E(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(u.formatInputTooLong,u.element,l.val(),u.maximumInputLength)+"</li>":"");u.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+T(u.formatSearching,u.element)+"</li>"),l.addClass("select2-active"),this.removeHighlight(),r=this.tokenize(),r!=t&&null!=r&&l.val(r),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(o){var r;if(c==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(o.hasError!==t&&E(u.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+T(u.formatAjaxError,u.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==l.val()&&(r=this.opts.createSearchChoice.call(d,l.val(),o.results),r!==t&&null!==r&&d.id(r)!==t&&null!==d.id(r)&&0===e(o.results).filter(function(){
return a(d.id(this),d.id(r))}).length&&this.opts.createSearchChoicePosition(o.results,r)),0===o.results.length&&E(u.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+T(u.formatNoMatches,u.element,l.val())+"</li>");h.empty(),d.opts.populateResults.call(this,h,o.results,{term:l.val(),page:this.resultsPage,context:null}),o.more===!0&&E(u.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+u.escapeMarkup(T(u.formatLoadMore,u.element,this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(o,s),i(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),s=this.results.find(".select2-highlighted"),i=s.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var s=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&s||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(s.text())&&""===s.val())return s}},initContainerWidth:function(){function s(){var s,i,n,o,a,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(s=this.opts.element.attr("style"),s!==t)for(i=s.split(";"),o=0,a=i.length;a>o;o+=1)if(r=i[o].replace(/\s/g,""),n=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width"),s.indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=s.call(this);null!==i&&this.container.css("width",i)}}),R=k(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var s,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),s=this.search.get(0),s.createTextRange?(i=s.createTextRange(),i.collapse(!1),i.select()):s.setSelectionRange&&(n=this.search.val().length,s.setSelectionRange(n,n))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var t,i,n=this.container,o=this.dropdown,a=H();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===U.PAGE_UP||e.which===U.PAGE_DOWN)return void g(e);switch(e.which){case U.UP:case U.DOWN:return this.moveHighlight(e.which===U.UP?-1:1),void g(e);case U.ENTER:return this.selectHighlighted(),void g(e);case U.TAB:return void this.selectHighlighted({noFocus:!0});case U.ESC:return this.cancel(e),void g(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==U.TAB&&!U.isControl(e)&&!U.isFunctionKey(e)&&e.which!==U.ESC){if(this.opts.openOnEnter===!1&&e.which===U.ENTER)return void g(e);if(e.which==U.DOWN||e.which==U.UP||e.which==U.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void g(e)}return e.which==U.DELETE||e.which==U.BACKSPACE?(this.opts.allowClear&&this.clear(),void g(e)):void 0}})),l(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection&&this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){s(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),g(i)})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){g(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var s=this.selection.data("select2-data");if(s){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(s,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(s.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=s.val(),o=null;t.query({matcher:function(e,s,i){var r=a(n,t.id(i));return r&&(o=i),r},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,s){var i=0,n=this;if(this.findHighlightableChoices().each2(function(e,t){return a(n.id(t.data("select2-data")),n.opts.element.val())?(i=e,!1):void 0}),s!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(O(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var s=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),a(s,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var s,i,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),null!==e&&(s=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),s!==t&&n.append(s),i=this.opts.formatSelectionCssClass(e,n),i!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,s=!1,i=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=n.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(s);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),s&&n.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var s,i=!1;return 0===arguments.length?(s=this.selection.data("select2-data"),s==t&&(s=null),s):(arguments.length>1&&(i=arguments[1]),void(e?(s=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:s})):this.clear(i)))}}),D=k(A,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),s=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(s.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(s,i){var n=r(s.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(s,i,r){var c=e.grep(n,function(e){return a(e,t.id(r))}).length;return c&&o.push(r),c},callback:e.isFunction(i)?function(){for(var e=[],s=0;s<n.length;s++)for(var r=n[s],c=0;c<o.length;c++){var l=o[c];if(a(r,t.id(l))){e.push(l),o.splice(c,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var t,s=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(s);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+H()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var s=t.find(".select2-search-choice-focus"),i=s.prev(".select2-search-choice:not(.select2-locked)"),n=s.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(s.length&&(e.which==U.LEFT||e.which==U.RIGHT||e.which==U.BACKSPACE||e.which==U.DELETE||e.which==U.ENTER)){var a=s;return e.which==U.LEFT&&i.length?a=i:e.which==U.RIGHT?a=n.length?n:null:e.which===U.BACKSPACE?this.unselect(s.first())&&(this.search.width(10),a=i.length?i:n):e.which==U.DELETE?this.unselect(s.first())&&(this.search.width(10),a=n.length?n:null):e.which==U.ENTER&&(a=null),this.selectChoice(a),g(e),void(a&&a.length||this.open())}if((e.which===U.BACKSPACE&&1==this.keydowns||e.which==U.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void g(e);if(this.selectChoice(null),this.opened())switch(e.which){case U.UP:case U.DOWN:return this.moveHighlight(e.which===U.UP?-1:1),void g(e);case U.ENTER:return this.selectHighlighted(),void g(e);case U.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case U.ESC:return this.cancel(e),void g(e)}if(e.which!==U.TAB&&!U.isControl(e)&&!U.isFunctionKey(e)&&e.which!==U.BACKSPACE&&e.which!==U.ESC){if(e.which===U.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===U.PAGE_UP||e.which===U.PAGE_DOWN)&&g(e),e.which===U.ENTER&&g(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",s,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",s,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),s=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(s>0?s:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var s=[],i=[],o=this;e(t).each(function(){n(o.id(this),s)<0&&(s.push(o.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,s){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),s&&s.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n,o=!s.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),c=o?a:r,l=this.id(s),h=this.getVal();i=this.opts.formatSelection(s,c.find("div"),this.opts.escapeMarkup),i!=t&&c.find("div").replaceWith(e("<div></div>").html(i)),n=this.opts.formatSelectionCssClass(s,c.find("div")),n!=t&&c.addClass(n),o&&c.find(".select2-search-choice-close").on("mousedown",g).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),g(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),c.data("select2-data",s),c.insertBefore(this.searchContainer),h.push(l),this.setVal(h)},unselect:function(t){var s,i,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(s=t.data("select2-data")){var a=e.Event("select2-removing");if(a.val=this.id(s),a.choice=s,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(i=n(this.id(s),o))>=0;)o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(s),choice:s}),this.triggerChange({removed:s}),!0}},postprocessResults:function(e,t,s){var i=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),r=this;o.each2(function(e,t){var s=r.id(t.data("select2-data"));n(s,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&s!==!1&&this.opts.closeOnSelect===!0&&r.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&E(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-c(this.search)},resizeSearch:function(){var e,t,s,i,n,o=c(this.search);e=v(this.search)+10,t=this.search.offset().left,s=this.selection.width(),i=this.selection.offset().left,n=s-(t-i)-o,e>n&&(n=s-o),40>n&&(n=s-o),0>=n&&(n=e),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),r(e,this.opts.separator,this.opts.transformVal))},setVal:function(t){var s;this.select?this.select.val(t):(s=[],e(t).each(function(){n(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),s=0;s<t.length;s++)for(var i=0;i<e.length;i++)a(this.opts.id(t[s]),this.opts.id(e[i]))&&(t.splice(s,1),s>0&&s--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(s,i){var n,o=this;if(0===arguments.length)return this.getVal();if(n=this.data(),n.length||(n=[]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e.map(t,o.id);o.setVal(s),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,s){var i,n,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(n=this.data(),t||(t=[]),i=e.map(t,function(e){return o.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),s&&this.triggerChange(this.buildChangeDetails(n,this.data())),void 0)}}),e.fn.select2=function(){var s,i,o,a,r,c=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])s=0===c.length?{}:e.extend({},c[0]),s.element=e(this),"select"===s.element.get(0).tagName.toLowerCase()?r=s.element.prop("multiple"):(r=s.multiple||!1,"tags"in s&&(s.multiple=r=!0)),i=r?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(s);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(n(c[0],l)<0)throw"Unknown method: "+c[0];if(a=t,i=e(this).data("select2"),i===t)return;if(o=c[0],"container"===o?a=i.container:"dropdown"===o?a=i.dropdown:(d[o]&&(o=d[o]),a=i[o].apply(i,c.slice(1))),n(c[0],h)>=0||n(c[0],u)>=0&&1==c.length)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s,i){var n=[];return b(this.text(e),s.term,n,i),n.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,s,i){return e?i(this.text(e)):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:P,escapeMarkup:C,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var s=t-e.length;return"Please enter "+s+" or more character"+(1==s?"":"s")},formatInputTooLong:function(e,t){var s=e.length-t;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:y,tags:x},util:{debounce:u,markMatch:b,escapeMarkup:C,stripDiacritics:i},"class":{"abstract":A,single:R,multi:D}}}}(jQuery);


},{}],158:[function(require,module,exports){
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function i(e){if(e.minTime&&(e.minTime=k(e.minTime)),e.maxTime&&(e.maxTime=k(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=k(e.durationTime)),e.disableTimeRanges.length>0){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[k(e.disableTimeRanges[i][0]),k(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(var i=e.disableTimeRanges.length-1;i>0;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function t(i){var t=i.data("timepicker-settings"),a=i.data("timepicker-list");a&&a.length&&(a.remove(),i.data("timepicker-list",!1)),a=e("<ul />",{"class":"ui-timepicker-list"});var r=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});r.css({display:"none",position:"absolute"}).append(a),t.className&&r.addClass(t.className),null===t.minTime&&null===t.durationTime||!t.showDuration||r.addClass("ui-timepicker-with-duration");var n=t.minTime;"function"==typeof t.durationTime?n=k(t.durationTime()):null!==t.durationTime&&(n=t.durationTime);var c=null!==t.minTime?t.minTime:0,l=null!==t.maxTime?t.maxTime:c+b-1;c>=l&&(l+=b),l===b-1&&-1!==t.timeFormat.indexOf("H")&&(l=b);for(var u=t.disableTimeRanges,m=0,d=u.length,p=c;l>=p;p+=60*t.step){var v=p,T=e("<li />");if(T.data("time",86400>=v?v:v%86400),T.text(h(v,t.timeFormat)),(null!==t.minTime||null!==t.durationTime)&&t.showDuration){var y=e("<span />");y.addClass("ui-timepicker-duration"),y.text(" ("+g(p-n)+")"),T.append(y)}d>m&&(v>=u[m][1]&&(m+=1),u[m]&&v>=u[m][0]&&v<u[m][1]&&T.addClass("ui-timepicker-disabled")),a.append(T)}r.data("timepicker-input",i),i.data("timepicker-list",r);var w=t.appendTo;"string"==typeof w?w=e(w):"function"==typeof w&&(w=w(i)),w.append(r),o(i,a),a.on("click","li",function(){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",x.show)}),s(i)||i[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),f(i)&&(i.trigger("hideTimepicker"),r.hide())})}function a(){return new Date(1970,1,1,0,0,0)}function r(i){var t=e(i.target),a=t.closest(".ui-timepicker-input");0===a.length&&0===t.closest(".ui-timepicker-wrapper").length&&(x.hide(),e("body").unbind(".ui-timepicker"),e(window).unbind(".ui-timepicker"))}function s(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function n(i,t,a){if(!a&&0!==a)return!1;var r=i.data("timepicker-settings"),s=!1,n=30*r.step;return t.find("li").each(function(i,t){var r=e(t),o=r.data("time")-a;return Math.abs(o)<n||o==n?(s=r,!1):void 0}),s}function o(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=k(l(e));if(null!==t){var a=n(e,i,t);if(a){var r=a.offset().top-i.offset().top;(r+a.outerHeight()>i.outerHeight()||0>r)&&i.scrollTop(i.scrollTop()+a.position().top-a.outerHeight()),a.addClass("ui-timepicker-selected")}}}function c(){if(""!==this.value){var i=e(this),t=i.data("timepicker-list");if(!t||!t.is(":visible")){var a=k(this.value);if(null===a)return void i.trigger("timeFormatError");var r=i.data("timepicker-settings"),s=!1;if(null!==r.minTime&&a<r.minTime?s=!0:null!==r.maxTime&&a>r.maxTime&&(s=!0),e.each(r.disableTimeRanges,function(){return a>=this[0]&&a<this[1]?(s=!0,!1):void 0}),r.forceRoundTime){var n=a%(60*r.step);n>=30*r.step?a+=60*r.step-n:a-=n}var o=h(a,r.timeFormat);s?u(i,o,"error")&&i.trigger("timeRangeError"):u(i,o)}}}function l(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function u(e,i,t){return e.is("input")&&e.val(i),e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function m(i){var t=e(this),a=t.data("timepicker-list");if(!a||!a.is(":visible")){if(40!=i.keyCode)return d(i,t);s(t)||t.focus()}switch(i.keyCode){case 13:return f(t)&&x.hide.apply(this),i.preventDefault(),!1;case 38:var r=a.find(".ui-timepicker-selected");return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&a.scrollTop(a.scrollTop()-r.outerHeight())):(a.find("li").each(function(i,t){return e(t).position().top>0?(r=e(t),!1):void 0}),r.addClass("ui-timepicker-selected")),!1;case 40:return r=a.find(".ui-timepicker-selected"),0===r.length?(a.find("li").each(function(i,t){return e(t).position().top>0?(r=e(t),!1):void 0}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+r.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),x.hide();break;case 9:x.hide();break;default:return d(i,t)}}function d(e,i){return!i.data("timepicker-settings").disableTextInput||e.ctrlKey||e.altKey||e.metaKey||2!=e.keyCode&&8!=e.keyCode&&e.keyCode<46}function p(i){var t=e(this),a=t.data("timepicker-list");if(!a||!a.is(":visible"))return!0;if(!t.data("timepicker-settings").typeaheadHighlight)return a.find("li").removeClass("ui-timepicker-selected"),!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:o(t,a);break;default:return}}function f(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,r=t.find(".ui-timepicker-selected");if(r.hasClass("ui-timepicker-disabled"))return!1;if(r.length?a=r.data("time"):l(e)&&(a=k(l(e)),o(e,t)),null!==a){var s=h(a,i.timeFormat);u(e,s,"select")}return!0}function g(e){var i,t=Math.round(e/60);if(Math.abs(t)<60)i=[t,w.mins];else if(60==t)i=["1",w.hr];else{var a=(t/60).toFixed(1);"."!=w.decimal&&(a=a.replace(".",w.decimal)),i=[a,w.hrs]}return i.join(" ")}function h(e,i){if(null!==e){for(var t,a,r=new Date(T.valueOf()+1e3*e),s="",n=0;n<i.length;n++)switch(a=i.charAt(n)){case"a":s+=r.getHours()>11?"pm":"am";break;case"A":s+=r.getHours()>11?"PM":"AM";break;case"g":t=r.getHours()%12,s+=0===t?"12":t;break;case"G":s+=r.getHours();break;case"h":t=r.getHours()%12,0!==t&&10>t&&(t="0"+t),s+=0===t?"12":t;break;case"H":t=r.getHours(),e===b&&(t=24),s+=t>9?t:"0"+t;break;case"i":var o=r.getMinutes();s+=o>9?o:"0"+o;break;case"s":e=r.getSeconds(),s+=e>9?e:"0"+e;break;default:s+=a}return s}}function k(e){if(""===e)return null;if(!e||e+0==e)return e;"object"==typeof e&&(e=e.getHours()+":"+v(e.getMinutes())+":"+v(e.getSeconds())),e=e.toLowerCase();{var i;new Date(0)}if(-1===e.indexOf(":")?(i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/),i||(i=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))):i=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/),!i)return null;var t,a=parseInt(1*i[1],10);t=i[4]?12==a?"p"==i[4]?12:0:a+("p"==i[4]?12:0):a;var r=1*i[2]||0,s=1*i[3]||0;return 3600*t+60*r+s}function v(e){return("0"+e).slice(-2)}var T=a(),b=86400,y={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",disableTimeRanges:[],closeOnWindowScroll:!1,disableTextInput:!1,typeaheadHighlight:!0},w={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},x={init:function(t){return this.each(function(){var a=e(this);if("SELECT"==a[0].tagName){for(var r={type:"text",value:a.val()},s=a[0].attributes,n=0;n<s.length;n++)r[s[n].nodeName]=s[n].nodeValue;var o=e("<input />",r);a.replaceWith(o),a=o}var l=e.extend({},y);t&&(l=e.extend(l,t)),l.lang&&(w=e.extend(w,l.lang)),l=i(l),a.data("timepicker-settings",l),a.prop("autocomplete","off"),a.on("click.timepicker focus.timepicker",x.show),a.on("change.timepicker",c),a.on("keydown.timepicker",m),a.on("keyup.timepicker",p),a.addClass("ui-timepicker-input"),c.call(a.get(0))})},show:function(i){i.preventDefault();var a=e(this),o=a.data("timepicker-settings");s(a)&&a.blur();var c=a.data("timepicker-list");if(!a.prop("readonly")&&(c&&0!==c.length&&"function"!=typeof o.durationTime||(t(a),c=a.data("timepicker-list")),!c.is(":visible"))){x.hide(),c.show(),c.offset(a.offset().top+a.outerHeight(!0)+c.outerHeight()>e(window).height()+e(window).scrollTop()?{left:a.offset().left+parseInt(c.css("marginLeft").replace("px",""),10),top:a.offset().top-c.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10)}:{left:a.offset().left+parseInt(c.css("marginLeft").replace("px",""),10),top:a.offset().top+a.outerHeight()+parseInt(c.css("marginTop").replace("px",""),10)});var u=c.find(".ui-timepicker-selected");if(u.length||(l(a)?u=n(a,c,k(l(a))):o.scrollDefaultNow?u=n(a,c,k(new Date)):o.scrollDefaultTime!==!1&&(u=n(a,c,k(o.scrollDefaultTime)))),u&&u.length){var m=c.scrollTop()+u.position().top-u.outerHeight();c.scrollTop(m)}else c.scrollTop(0);e("body").on("touchstart.ui-timepicker mousedown.ui-timepicker",r),o.closeOnWindowScroll&&e(window).on("scroll.ui-timepicker",r),a.trigger("showTimepicker")}},hide:function(){e(".ui-timepicker-wrapper:visible").each(function(){var i=e(this),t=i.data("timepicker-input"),a=t.data("timepicker-settings");a&&a.selectOnBlur&&f(t),i.hide(),t.trigger("hideTimepicker")})},option:function(t,a){var r=this,s=r.data("timepicker-settings"),n=r.data("timepicker-list");if("object"==typeof t)s=e.extend(s,t);else if("string"==typeof t&&"undefined"!=typeof a)s[t]=a;else if("string"==typeof t)return s[t];return s=i(s),r.data("timepicker-settings",s),n&&(n.remove(),r.data("timepicker-list",!1)),r},getSecondsFromMidnight:function(){return k(l(this))},getTime:function(e){var i=this,t=l(i);return t?(e||(e=new Date),e.setHours(0,0,0,0),new Date(e.valueOf()+1e3*k(t))):null},setTime:function(e){var i=this,t=h(k(e),i.data("timepicker-settings").timeFormat);u(i,t),i.data("timepicker-list")&&o(i,i.data("timepicker-list"))},remove:function(){var e=this;e.hasClass("ui-timepicker-input")&&(e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"))}};e.fn.timepicker=function(i){return x[i]?x[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.timepicker"):x.init.apply(this,arguments)}});


},{}],159:[function(require,module,exports){
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=d(e,i,4);var o=!w(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=b(r,e);for(var u=null!=t&&t.length,i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t){var r=S.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||o,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=S[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var e=this,u=e._,i=Array.prototype,o=Object.prototype,a=Function.prototype,c=i.push,l=i.slice,f=o.toString,s=o.hasOwnProperty,p=Array.isArray,h=Object.keys,v=a.bind,g=Object.create,y=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):e._=m,m.VERSION="1.8.2";var d=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},b=function(n,t,r){return null==n?m.identity:m.isFunction(n)?d(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return b(n,t,1/0)};var x=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var l=o[c];t&&void 0!==r[l]||(r[l]=i[l])}return r}},_=function(n){if(!m.isObject(n))return{};if(g)return g(n);y.prototype=n;var t=new y;return y.prototype=null,t},j=Math.pow(2,53)-1,w=function(n){var t=n&&n.length;return"number"==typeof t&&t>=0&&j>=t};m.each=m.forEach=function(n,t,r){t=d(t,r);var e,u;if(w(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=w(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&-1!==e?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=b(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(b(t)),r)},m.every=m.all=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=b(t,r);for(var e=!w(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r){return w(n)||(n=m.values(n)),m.indexOf(n,t,"number"==typeof r&&r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-(1/0),o=-(1/0);if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-(1/0)&&i===-(1/0))&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=w(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=b(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||u===1/0&&i===1/0)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=w(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(w(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=b(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var A=function(n){return function(t,r,e){var u={};return r=b(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=A(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=A(function(n,t,r){n[r]=t}),m.countBy=A(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):w(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:w(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=b(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var k=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=n&&n.length;a>o;o++){var c=n[o];if(w(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=k(c,t,r));var l=0,f=c.length;for(u.length+=f;f>l;)u[i++]=c[l++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return k(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){if(null==n)return[];m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=b(r,e));for(var u=[],i=[],o=0,a=n.length;a>o;o++){var c=n[o],l=r?r(c,o,n):c;t?(o&&i===l||u.push(c),i=l):r?m.contains(i,l)||(i.push(l),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(k(arguments,!0,!0))},m.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=k(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,"length").length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=n&&n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.indexOf=function(n,t,r){var e=0,u=n&&n.length;if("number"==typeof r)e=0>r?Math.max(0,u+r):r;else if(r&&u)return e=m.sortedIndex(n,t),n[e]===t?e:-1;if(t!==t)return m.findIndex(l.call(n,e),m.isNaN);for(;u>e;e++)if(n[e]===t)return e;return-1},m.lastIndexOf=function(n,t,r){var e=n?n.length:0;if("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1)),t!==t)return m.findLastIndex(l.call(n,0,e),m.isNaN);for(;--e>=0;)if(n[e]===t)return e;return-1},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=b(r,e,1);for(var u=r(t),i=0,o=n.length;o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var O=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=_(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(v&&n.bind===v)return v.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return O(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return O(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var l=m.now();a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,u=arguments,0>=f||f>t?(o&&(clearTimeout(o),o=null),a=l,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,f)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var l=m.now()-o;t>l&&l>=0?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),S=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(h)return h(n);var t=[];for(var e in n)m.has(n,e)&&t.push(e);return F&&r(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var e in n)t.push(e);return F&&r(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=x(m.allKeys),m.extendOwn=m.assign=x(m.keys),m.findKey=function(n,t,r){t=b(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=d(t,r)):(u=k(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var l=u[a],f=o[l];e(f,l,o)&&(i[l]=f)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(k(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=x(m.allKeys,!0),m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var E=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=f.call(n);if(u!==f.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!E(n[c],t[c],r,e))return!1}else{var l,s=m.keys(n);if(c=s.length,m.keys(t).length!==c)return!1;for(;c--;)if(l=s[c],!m.has(t,l)||!E(n[l],t[l],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return E(n,t)},m.isEmpty=function(n){return null==n?!0:w(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=p||function(n){return"[object Array]"===f.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return f.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===f.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&s.call(n,t)},m.noConflict=function(){return e._=u,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=function(n){return function(t){return null==t?void 0:t[n]}},m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=d(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=m.invert(M),I=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=I(M),m.unescape=I(N),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var B=0;m.uniqueId=function(n){var t=++B+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,K=function(n){return"\\"+R[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||T).source,(t.interpolate||T).source,(t.evaluate||T).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(q,K),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},l=t.variable||"obj";return c.source="function("+l+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var z=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),z(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],z(this,r)}}),m.each(["concat","join","slice"],function(n){var t=i[n];m.prototype[n]=function(){return z(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);


},{}],"jquery":[function(require,module,exports){
module.exports=jQuery;


},{}]},{},[2]);
